(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{OoBn:function(a,e,s){"use strict";s.r(e),s.d(e,"_frontmatter",(function(){return b})),s.d(e,"default",(function(){return i}));s("rGqo"),s("yt8O"),s("Btvt"),s("RW0V"),s("91GP"),s("q1tI");var t=s("E/Ix"),n=s("1zrH"),c=s("Qjvx");var b={},m={_frontmatter:b},p=n.a;function i(a){var e=a.components,s=function(a,e){if(null==a)return{};var s,t,n={},c=Object.keys(a);for(t=0;t<c.length;t++)s=c[t],e.indexOf(s)>=0||(n[s]=a[s]);return n}(a,["components"]);return Object(t.b)(p,Object.assign({},m,s,{components:e,mdxType:"MDXLayout"}),Object(t.b)("p",null,"In the wild world of 2019 SwiftUI development, lots of things aren't documented. One such thing I ran into recently was the usage of ",Object(t.b)("inlineCode",{parentName:"p"},"RelativeDateTimeFormatter")," in a ",Object(t.b)("inlineCode",{parentName:"p"},"Text")," view."),Object(t.b)("p",null,Object(t.b)("inlineCode",{parentName:"p"},"RelativeDateTimeFormatter")," is a new formatter which is available in iOS 13+ and macOS 10.15+. Though it's ",Object(t.b)("a",Object.assign({parentName:"p"},{href:"https://developer.apple.com/documentation/foundation/relativedatetimeformatter"}),"not documented at the time of writing")," (just like ",Object(t.b)("a",Object.assign({parentName:"p"},{href:"https://nooverviewavailable.com/foundation/"}),"14.6% of Foundation"),"), there have been a ",Object(t.b)("a",Object.assign({parentName:"p"},{href:"https://nshipster.com/formatter/#relativedatetimeformatter"}),"fair")," ",Object(t.b)("a",Object.assign({parentName:"p"},{href:"https://david.y4ng.fr/relativedatetimeformatter-and-listformatter/"}),"amount")," of folks online writing about it. This formatter formats dates relative each other as well as relative ",Object(t.b)("inlineCode",{parentName:"p"},"DateComponents"),' - its output looks like "one minute ago" or "two minutes from now".'),Object(t.b)("p",null,"Most blog posts about ",Object(t.b)("inlineCode",{parentName:"p"},"RelativeDateTimeFormatter")," show its usage like this:"),Object(t.b)("pre",{className:"dark-default-dark vscode-highlight","data-language":"swift"},Object(t.b)("code",Object.assign({parentName:"pre"},{className:"vscode-highlight-code"}),Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk4"}),"let"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"})," formatter = "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk11"}),"RelativeDateTimeFormatter"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"()")),"\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"formatter."),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk11"}),"localizedString"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"("),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk11"}),"from"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),": "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk11"}),"DateComponents"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"("),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk11"}),"day"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),": "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk7"}),"-1"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),")) "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk3"}),'// "1 day ago"')))),Object(t.b)("h1",{id:"swiftui-date-formatters-and-string-interpolation"},"SwiftUI, date formatters, and string interpolation"),Object(t.b)("p",null,"SwiftUI declares a custom string interpolation (",Object(t.b)("a",Object.assign({parentName:"p"},{href:"https://www.hackingwithswift.com/articles/163/how-to-use-custom-string-interpolation-in-swift"}),"which is a new feature in Swift 5"),") called ",Object(t.b)("inlineCode",{parentName:"p"},"LocalizedStringKey.StringInterpolation")," (also ",Object(t.b)("a",Object.assign({parentName:"p"},{href:"https://developer.apple.com/documentation/swiftui/localizedstringkey/stringinterpolation"}),"undocumented at the time of writing"),", like ",Object(t.b)("a",Object.assign({parentName:"p"},{href:"https://nooverviewavailable.com/swiftui/"}),"59.4% of SwiftUI"),") which allows you to write ",Object(t.b)("inlineCode",{parentName:"p"},"Text")," views with formatters like so:"),Object(t.b)("pre",{className:"dark-default-dark vscode-highlight","data-language":"swift"},Object(t.b)("code",Object.assign({parentName:"pre"},{className:"vscode-highlight-code"}),Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk11"}),"Text"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"("),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk8"}),'"My String '),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk4"}),"\\("),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"myVariable, formatter: myFormatter"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk4"}),")"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk8"}),'"'),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),")")))),Object(t.b)("p",null,"Let's assume I want to show the relative time from the ",Object(t.b)("a",Object.assign({parentName:"p"},{href:"https://en.wikipedia.org/wiki/Unix_time"}),"Unix Epoch")," until now. I'll just write a ",Object(t.b)("inlineCode",{parentName:"p"},"Text")," the same way, right?"),Object(t.b)("pre",{className:"dark-default-dark vscode-highlight","data-language":"swift"},Object(t.b)("code",Object.assign({parentName:"pre"},{className:"vscode-highlight-code"}),Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk4"}),"struct"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk10"}),"ContentView"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),": View {")),"\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"    "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk4"}),"static"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk4"}),"let"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"})," formatter = "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk11"}),"RelativeDateTimeFormatter"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"()")),"\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}))),"\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"    "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk4"}),"var"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"})," body: some View {")),"\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"        "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk4"}),"let"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"})," unixEpoch = "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk11"}),"Date"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"("),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk11"}),"timeIntervalSince1970"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),": "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk7"}),"0"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),")")),"\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"        "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk4"}),"let"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"})," components = Calendar."),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk12"}),"current"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"."),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk11"}),"dateComponents"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"(")),"\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"            [."),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk12"}),"day"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),", ."),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk12"}),"year"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),", ."),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk12"}),"month"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),", ."),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk12"}),"minute"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),", ."),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk12"}),"second"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"],")),"\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"            "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk11"}),"from"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),": "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk11"}),"Date"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"(),")),"\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"            "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk11"}),"to"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),": unixEpoch")),"\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"        )")),"\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"        "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk15"}),"return"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"})," VStack {")),"\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"            "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk11"}),"Text"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"("),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk8"}),'"Current date is:"'),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),")")),"\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"            "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk11"}),"Text"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"("),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk8"}),'"'),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk4"}),"\\("),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"components, formatter: "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk4"}),"Self"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"."),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk12"}),"formatter"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk4"}),")"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk8"}),'"'),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),")."),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk11"}),"bold"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"()")),"\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"            "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk11"}),"Text"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"("),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk8"}),'"since the unix Epoch"'),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),")")),"\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"            "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk11"}),"Spacer"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"()")),"\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"        }")),"\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"    }")),"\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"}")))),Object(t.b)("p",null,"Unfortunately this doesn't work - the middle text doesn't show up:"),Object(t.b)(c.a,{filename:"relativedatetime-1.png",alt:"Screenshot of the app showing no content in the second Text view",caption:"Interesting",mdxType:"CaptionedImage"}),Object(t.b)("p",null,"There's also an error in the console!"),Object(t.b)("pre",{className:"dark-default-dark vscode-highlight","data-language":""},Object(t.b)("code",Object.assign({parentName:"pre"},{className:"vscode-highlight-code"}),Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),"The supplied formatter <NSRelativeDateTimeFormatter: 0x6000025c7c00>"),"\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),"returned `nil` when invoked with <NSDateComponents: 0x6000026b4450> {"),"\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),"    Calendar Year: -49"),"\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),"    Month: -9"),"\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),"    Day: -18"),"\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),"    Minute: -1017"),"\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),"    Second: -43. An empty string will be used instead."))),Object(t.b)("h1",{id:"the-tricky-part"},"The Tricky Part"),Object(t.b)("p",null,"As far as I can tell, the reason this happens is because ",Object(t.b)("inlineCode",{parentName:"p"},"RelativeDateTimeFormatter")," has a few different methods, with different signatures, for formatting its relative dates:"),Object(t.b)("pre",{className:"dark-default-dark vscode-highlight","data-language":"swift"},Object(t.b)("code",Object.assign({parentName:"pre"},{className:"vscode-highlight-code"}),Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk4"}),"func"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk11"}),"localizedString"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"("),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk11"}),"for"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),": Date, "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk11"}),"relativeTo"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),": Date) -> "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk10"}),"String")),"\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk4"}),"func"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk11"}),"localizedString"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"("),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk11"}),"from"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),": DateComponents) -> "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk10"}),"String")),"\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk4"}),"func"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk11"}),"localizedString"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"("),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk11"}),"fromTimeInterval"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),": TimeInterval) -> "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk10"}),"String")),"\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk4"}),"func"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk11"}),"string"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"("),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk11"}),"for"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),": "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk10"}),"Any"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"?) -> "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk10"}),"String"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"?")))),Object(t.b)("p",null,"Only one of those matches the ",Object(t.b)("a",Object.assign({parentName:"p"},{href:"https://developer.apple.com/documentation/foundation/formatter"}),"Formatter")," superclass definition that SwiftUI's string interpolation uses. I'm guessing that ",Object(t.b)("inlineCode",{parentName:"p"},"RelativeDateTimeFormatter"),"'s ",Object(t.b)("inlineCode",{parentName:"p"},"string(for:)")," method doesn't call into the same code that ",Object(t.b)("inlineCode",{parentName:"p"},"localizedString(from:)")," uses - it seems like ",Object(t.b)("inlineCode",{parentName:"p"},"string(for:)")," handles the ",Object(t.b)("inlineCode",{parentName:"p"},"Date")," case, but not the ",Object(t.b)("inlineCode",{parentName:"p"},"DateComponents")," case."),Object(t.b)("p",null,"Hopefully this changes in a future version of iOS, but for now, we can solve the problem in a couple of ways: "),Object(t.b)("h2",{id:"solution-1"},"Solution #1"),Object(t.b)("p",null,"Since what we want is the date relative to ",Object(t.b)("em",{parentName:"p"},"right now"),", and that's the default behavior of ",Object(t.b)("inlineCode",{parentName:"p"},"RelativeDateTimeFormatter"),", we can just pass in ",Object(t.b)("inlineCode",{parentName:"p"},"epochTime"),":"),Object(t.b)("pre",{className:"dark-default-dark vscode-highlight","data-language":"swift"},Object(t.b)("code",Object.assign({parentName:"pre"},{className:"vscode-highlight-code"}),Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk4"}),"struct"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk10"}),"ContentView"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),": View {")),"\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"    "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk4"}),"static"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk4"}),"let"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"})," formatter = "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk11"}),"RelativeDateTimeFormatter"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"()")),"\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}))),"\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"    "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk4"}),"var"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"})," body: some View {")),"\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"        "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk4"}),"let"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"})," unixEpoch = "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk11"}),"Date"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"("),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk11"}),"timeIntervalSince1970"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),": "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk7"}),"0"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),")")),"\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"        "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk15"}),"return"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"})," VStack {")),"\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"            "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk11"}),"Text"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"("),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk8"}),'"Current date is:"'),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),")")),"\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"            "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk11"}),"Text"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"("),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk8"}),'"'),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk4"}),"\\("),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"unixEpoch, formatter: "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk4"}),"Self"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"."),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk12"}),"formatter"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk4"}),")"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk8"}),'"'),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),")."),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk11"}),"bold"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"()")),"\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"            "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk11"}),"Text"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"("),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk8"}),'"since the unix Epoch"'),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),")")),"\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"            "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk11"}),"Spacer"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"()")),"\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"        }")),"\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"    }")),"\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"}")))),Object(t.b)("p",null,"This gets us the result we want:"),Object(t.b)(c.a,{filename:"relativedatetime-2.png",alt:"Screenshot of the app showing the correct relative time",caption:"Note: if you want minutes, seconds, etc, set the formatter's dateTimeStyle and unitStyle",mdxType:"CaptionedImage"}),Object(t.b)("p",null,"Also note: even though nothing at the surface level is calling ",Object(t.b)("inlineCode",{parentName:"p"},"localizedString"),", the string will be properly localized as long as you set the formatter's ",Object(t.b)("inlineCode",{parentName:"p"},"locale"),"."),Object(t.b)("h2",{id:"solution-2"},"Solution #2"),Object(t.b)("p",null,"We can also ignore the custom string interpolation, and just call the formatter's ",Object(t.b)("inlineCode",{parentName:"p"},"localizedString"),":"),Object(t.b)("pre",{className:"dark-default-dark vscode-highlight","data-language":"swift"},Object(t.b)("code",Object.assign({parentName:"pre"},{className:"vscode-highlight-code"}),Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk4"}),"struct"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk10"}),"ContentView"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),": View {")),"\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"    "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk4"}),"static"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"})," "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk4"}),"let"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"})," formatter = "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk11"}),"RelativeDateTimeFormatter"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"()")),"\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}))),"\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"    "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk4"}),"var"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"})," body: some View {")),"\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"        "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk4"}),"let"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"})," unixEpoch = "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk11"}),"Date"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"("),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk11"}),"timeIntervalSince1970"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),": "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk7"}),"0"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),")")),"\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"        "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk4"}),"let"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"})," components = Calendar."),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk12"}),"current"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"."),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk11"}),"dateComponents"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"(")),"\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"            [."),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk12"}),"day"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),", ."),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk12"}),"year"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),", ."),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk12"}),"month"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),", ."),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk12"}),"minute"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),", ."),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk12"}),"second"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"],")),"\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"            "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk11"}),"from"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),": "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk11"}),"Date"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"(),")),"\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"            "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk11"}),"to"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),": unixEpoch")),"\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"        )")),"\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"        "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk15"}),"return"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"})," VStack {")),"\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"            "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk11"}),"Text"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"("),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk8"}),'"Current date is:"'),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),")")),"\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"            "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk11"}),"Text"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"("),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk8"}),'"'),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk4"}),"\\(Self"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"."),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk12"}),"formatter"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"."),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk11"}),"localizedString"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"("),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk11"}),"from"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),": components)"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk4"}),")"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk8"}),'"'),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),")."),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk11"}),"bold"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"()")),"\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"            "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk11"}),"Text"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"("),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk8"}),'"since the unix Epoch"'),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),")")),"\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"            "),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk11"}),"Spacer"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"()")),"\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"        }")),"\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"    }")),"\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"vscode-highlight-line"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"mtk1"}),"}")))),Object(t.b)(c.a,{filename:"relativedatetime-2.png",alt:"Screenshot of the app showing the correct relative time",caption:"🎉",mdxType:"CaptionedImage"}),Object(t.b)("h1",{id:"conclusion"},"Conclusion"),Object(t.b)("p",null,"Either of the solutions above would work for this specific issue, though if you want to output the relative time between two dates (instead of between one date and now) with the ",Object(t.b)("inlineCode",{parentName:"p"},"formatter:")," string interpolation, looks like you're out of luck."),Object(t.b)("p",null,"Sample code for this post is available ",Object(t.b)("a",Object.assign({parentName:"p"},{href:"https://github.com/noahsark769/NGSwiftUIRelativeDateTimeFormatterExample"}),"on GitHub   "),"."),Object(t.b)("style",{className:"vscode-highlight-styles"},"\n  \n  .dark-default-dark {\nbackground-color: #1E1E1E;\ncolor: #D4D4D4;\n}\n\n.dark-default-dark .mtk1 { color: #D4D4D4; }\n.dark-default-dark .mtk2 { color: #1E1E1E; }\n.dark-default-dark .mtk3 { color: #6A9955; }\n.dark-default-dark .mtk4 { color: #569CD6; }\n.dark-default-dark .mtk5 { color: #D16969; }\n.dark-default-dark .mtk6 { color: #D7BA7D; }\n.dark-default-dark .mtk7 { color: #B5CEA8; }\n.dark-default-dark .mtk8 { color: #CE9178; }\n.dark-default-dark .mtk9 { color: #646695; }\n.dark-default-dark .mtk10 { color: #4EC9B0; }\n.dark-default-dark .mtk11 { color: #DCDCAA; }\n.dark-default-dark .mtk12 { color: #9CDCFE; }\n.dark-default-dark .mtk13 { color: #000080; }\n.dark-default-dark .mtk14 { color: #F44747; }\n.dark-default-dark .mtk15 { color: #C586C0; }\n.dark-default-dark .mtk16 { color: #6796E6; }\n.dark-default-dark .mtk17 { color: #808080; }\n.dark-default-dark .mtki { font-style: italic; }\n.dark-default-dark .mtkb { font-weight: bold; }\n.dark-default-dark .mtku { text-decoration: underline; text-underline-position: under; }\n"))}i.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-blog-swiftui-relativedatetimeformatter-mdx-ed7ac58dedc3466e53be.js.map