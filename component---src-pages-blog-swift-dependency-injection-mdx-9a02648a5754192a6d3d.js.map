{"version":3,"sources":["webpack:///./src/pages/blog/swift-dependency-injection.mdx","webpack:///./src/components/default.jsx","webpack:///./node_modules/gatsby-link/index.js","webpack:///./src/components/colors.js","webpack:///./node_modules/@mdx-js/tag/dist/mdx-provider.js","webpack:///./node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js","webpack:///./src/fonts/Bariol-Regular.eot","webpack:///./src/fonts/Bariol-Regular.woff","webpack:///./src/fonts/Bariol-Regular.ttf","webpack:///./src/fonts/Bariol-Regular.svg","webpack:///./src/components/Nav.jsx","webpack:///./src/components/BlogPost.jsx","webpack:///./src/components/MarkdownContent.jsx","webpack:///./src/lib/dateFormat.js","webpack:///./node_modules/@mdx-js/tag/dist/index.js","webpack:///./node_modules/@mdx-js/tag/dist/mdx-tag.js","webpack:///./node_modules/hoist-non-react-statics/dist/hoist-non-react-statics.cjs.js","webpack:///./src/components/EndButtons.jsx","webpack:///./src/lib/twitter.js","webpack:///./src/components/Disqus.jsx","webpack:///./src/components/BlogPageLayout.jsx","webpack:///./.cache/gatsby-browser-entry.js","webpack:///./.cache/public-page-renderer.js","webpack:///./node_modules/@babel/runtime/helpers/extends.js","webpack:///./.cache/public-page-renderer-prod.js","webpack:///./node_modules/gatsby-image/index.js","webpack:///./src/components/Image.jsx","webpack:///./src/components/CaptionedImage.jsx"],"names":["__webpack_exports__","_ref","components","props","_babel_runtime_helpers_objectWithoutPropertiesLoose__WEBPACK_IMPORTED_MODULE_0___default","react__WEBPACK_IMPORTED_MODULE_1___default","a","createElement","_mdx_js_tag__WEBPACK_IMPORTED_MODULE_2__","name","Layout","DefaultLayout","layoutProps","parentName","href","className","metaString","_components_CaptionedImage__WEBPACK_IMPORTED_MODULE_4__","filename","alt","caption","_frontmatter","GlobalStyle","createGlobalStyle","_templateObject","bariol_eot","bariol_woff","bariol_ttf","bariol_svg","Div","styled","div","withConfig","displayName","componentId","UL","nav","ul","LI","li","P","p","A","_interopRequireDefault","__webpack_require__","exports","__esModule","withPrefix","navigateTo","replace","push","navigate","default","_objectWithoutPropertiesLoose2","_extends2","_inheritsLoose2","_assertThisInitialized2","_defineProperty2","_propTypes","_react","_router","_gatsby","path","normalizePath","NavLinkPropTypes","activeClassName","string","activeStyle","object","GatsbyLink","_React$Component","_this","call","this","isCurrent","filter","Boolean","join","style","IOSupported","window","IntersectionObserver","state","handleRef","bind","_proto","prototype","componentDidUpdate","prevProps","prevState","to","___loader","enqueue","parsePath","pathname","componentDidMount","ref","el","cb","io","_this2","innerRef","entries","forEach","entry","target","isIntersecting","intersectionRatio","unobserve","disconnect","observe","render","_this3","_this$props","_this$props$getProps","getProps","defaultGetProps","_onClick","onClick","_onMouseEnter","onMouseEnter","rest","prefixedTo","Link","e","hovering","button","defaultPrevented","metaKey","altKey","ctrlKey","shiftKey","preventDefault","Component","propTypes","func","isRequired","bool","_default","options","___navigate","console","warn","___push","___replace","d","blue","blueHighlight","Object","defineProperty","value","withMDXComponents","undefined","_extends","assign","i","arguments","length","source","key","hasOwnProperty","_react2","_createReactContext3","_propTypes2","obj","_createReactContext","Provider","Consumer","keys","indexOf","_objectWithoutProperties","contextComponents","MDXProvider","_ref2","children","element","module","excluded","sourceKeys","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","_components_default__WEBPACK_IMPORTED_MODULE_1__","_components_colors__WEBPACK_IMPORTED_MODULE_2__","styled_components__WEBPACK_IMPORTED_MODULE_3__","react_icons_io__WEBPACK_IMPORTED_MODULE_4__","react_icons_fa__WEBPACK_IMPORTED_MODULE_5__","StyledNav","Title","NavLinks","NavLink","StyledA","Nav","blog","aria-label","color","size","BlogPostContainer","darkened","css","TitleContainer","Heading","h1","DateContainer","BlogPostMeta","react_helmet__WEBPACK_IMPORTED_MODULE_3__","title","date","React","Container","MarkdownContent","elements","ReactDOM","findDOMNode","querySelectorAll","hljs","highlightBlock","formatDateString","dateString","Date","toLocaleDateString","year","month","day","_mdxTag","enumerable","get","_mdxProvider","_createClass","defineProperties","descriptor","configurable","writable","Constructor","protoProps","staticProps","_hoistNonReactStatics2","defaults","inlineCode","wrapper","MDXTag","_Component","instance","TypeError","_classCallCheck","self","ReferenceError","_possibleConstructorReturn","__proto__","getPrototypeOf","apply","subClass","superClass","create","constructor","setPrototypeOf","_inherits","_props","_props$props","childProps","_props$components","REACT_STATICS","childContextTypes","contextTypes","defaultProps","getDefaultProps","getDerivedStateFromProps","mixins","type","KNOWN_STATICS","caller","callee","arity","getOwnPropertyNames","getOwnPropertySymbols","getOwnPropertyDescriptor","objectPrototype","hoistNonReactStatics","targetComponent","sourceComponent","blacklist","inheritedComponent","concat","ButtonStyle","margin","Button","react_default","components_default","url","newTab","label","EndButtons","text","twitterUrl","tweetTitle","tweetUrl","encodeURIComponent","EndButtons_Button","fa","Wrapper","Disqus","id","s","document","src","setAttribute","head","body","appendChild","NonContent","BlogPageLayout","isDarkMode","matchMedia","matches","BlogPageLayout_Container","Helmet","rel","content","property","location","pageContext","frontmatter","staticPreview","BlogPost","EndButtons_EndButtons","Disqus_Disqus","ReactGA","initialize","pageview","search","r","graphql","StaticQueryContext","StaticQuery","prop_types__WEBPACK_IMPORTED_MODULE_1__","prop_types__WEBPACK_IMPORTED_MODULE_1___default","gatsby_link__WEBPACK_IMPORTED_MODULE_2__","gatsby_link__WEBPACK_IMPORTED_MODULE_2___default","_public_page_renderer__WEBPACK_IMPORTED_MODULE_3__","_public_page_renderer__WEBPACK_IMPORTED_MODULE_3___default","_parse_path__WEBPACK_IMPORTED_MODULE_4__","createContext","staticQueryData","data","query","Error","PropTypes","m","require","ProdPageRenderer","pageResources","loader","getResourcesForPathnameSync","InternalPageRenderer","_babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_0___default","json","shape","convertProps","convertedProps","resolutions","fixed","sizes","fluid","imageCache","inImageCache","listeners","listenToIntersections","l","rootMargin","noscriptImg","srcSetWebp","srcSet","width","height","opacity","transitionDelay","Img","forwardRef","onLoad","onError","otherProps","position","top","left","objectFit","objectPosition","Image","isVisible","imgLoaded","fadeIn","seenBefore","critical","hasNoScript","imageRef","createRef","handleImageLoaded","img","current","complete","setState","_convertProps","_convertProps$style","_convertProps$imgStyl","imgStyle","_convertProps$placeho","placeholderStyle","backgroundColor","Tag","bgColor","imagePlaceholderStyle","transition","imageStyle","image","overflow","JSON","stringify","paddingBottom","aspectRatio","base64","tracedSVG","bottom","right","dangerouslySetInnerHTML","__html","_image","divStyle","display","fixedObject","number","srcWebp","fluidObject","oneOfType","gatsby_browser_entry","images","edges","find","node","relativePath","childImageSharp","publicURL","imageSizes","gatsby_image_default","_2351125363","Wrap","max","Caption","CaptionedImage","components_Image"],"mappings":"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","file":"component---src-pages-blog-swift-dependency-injection-mdx-9a02648a5754192a6d3d.js","sourcesContent":["import React from 'react'\nimport { MDXTag } from '@mdx-js/tag'\n\n\nimport DefaultLayout from \"/Users/noahgilmore/code/noahgilmore.com/src/components/BlogPageLayout.jsx\"\nimport CaptionedImage from '../../components/CaptionedImage';\n\nexport default ({components, ...props}) => <MDXTag name=\"wrapper\" Layout={DefaultLayout} layoutProps={props} components={components}>\n\n\n<MDXTag name=\"p\" components={components}>{`At the most recent `}<MDXTag name=\"a\" components={components} parentName=\"p\" props={{\"href\":\"https://www.meetup.com/swift-language/\"}}>{`Swift Language User Group`}</MDXTag>{` meetup, `}<MDXTag name=\"a\" components={components} parentName=\"p\" props={{\"href\":\"https://twitter.com/patbarry\"}}>{`Patrick Barry`}</MDXTag>{` presented a `}<MDXTag name=\"a\" components={components} parentName=\"p\" props={{\"href\":\"https://www.youtube.com/watch?v=dA9rGQRwHGs\"}}>{`great talk`}</MDXTag>{` about how Lyft implements dependency injection. I'd highly recommend watching the video - I was impressed by how clean and functional the solution they came up with is. I was going to write up a summary for my coworkers, but figured I might as well put it here for the benefit of anyone who's interested.`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`This post describes the very simple approach to dependency injection presented in the talk, using new functions `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`bind`}</MDXTag>{` and `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`mock`}</MDXTag>{`. I'll paraphrase some code in this write up, but the concepts and function names will match the talk.`}</MDXTag>\n<MDXTag name=\"p\" components={components}><MDXTag name=\"em\" components={components} parentName=\"p\">{`Edit (4/30/2019): This post describes a nice Swift implementation of a pattern similar to the `}<MDXTag name=\"a\" components={components} parentName=\"em\" props={{\"href\":\"https://en.wikipedia.org/wiki/Service_locator_pattern\"}}>{`Service Locator Pattern`}</MDXTag>{`, considered by many to be a strong anti-pattern. Like Singletons, you should use Service Locator carefully - I've added a `}<MDXTag name=\"a\" components={components} parentName=\"em\" props={{\"href\":\"#downsides\"}}>{`section`}</MDXTag>{` at the end about drawbacks of this approach.`}</MDXTag></MDXTag>\n<MDXTag name=\"h2\" components={components}>{`Dependency Injection`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`I won't go into detail on what dependency injection is, since there's a fair amount of time in the talk dedicated to it. Instead, let's think about an example.`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`Say we're writing an app to display info about cats. We would have a `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`Cat`}</MDXTag>{` model in our app:`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-swift\",\"metaString\":\"\"}}>{`struct Cat: Codable {\n    let name: String\n    let image: URL\n}\n`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`And let's assume we have an API to fetch a cat by name:`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"metaString\":null}}>{`GET /cat?id=2\n{\n    \"name\": \"Maggie\",\n    \"image\": \"https://placekitten.com/200/200\"\n}\n`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`From an architectural point of view, we want to extract this into two different parts:`}</MDXTag>\n<MDXTag name=\"ol\" components={components}>\n<MDXTag name=\"li\" components={components} parentName=\"ol\">{`A `}<MDXTag name=\"inlineCode\" components={components} parentName=\"li\">{`NetworkService`}</MDXTag>{` which makes the requests`}</MDXTag>\n<MDXTag name=\"li\" components={components} parentName=\"ol\">{`A `}<MDXTag name=\"inlineCode\" components={components} parentName=\"li\">{`CatService`}</MDXTag>{` which exposes a `}<MDXTag name=\"inlineCode\" components={components} parentName=\"li\">{`getCat(id:)`}</MDXTag>{` method (this calls into the network service)`}</MDXTag>\n</MDXTag>\n<CaptionedImage filename=\"swift-di-1.png\" alt=\"Diagram of CatService calling NetworkService\" caption=\"\" />\n<MDXTag name=\"h2\" components={components}>{`Binding`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`There's a clear `}<MDXTag name=\"a\" components={components} parentName=\"p\" props={{\"href\":\"#seam\"}}>{`seam`}</MDXTag>{` between the `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`NetworkService`}</MDXTag>{` and `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`CatService`}</MDXTag>{` that we can use to test `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`CatService`}</MDXTag>{`. Let's extract the network's functionality into an interface:`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-swift\",\"metaString\":\"\"}}>{`protocol NetworkInterface {\n    func makeRequest(\n        url: URL,\n        completion: @escaping (Result<Data, Error>) -> Void\n    )\n}\n`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`And the concrete implementation:`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"metaString\":null}}>{`private class NetworkService: NetworkInterface {\n    func makeRequest(\n        url: URL,\n        completion: @escaping (Result<Data, Error>) -> Void\n    ) {\n        // Use URLSession, etc\n    }\n}\n`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`And now for the really interesting part - `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`NetworkService`}</MDXTag>{` will `}<MDXTag name=\"em\" components={components} parentName=\"p\">{`expose itself using a special function called bind`}</MDXTag>{` (I've added the \"SimpleDI\" namespace here):`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-swift\",\"metaString\":\"\"}}>{`let getNetwork = SimpleDI.bind(NetworkInterface.self) { NetworkService() }\n`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}><MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`bind`}</MDXTag>{` returns `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`getNetwork`}</MDXTag>{` as a function which can be called to get a concrete implementation of the `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`NetworkInterface`}</MDXTag>{` protocol. `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`CatService`}</MDXTag>{` can then call `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`getNetwork`}</MDXTag>{` to get access to the network:`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"metaString\":null}}>{`class CatService {\n    func getCat(id: Int, completion: @escaping (Result<Cat, Error>) -> Void) {\n        let network = getNetwork()\n        network.makeRequest(/* ... */)\n    }\n}\n`}</MDXTag></MDXTag>\n<CaptionedImage filename=\"swift-di-2.png\" alt=\"Diagram of CatService calling NetworkService, with bind as an intermediary\" caption=\"\" />\n<MDXTag name=\"h2\" components={components}>{`Implementation`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`Before we talk about why `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`bind`}</MDXTag>{` is useful, let's discuss the implementation. `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`bind`}</MDXTag>{` returns a function which takes no parameters and returns a type of `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`NetworkInterface`}</MDXTag>{`, but it also takes a closure which will be used to generate the concrete implementation.`}</MDXTag>\n<MDXTag name=\"p\" components={components}><MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`bind`}</MDXTag>{`'s body looks like this (again, paraphrased a bit from the talk):`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-swift\",\"metaString\":\"\"}}>{`private var instantiators: [String: Any] = [:]\n\nenum SimpleDI {\n    static func bind<T>(\n        _ interfaceType: T.Type,\n        instantiator: @escaping () -> T\n    ) -> () -> T {\n        instantiators[String(describing: interfaceType)] = instantiator\n        return self.instance\n    }\n\n    private static func instance<T>() -> T {\n        let key = String(describing: T.self)\n        let instantiator = instantiators[key] as! () -> T\n        return instantiator()\n    }\n}\n`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`We take the closure that we're passed and save it in a dictionary (`}<MDXTag name=\"a\" components={components} parentName=\"p\" props={{\"href\":\"#dictionary-atomic\"}}>{`see end note`}</MDXTag>{`), then return a function which accesses and calls the closure we provided. Though we have to do some force casting, we're guaranteed that the closure we need will be there when `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`getNetworkInterface`}</MDXTag>{` is called, since we put it into `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`instantiators`}</MDXTag>{` before returning from `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`bind`}</MDXTag>{`.`}</MDXTag>\n<MDXTag name=\"h2\" components={components}>{`Testability`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`Using `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`bind`}</MDXTag>{` adds a level of indirection at the seam between `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`NetworkService`}</MDXTag>{` and `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`CatService`}</MDXTag>{`, which allows us to stub in a mock in tests. In order to do that, we need to define `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`mock`}</MDXTag>{` as well, and add a bit of more infrastructure:`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-swift\",\"metaString\":\"\"}}>{`private var instantiators: [String: Any] = [:]\nprivate var mockInstantiators: [String: Any] = [:]\n\nenum SimpleDI {\n    static var isTestEnvironment = false\n\n    static func bind<T>(\n        _ type: T.Type,\n        instantiator: @escaping () -> T\n    ) -> () -> T {\n        instantiators[String(describing: type)] = instantiator\n        return self.instance\n    }\n\n    private static func instance<T>() -> T {\n        let key = String(describing: T.self)\n        if self.isTestEnvironment {\n            guard let instantiator = mockInstantiators[key] as? () -> T else {\n                fatalError(\"Type \\\\(key) unmocked in test!\")\n            }\n            return instantiator()\n        }\n        let instantiator = instantiators[key] as! () -> T\n        return instantiator()\n    }\n\n    static func mock<T>(_ type: T.Type, instantiator: @escaping () -> T) {\n        mockInstantiators[String(describing: type)] = instantiator\n    }\n}\n`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`This code isn't very pretty - in fact, checks like `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`isTestEnvironment`}</MDXTag>{` are generally a code smell that mean you should refactor how the class works to avoid the check. However, this enables us to write tests very easily: all we have to do is set `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`isTestEnvironment = true`}</MDXTag>{`, and we'll be able to `}<MDXTag name=\"a\" components={components} parentName=\"p\" props={{\"href\":\"#mock\"}}>{`stub in a mock`}</MDXTag>{` immediately using `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`mock`}</MDXTag>{`.`}</MDXTag>\n<MDXTag name=\"h2\" components={components}>{`Example`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`Let's say we want to write a test which makes sure CatService reports an error when the underlying network errors:`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"metaString\":null}}>{`class NetworkThatAlwaysErrors: NetworkInterface {\n    func makeRequest(url: URL, completion: @escaping (Result<Data>) -> Void) {\n        completion(.error(error: NSError(domain: \"\", code: 0, userInfo: nil)))\n    }\n}\n\nclass CatServiceTestCase: XCTestCase {\n    func testCatServiceReportsError() {\n        SimpleDI.isTestEnvironment = true\n        SimpleDI.mock(NetworkInterface.self) { NetworkThatAlwaysErrors() }\n\n        let expecation = self.expectation(description: \"Should return error\")\n        let service = CatService()\n        service.getCatImage(named: \"Maggie\", completion: { result in\n            if case .error = result {\n                expecation.fulfill()\n            }\n        })\n        self.waitForExpectations(timeout: 0.2)\n    }\n}\n`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}><MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`bind`}</MDXTag>{` and `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`mock`}</MDXTag>{` take the dirty work of setting up the DI/mocking infrastructure and hide it under the rug, allowing us to write more expressive tests easily.`}</MDXTag>\n<CaptionedImage filename=\"swift-di-3.png\" alt=\"Diagram of bind and mock being used to separate CatService and NetworkService and stub in a mock in tests\" caption=\"\" />\n<MDXTag name=\"p\" components={components}>{`Some interesting things to note:`}</MDXTag>\n<MDXTag name=\"ol\" components={components}>\n<MDXTag name=\"li\" components={components} parentName=\"ol\">{`Many people who've worked with DI have horror stories of passing 10/15+ dependencies into an initializer so they can be mocked in tests. `}<MDXTag name=\"inlineCode\" components={components} parentName=\"li\">{`bind`}</MDXTag>{` brings the argument count down to 0 without sacrificing testability, and makes both the service and the test more elegant.`}</MDXTag>\n<MDXTag name=\"li\" components={components} parentName=\"ol\"><MDXTag name=\"inlineCode\" components={components} parentName=\"li\">{`bind`}</MDXTag>{` will error if you forget to mock out an interface in a test, so you're never accidentally calling deeper into dependencies than you mean to.`}</MDXTag>\n</MDXTag>\n<MDXTag name=\"p\" components={components}><a name=\"downsides\">\n</a>\n\n</MDXTag>\n<MDXTag name=\"h2\" components={components}>{`Downsides`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`This approach is very similar to the `}<MDXTag name=\"a\" components={components} parentName=\"p\" props={{\"href\":\"https://en.wikipedia.org/wiki/Service_locator_pattern\"}}>{`Service Locator Pattern`}</MDXTag>{`, which is commonly criticized. I really enjoyed `}<MDXTag name=\"a\" components={components} parentName=\"p\" props={{\"href\":\"https://badootech.badoo.com/singleton-service-locator-and-tests-in-ios-d69484e88944\"}}>{`this article`}</MDXTag>{` about Service Locator in iOS, and there are a few downsides that I should mention:`}</MDXTag>\n<MDXTag name=\"ol\" components={components}>\n<MDXTag name=\"li\" components={components} parentName=\"ol\">{`Using a service locator registry like `}<MDXTag name=\"inlineCode\" components={components} parentName=\"li\">{`bind`}</MDXTag>{` means you have implicit instead of explicit dependencies. Instead of knowing explicitly that `}<MDXTag name=\"inlineCode\" components={components} parentName=\"li\">{`CatService`}</MDXTag>{` depends on `}<MDXTag name=\"inlineCode\" components={components} parentName=\"li\">{`NetworkService`}</MDXTag>{`, you have to look for the call to `}<MDXTag name=\"inlineCode\" components={components} parentName=\"li\">{`getNetwork`}</MDXTag>{`. There's a tradeoff between the simplicity of using a service locator and the fact that it can make services with many dependencies more complex to reason about.`}</MDXTag>\n<MDXTag name=\"li\" components={components} parentName=\"ol\">{`With `}<MDXTag name=\"inlineCode\" components={components} parentName=\"li\">{`bind`}</MDXTag>{`, it can be tough to recognize that you can update a test when a dependency of a service is removed. If `}<MDXTag name=\"inlineCode\" components={components} parentName=\"li\">{`CatService`}</MDXTag>{` stopped calling out to the network, it's wouldn't be immediately apparent that `}<MDXTag name=\"inlineCode\" components={components} parentName=\"li\">{`NetworkThatAlwaysErrors`}</MDXTag>{` could be deleted. This can lead to unnessary cognitive overhead in tests.`}</MDXTag>\n<MDXTag name=\"li\" components={components} parentName=\"ol\">{`When calling `}<MDXTag name=\"inlineCode\" components={components} parentName=\"li\">{`mock`}</MDXTag>{`, you have to be `}<MDXTag name=\"em\" components={components} parentName=\"li\">{`very`}</MDXTag>{` careful to set up your testing framework such that all the mocks get cleared after every test. Otherwise, you might have different behavior based on the order the tests are run, which can lead to flakes.`}</MDXTag>\n</MDXTag>\n<MDXTag name=\"h2\" components={components}>{`Conclusion`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`It was really interesting to see how Lyft was able to come up with such a simple solution to a complex problem. I'd really recommend watching `}<MDXTag name=\"a\" components={components} parentName=\"p\" props={{\"href\":\"https://www.youtube.com/watch?v=dA9rGQRwHGs\"}}>{`the talk`}</MDXTag>{` if you're interested in dependency injection and testing. If you'd like to see a working example of `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`bind`}</MDXTag>{` and `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`mock`}</MDXTag>{`, I've put one `}<MDXTag name=\"a\" components={components} parentName=\"p\" props={{\"href\":\"https://github.com/noahsark769/NGSimpleDIExample\"}}>{`here`}</MDXTag>{` (it has a few differences from the code in this post in order to demonstrate an actual working request and test).`}</MDXTag>\n<MDXTag name=\"h2\" components={components}>{`Footnotes`}</MDXTag>\n<MDXTag name=\"ol\" components={components}>\n<MDXTag name=\"li\" components={components} parentName=\"ol\"><a name=\"dictionary-atomic\">\n</a>\n\n{`Dictionary is not thread safe, so if you want to use `}<MDXTag name=\"inlineCode\" components={components} parentName=\"li\">{`bind`}</MDXTag>{` and `}<MDXTag name=\"inlineCode\" components={components} parentName=\"li\">{`mock`}</MDXTag>{` on multiple threads you'll need to implement something similar to an `}<MDXTag name=\"a\" components={components} parentName=\"li\" props={{\"href\":\"https://www.objc.io/blog/2018/12/18/atomic-variables/\"}}>{`atomic box`}</MDXTag>{` (the talk mentions this).`}</MDXTag>\n<MDXTag name=\"li\" components={components} parentName=\"ol\"><a name=\"seam\">\n</a>\n\n{`\"`}<MDXTag name=\"a\" components={components} parentName=\"li\" props={{\"href\":\"http://wiki.c2.com/?SoftwareSeam\"}}>{`Seam`}</MDXTag>{`\" is a concept that seems to have been first coined in `}<MDXTag name=\"a\" components={components} parentName=\"li\" props={{\"href\":\"https://www.amazon.com/Working-Effectively-Legacy-Michael-Feathers/dp/0131177052\"}}>{`Working Effectively With Legacy Code`}</MDXTag>{`. It's defined as \"`}<MDXTag name=\"a\" components={components} parentName=\"li\" props={{\"href\":\"https://softwareengineering.stackexchange.com/questions/132563/problem-with-understanding-seam-word/311122\"}}>{`a place where two parts of the software meet and where something else can be injected`}</MDXTag>{`\".`}</MDXTag>\n<MDXTag name=\"li\" components={components} parentName=\"ol\"><a name=\"mock\">\n</a>\n\n{`You could even put `}<MDXTag name=\"inlineCode\" components={components} parentName=\"li\">{`mock`}</MDXTag>{` in your test target to make sure it can't be called in production!`}</MDXTag>\n</MDXTag></MDXTag>\n\nexport const _frontmatter = {};\n\n  ","import styled from \"styled-components\";\nimport { createGlobalStyle } from 'styled-components'\nimport bariol_eot from '../fonts/Bariol-Regular.eot';\nimport bariol_woff from '../fonts/Bariol-Regular.woff';\nimport bariol_ttf from '../fonts/Bariol-Regular.ttf';\nimport bariol_svg from '../fonts/Bariol-Regular.svg';\n\nexport const GlobalStyle = createGlobalStyle`\n    @font-face {\n        font-family: 'Bariol';\n        src: url('${bariol_eot}');\n        src: url('${bariol_eot}?#iefix') format('embedded-opentype'),\n             url('${bariol_woff}') format('woff'),\n             url('${bariol_ttf}') format('truetype'),\n             url('${bariol_svg}#svgBariolRegular') format('svg');\n    }\n\n    * {\n        box-sizing: border-box !important;\n    }\n\n    body {\n        margin: 0;\n        padding: 0;\n    }\n`;\n\nexport const Div = styled.div``;\nexport const Nav = styled.nav``;\nexport const UL = styled.ul`\n    margin: 0;\n    padding: 0;\n`;\nexport const LI = styled.li`\n    margin: 0;\n    padding: 0;\n`;\nexport const P = styled.p`\n    margin: 0;\n    padding: 0;\n`;\n\nexport const A = styled.a`\n    &, &:hover, &:focus {\n        outline: none;\n        color: inherit;\n        text-decoration: none;\n    }\n`;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.withPrefix = withPrefix;\nexports.navigateTo = exports.replace = exports.push = exports.navigate = exports.default = void 0;\n\nvar _objectWithoutPropertiesLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutPropertiesLoose\"));\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _router = require(\"@reach/router\");\n\nvar _gatsby = require(\"gatsby\");\n\n/*global __PATH_PREFIX__ */\nfunction withPrefix(path) {\n  return normalizePath(__PATH_PREFIX__ + \"/\" + path);\n}\n\nfunction normalizePath(path) {\n  return path.replace(/\\/+/g, \"/\");\n}\n\nvar NavLinkPropTypes = {\n  activeClassName: _propTypes.default.string,\n  activeStyle: _propTypes.default.object // Set up IntersectionObserver\n\n};\n\nvar handleIntersection = function handleIntersection(el, cb) {\n  var io = new window.IntersectionObserver(function (entries) {\n    entries.forEach(function (entry) {\n      if (el === entry.target) {\n        // Check if element is within viewport, remove listener, destroy observer, and run link callback.\n        // MSEdge doesn't currently support isIntersecting, so also test for  an intersectionRatio > 0\n        if (entry.isIntersecting || entry.intersectionRatio > 0) {\n          io.unobserve(el);\n          io.disconnect();\n          cb();\n        }\n      }\n    });\n  }); // Add element to the observer\n\n  io.observe(el);\n};\n\nvar GatsbyLink =\n/*#__PURE__*/\nfunction (_React$Component) {\n  (0, _inheritsLoose2.default)(GatsbyLink, _React$Component);\n\n  function GatsbyLink(props) {\n    var _this;\n\n    _this = _React$Component.call(this) || this; // Default to no support for IntersectionObserver\n\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)((0, _assertThisInitialized2.default)(_this)), \"defaultGetProps\", function (_ref) {\n      var isCurrent = _ref.isCurrent;\n\n      if (isCurrent) {\n        return {\n          className: [_this.props.className, _this.props.activeClassName].filter(Boolean).join(\" \"),\n          style: (0, _extends2.default)({}, _this.props.style, _this.props.activeStyle)\n        };\n      }\n\n      return null;\n    });\n    var IOSupported = false;\n\n    if (typeof window !== \"undefined\" && window.IntersectionObserver) {\n      IOSupported = true;\n    }\n\n    _this.state = {\n      IOSupported: IOSupported\n    };\n    _this.handleRef = _this.handleRef.bind((0, _assertThisInitialized2.default)((0, _assertThisInitialized2.default)(_this)));\n    return _this;\n  }\n\n  var _proto = GatsbyLink.prototype;\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps, prevState) {\n    // Preserve non IO functionality if no support\n    if (this.props.to !== prevProps.to && !this.state.IOSupported) {\n      ___loader.enqueue((0, _gatsby.parsePath)(this.props.to).pathname);\n    }\n  };\n\n  _proto.componentDidMount = function componentDidMount() {\n    // Preserve non IO functionality if no support\n    if (!this.state.IOSupported) {\n      ___loader.enqueue((0, _gatsby.parsePath)(this.props.to).pathname);\n    }\n  };\n\n  _proto.handleRef = function handleRef(ref) {\n    var _this2 = this;\n\n    this.props.innerRef && this.props.innerRef(ref);\n\n    if (this.state.IOSupported && ref) {\n      // If IO supported and element reference found, setup Observer functionality\n      handleIntersection(ref, function () {\n        ___loader.enqueue((0, _gatsby.parsePath)(_this2.props.to).pathname);\n      });\n    }\n  };\n\n  _proto.render = function render() {\n    var _this3 = this;\n\n    var _this$props = this.props,\n        to = _this$props.to,\n        _this$props$getProps = _this$props.getProps,\n        getProps = _this$props$getProps === void 0 ? this.defaultGetProps : _this$props$getProps,\n        _onClick = _this$props.onClick,\n        _onMouseEnter = _this$props.onMouseEnter,\n        $activeClassName = _this$props.activeClassName,\n        $activeStyle = _this$props.activeStyle,\n        $ref = _this$props.ref,\n        $innerRef = _this$props.innerRef,\n        state = _this$props.state,\n        replace = _this$props.replace,\n        rest = (0, _objectWithoutPropertiesLoose2.default)(_this$props, [\"to\", \"getProps\", \"onClick\", \"onMouseEnter\", \"activeClassName\", \"activeStyle\", \"ref\", \"innerRef\", \"state\", \"replace\"]);\n    var prefixedTo = withPrefix(to);\n    return _react.default.createElement(_router.Link, (0, _extends2.default)({\n      to: prefixedTo,\n      state: state,\n      getProps: getProps,\n      innerRef: this.handleRef,\n      onMouseEnter: function onMouseEnter(e) {\n        // eslint-disable-line\n        _onMouseEnter && _onMouseEnter(e);\n\n        ___loader.hovering((0, _gatsby.parsePath)(to).pathname);\n      },\n      onClick: function onClick(e) {\n        // eslint-disable-line\n        _onClick && _onClick(e);\n\n        if (e.button === 0 && // ignore right clicks\n        !_this3.props.target && // let browser handle \"target=_blank\"\n        !e.defaultPrevented && // onClick prevented default\n        !e.metaKey && // ignore clicks with modifier keys...\n        !e.altKey && !e.ctrlKey && !e.shiftKey) {\n          e.preventDefault(); // Make sure the necessary scripts and data are\n          // loaded before continuing.\n\n          navigate(to, {\n            state: state,\n            replace: replace\n          });\n        }\n\n        return true;\n      }\n    }, rest));\n  };\n\n  return GatsbyLink;\n}(_react.default.Component);\n\nGatsbyLink.propTypes = (0, _extends2.default)({}, NavLinkPropTypes, {\n  innerRef: _propTypes.default.func,\n  onClick: _propTypes.default.func,\n  to: _propTypes.default.string.isRequired,\n  replace: _propTypes.default.bool\n});\nvar _default = GatsbyLink;\nexports.default = _default;\n\nvar navigate = function navigate(to, options) {\n  window.___navigate(withPrefix(to), options);\n};\n\nexports.navigate = navigate;\n\nvar push = function push(to) {\n  console.warn(\"The \\\"push\\\" method is now deprecated and will be removed in Gatsby v3. Please use \\\"navigate\\\" instead.\");\n\n  window.___push(withPrefix(to));\n};\n\nexports.push = push;\n\nvar replace = function replace(to) {\n  console.warn(\"The \\\"replace\\\" method is now deprecated and will be removed in Gatsby v3. Please use \\\"navigate\\\" instead.\");\n\n  window.___replace(withPrefix(to));\n}; // TODO: Remove navigateTo for Gatsby v3\n\n\nexports.replace = replace;\n\nvar navigateTo = function navigateTo(to) {\n  console.warn(\"The \\\"navigateTo\\\" method is now deprecated and will be removed in Gatsby v3. Please use \\\"navigate\\\" instead.\");\n  return push(to);\n};\n\nexports.navigateTo = navigateTo;","export const blue = 'rgba(128, 165, 177, 1)';\nexport const blueHighlight = 'rgba(151, 195, 210, 1)';","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.withMDXComponents = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _createReactContext2 = require('create-react-context');\n\nvar _createReactContext3 = _interopRequireDefault(_createReactContext2);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nvar _createReactContext = (0, _createReactContext3.default)({}),\n    Provider = _createReactContext.Provider,\n    Consumer = _createReactContext.Consumer;\n\nvar withMDXComponents = function withMDXComponents(Component) {\n  return function (_ref) {\n    var components = _ref.components,\n        props = _objectWithoutProperties(_ref, ['components']);\n\n    return _react2.default.createElement(\n      Consumer,\n      null,\n      function (contextComponents) {\n        return _react2.default.createElement(Component, _extends({ components: components || contextComponents }, props));\n      }\n    );\n  };\n};\n\nexports.withMDXComponents = withMDXComponents;\nvar MDXProvider = function MDXProvider(_ref2) {\n  var components = _ref2.components,\n      children = _ref2.children;\n  return _react2.default.createElement(\n    Provider,\n    { value: components },\n    children\n  );\n};\n\nMDXProvider.propTypes = {\n  components: _propTypes2.default.object.isRequired,\n  children: _propTypes2.default.element.isRequired\n};\n\nexports.default = MDXProvider;","function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutPropertiesLoose;","module.exports = __webpack_public_path__ + \"static/Bariol-Regular-b0d07df351f442860551405a4be58de7.eot\";","module.exports = __webpack_public_path__ + \"static/Bariol-Regular-4afd94f0fd93a1f63b46c6c6ad792f71.woff\";","module.exports = __webpack_public_path__ + \"static/Bariol-Regular-8a7d23d53f8d118e190c63e4e81a91fe.ttf\";","module.exports = __webpack_public_path__ + \"static/Bariol-Regular-75b90056f4cdf5a742897ec0a59569d7.svg\";","import React from 'react';\nimport { A, UL, LI } from '../components/default';\nimport { blue, blueHighlight } from '../components/colors';\nimport styled from \"styled-components\";\nimport { IoIosHome, IoIosAppstore } from \"react-icons/io\";\nimport { FaTwitter } from \"react-icons/fa\";\n\nconst StyledNav = styled.nav`\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    padding: 20px 60px;\n    border-bottom: 1px solid #ddd;\n\n    @media all and (max-width: 600px) {\n        padding: 20px;\n    }\n\n    @media (prefers-color-scheme: dark) {\n        border-color: #777;\n    }\n`;\n\nconst Title = styled.div`\n    flex: 2;\n    font-family: \"Roboto\", \"Helvetica Neue\", \"Helvetica\", sans-serif;\n    font-size: 28px;\n    font-display: swap;\n\n    @media (prefers-color-scheme: dark) {\n        color: #fff;\n    }\n`;\n\nconst NavLinks = styled(UL)`\n    flex: 10;\n    display: flex;\n    flex-direction: horizontal;\n    flex-wrap: wrap;\n    justify-content: flex-end;\n    height: 100%;\n    align-self: center;\n`;\n\nconst NavLink = styled(LI)`\n    display: flex;\n    flex-direction: vertical;\n    align-items: center;\n    text-align: center;\n    font-family: \"Bariol\", \"Helvetica Neue\", \"Helvetica\", sans-serif;\n    font-size: 16px;\n    padding: 0px 20px;\n`;\n\nconst StyledA = styled(A)`\n    height: auto;\n    color: ${blue};\n    display: flex;\n    flex-direction: vertical;\n    align-items: center;\n\n    -webkit-transition: 0.2s ease-in-out;\n    -moz-transition: 0.2s ease-in-out;\n    -o-transition: 0.2s ease-in-out;\n    transition: 0.2s ease-in-out;\n\n    &:hover {\n        color: ${blueHighlight};\n    }\n`;\n\nconst Nav = (props) => {\n    return (\n        <StyledNav>\n            <Title><StyledA href={props.blog ? '/blog' : '/'}>NOAH GILMORE</StyledA></Title>\n            <NavLinks>\n                <NavLink><StyledA aria-label=\"Blog Home\" href=\"/blog\"><IoIosHome color={blue} size=\"24\" /></StyledA></NavLink>\n                <NavLink><StyledA aria-label=\"Twitter\" href=\"https://twitter.com/noahsark769\"><FaTwitter color={blue} size=\"24\" /></StyledA></NavLink>\n                <NavLink><StyledA aria-label=\"App Store\" href=\"https://appstore.com/trestle\"><IoIosAppstore color={blue} size=\"24\" /></StyledA></NavLink>\n            </NavLinks>\n        </StyledNav>\n    );\n};\n\nexport default Nav;","import React from 'react';\nimport styled, { css } from \"styled-components\";\nimport { Helmet } from \"react-helmet\";\n\nexport const BlogPostContainer = styled.div`\n    padding: 60px 0;\n    margin: 0 auto;\n    width: 90%;\n    @media all and (min-width: 600px) {\n        max-width: 700px;\n        margin: auto;\n    }\n\n    @media all and (max-width: 600px) {\n        width: 100%;\n        padding: 20px 0;\n        ${(props) => props.darkened && css`\n            background-color: #f6f6f6;\n            @media (prefers-color-scheme: dark) {\n                background-color: inherit;\n            }\n        `}\n    }\n`;\n\nconst TitleContainer = styled.div`\n    width: 100%;\n    margin-bottom: 40px;\n`;\n\nconst Heading = styled.h1`\n    width: 100%;\n    font-family: \"Roboto\", \"Helvetica Neue\", \"Helvetica\", sans-serif;\n    font-size: 34px;\n    margin-bottom: 10px;\n\n    @media (prefers-color-scheme: dark) {\n        color: #fff;\n    }\n`;\n\nconst DateContainer = styled.p`\n    font-family: \"Gentium Book Basic\", times, serif;\n    font-style: italic;\n    font-size: 16px;\n    color: #999;\n`;\n\nexport const BlogPostMeta = (props) => {\n    return (\n        <div>\n            <Helmet>\n                <title>{props.title}</title>\n            </Helmet>\n            <TitleContainer>\n                <Heading>{props.title}</Heading>\n                <DateContainer>{props.date}</DateContainer>\n            </TitleContainer>\n        </div>\n    );\n};\n\nexport default class BlogPost extends React.Component {\n    render() {\n        return (\n            <BlogPostContainer>\n                <div>\n                    {this.props.children}\n                </div>\n            </BlogPostContainer>\n        );\n    }\n};\n","import React from 'react';\nimport ReactDOM from \"react-dom\";\nimport styled from \"styled-components\";\n\nconst Container = styled.div`\n    p, li {\n        margin: 0;\n        padding: 0;\n        font-family: \"Gentium Book Basic\", times, serif;\n        font-size: 21px;\n        line-height: 29px;\n        color: #333;\n        padding-bottom: 15px;\n        margin-top: 15px;\n        @media all and (max-width: 600px) {\n            width: 90%;\n            margin: 15px auto 0 auto;\n        }\n\n        @media (prefers-color-scheme: dark) {\n            color: #fff;\n        }\n    }\n\n    blockquote {\n        background-color: #faf9f7;\n        border-left: 4px solid #e5e4e1;\n        padding: 20px;\n        font-style: italic;\n\n        @media (prefers-color-scheme: dark) {\n            background-color: #3f3f3f;\n        }\n\n        p {\n            margin: 0;\n            padding: 0;\n            color: #555;\n\n            @media (prefers-color-scheme: dark) {\n                color: #fff;\n            }\n        }\n    }\n\n    a {\n        color: #1A3F4B;\n        -webkit-transition: 0.2s ease-in-out;\n        -moz-transition: 0.2s ease-in-out;\n        -o-transition: 0.2s ease-in-out;\n        transition: 0.2s ease-in-out;\n\n        @media (prefers-color-scheme: dark) {\n            color: #60b5d1;\n        }\n    }\n    a:hover {\n        color: #47656E;\n\n        @media (prefers-color-scheme: dark) {\n            color: #6bcfef;\n        }\n    }\n    code {\n        font-family: monospace;\n        font-size: 16px;\n        background-color: #faf9f7;\n        border: 1px solid #e5e4e1;\n        padding: 3px 5px;\n        margin: 0px 2px;\n        color: #555;\n\n        @media (prefers-color-scheme: dark) {\n            color: #fff;\n            background-color: #3f3f3f;\n        }\n    }\n    code:not(pre code) {\n        font-family: monospace;\n        font-size: 16px;\n        background-color: #faf9f7;\n        border: 1px solid #e5e4e1;\n        padding: 3px 5px;\n        margin: 0px 2px;\n        color: #555;\n\n        @media (prefers-color-scheme: dark) {\n            color: #fff;\n            background-color: #3f3f3f;\n        }\n    }\n    code:first-child {\n        margin-left: 0;\n    }\n    pre {\n        display: block;\n        margin: 0;\n        padding: 0;\n        background: none;\n        @media all and (max-width: 600px) {\n            width: 100%;\n            margin: 0 auto;\n        }\n    }\n    pre > code {\n        display: block;\n        margin: 0;\n        padding: 0;\n        border: 1px solid #e5e4e1;\n        border-radius: 2px;\n        padding: 10px;\n        margin-top: 10px;\n        font-family: monospace;\n        font-size: 14px;\n        line-height: 17px;\n        white-space: pre-wrap;\n\n        @media all and (max-width: 600px) {\n            font-size: 15px;\n            white-space: pre;\n            border-left: none;\n            border-right: none;\n            padding: 15px 5% 15px 5%;\n            width: 100%;\n        }\n    }\n\n    pre > code.language-nohighlight {\n        @media (prefers-color-scheme: dark) {\n            color: #fff;\n            background-color: #3f3f3f;\n        }\n    }\n\n    pre + p {\n        margin-top: 30px;\n    }\n    ol {\n        margin-left: 30px;\n        @media all and (max-width: 600px) {\n            width: 90%;\n            margin: 0 auto 0 30px;\n        }\n\n        @media (prefers-color-scheme: dark) {\n            color: #fff;\n        }\n    }\n    ol li {\n        list-style-type: decimal;\n    }\n    ul li {\n        list-style-type: square;\n        margin-left: 40px;\n        @media all and (max-width: 600px) {\n            width: 90%;\n            margin: 0 auto;\n        }\n\n        @media (prefers-color-scheme: dark) {\n            color: #fff;\n        }\n    }\n    h1, h2, h3, h4, h5, h6 {\n        width: 100%;\n        font-family: \"Roboto\", \"Helvetica Neue\", \"Helvetica\", sans-serif;\n        margin-bottom: 10px;   \n        margin-top: 40px;\n        @media all and (max-width: 600px) {\n            width: 90%;\n            margin: 40px auto 10px auto;\n        }\n\n        @media (prefers-color-scheme: dark) {\n            color: #fff;\n        }\n    }\n    h1 {\n        font-size: 28px;\n    }\n    h2 {\n        font-size: 24px;\n    }\n    h3 {\n        font-size: 20px;\n    }\n\n    em {\n        font-style: italic;\n    }\n\n    strong {\n        font-weight: bold;\n    }\n`;\n\nexport default class MarkdownContent extends React.Component {\n    render() {\n        return (\n            <Container>\n                {this.props.children}\n            </Container>\n        );\n    }\n\n    componentDidMount() {\n        const node = ReactDOM.findDOMNode(this);\n        var elements = node.querySelectorAll(\"pre code\");\n        // this next line has to be stuck in the 90's\n        // https://css-tricks.com/snippets/javascript/loop-queryselectorall-matches/\n        for (var i = 0; i < elements.length; i++) {\n            // I would love to import the node version of hljs here, but it turns out\n            // this doesn't work due to something in gatsby-mdx's rendering. Oh well,\n            // we just import it in html.js and use the window version here.\n            window.hljs && window.hljs.highlightBlock(elements[i]);\n        }\n    }\n}","export function formatDateString(dateString) {\n    const date = new Date(dateString);\n    return date.toLocaleDateString(\"en-US\", {year: 'numeric', month: 'long', day: 'numeric'});\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _mdxTag = require('./mdx-tag');\n\nObject.defineProperty(exports, 'MDXTag', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_mdxTag).default;\n  }\n});\n\nvar _mdxProvider = require('./mdx-provider');\n\nObject.defineProperty(exports, 'MDXProvider', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_mdxProvider).default;\n  }\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _hoistNonReactStatics = require('hoist-non-react-statics');\n\nvar _hoistNonReactStatics2 = _interopRequireDefault(_hoistNonReactStatics);\n\nvar _mdxProvider = require('./mdx-provider');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar defaults = {\n  inlineCode: 'code',\n  wrapper: 'div'\n};\n\nvar MDXTag = function (_Component) {\n  _inherits(MDXTag, _Component);\n\n  function MDXTag() {\n    _classCallCheck(this, MDXTag);\n\n    return _possibleConstructorReturn(this, (MDXTag.__proto__ || Object.getPrototypeOf(MDXTag)).apply(this, arguments));\n  }\n\n  _createClass(MDXTag, [{\n    key: 'render',\n    value: function render() {\n      var _props = this.props,\n          name = _props.name,\n          parentName = _props.parentName,\n          _props$props = _props.props,\n          childProps = _props$props === undefined ? {} : _props$props,\n          children = _props.children,\n          _props$components = _props.components,\n          components = _props$components === undefined ? {} : _props$components,\n          Layout = _props.Layout,\n          layoutProps = _props.layoutProps;\n\n\n      var Component = components[parentName + '.' + name] || components[name] || defaults[name] || name;\n\n      if (Layout) {\n        (0, _hoistNonReactStatics2.default)(this, Layout);\n\n        return _react2.default.createElement(\n          Layout,\n          _extends({ components: components }, layoutProps),\n          _react2.default.createElement(\n            Component,\n            childProps,\n            children\n          )\n        );\n      }\n\n      return _react2.default.createElement(\n        Component,\n        childProps,\n        children\n      );\n    }\n  }]);\n\n  return MDXTag;\n}(_react.Component);\n\nexports.default = (0, _mdxProvider.withMDXComponents)(MDXTag);","'use strict';\n\n/**\n * Copyright 2015, Yahoo! Inc.\n * Copyrights licensed under the New BSD License. See the accompanying LICENSE file for terms.\n */\nvar REACT_STATICS = {\n    childContextTypes: true,\n    contextTypes: true,\n    defaultProps: true,\n    displayName: true,\n    getDefaultProps: true,\n    getDerivedStateFromProps: true,\n    mixins: true,\n    propTypes: true,\n    type: true\n};\n\nvar KNOWN_STATICS = {\n    name: true,\n    length: true,\n    prototype: true,\n    caller: true,\n    callee: true,\n    arguments: true,\n    arity: true\n};\n\nvar defineProperty = Object.defineProperty;\nvar getOwnPropertyNames = Object.getOwnPropertyNames;\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nvar getPrototypeOf = Object.getPrototypeOf;\nvar objectPrototype = getPrototypeOf && getPrototypeOf(Object);\n\nfunction hoistNonReactStatics(targetComponent, sourceComponent, blacklist) {\n    if (typeof sourceComponent !== 'string') { // don't hoist over string (html) components\n\n        if (objectPrototype) {\n            var inheritedComponent = getPrototypeOf(sourceComponent);\n            if (inheritedComponent && inheritedComponent !== objectPrototype) {\n                hoistNonReactStatics(targetComponent, inheritedComponent, blacklist);\n            }\n        }\n\n        var keys = getOwnPropertyNames(sourceComponent);\n\n        if (getOwnPropertySymbols) {\n            keys = keys.concat(getOwnPropertySymbols(sourceComponent));\n        }\n\n        for (var i = 0; i < keys.length; ++i) {\n            var key = keys[i];\n            if (!REACT_STATICS[key] && !KNOWN_STATICS[key] && (!blacklist || !blacklist[key])) {\n                var descriptor = getOwnPropertyDescriptor(sourceComponent, key);\n                try { // Avoid failures from read-only properties\n                    defineProperty(targetComponent, key, descriptor);\n                } catch (e) {}\n            }\n        }\n\n        return targetComponent;\n    }\n\n    return targetComponent;\n}\n\nmodule.exports = hoistNonReactStatics;\n","import React from 'react';\nimport { A } from '../components/default';\nimport styled, { css } from \"styled-components\";\nimport { IoIosHome } from \"react-icons/io\";\nimport { FaTwitter } from \"react-icons/fa\";\nimport { blue, blueHighlight } from '../components/colors';\nimport { formatTweetIntentUrl } from '../lib/twitter';\n\nconst Container = styled.div`\n    width: 100%;\n    display: flex;\n    flex-direction: horizontal;\n    align-items: center;\n    justify-content: center;\n    margin-top: 40px;\n`;\n\nconst ButtonStyle = styled.div`\n    background-color: ${blue};\n    -webkit-transition: 0.2s ease-in-out;\n    -moz-transition: 0.2s ease-in-out;\n    -o-transition: 0.2s ease-in-out;\n    transition: 0.2s ease-in-out;\n\n    &:hover {\n        background-color: ${blueHighlight};\n    }\n\n    width: 100px;\n    padding: 10px 20px;\n    text-align: center;\n    display: flex;\n    flex-direction: vertical;\n    align-items: center;\n    justify-content: center;\n    border-radius: 4px;\n    ${(props) => props.margin && css`\n        margin-right: 20px;\n    `};\n`;\nconst Button = (props) => {\n    return (\n        <A href={props.url} target={props.newTab ? '_blank' : null} aria-label={props.label}><ButtonStyle margin={props.margin}>{props.children}</ButtonStyle></A>\n    );\n};\n\nexport default class EndButtons extends React.Component {\n    render() {\n        const twitterUrl = formatTweetIntentUrl(`Post by @noahsark769: ${this.props.tweetTitle} ${this.props.tweetUrl}`);\n        return (\n            <Container>\n                <Button label=\"Twitter\" url={twitterUrl} newTab margin><FaTwitter size={24} color='white'/></Button>\n                <Button label=\"Blog homepage\" url=\"/blog\"><IoIosHome size={24} color='white' /></Button>\n            </Container>\n        );\n    }\n};\n","export function formatTweetIntentUrl(text) {\n    const encodedText = encodeURIComponent(text);\n    return `https://twitter.com/intent/tweet?text=${encodedText}`;\n}","import React from 'react';\nimport styled from \"styled-components\";\n\nconst Wrapper = styled.div`\n    margin-top: 80px;\n`;\n\nexport default class Disqus extends React.Component {\n    render() {\n        return (\n            <Wrapper>\n                <div id=\"disqus_thread\"></div>\n            </Wrapper>\n        )\n    }\n\n    componentDidMount() {\n       /**\n        *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.\n        *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/\n        /*\n        var disqus_config = function () {\n        this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable\n        this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable\n        };\n        */\n        (function() { // DON'T EDIT BELOW THIS LINE\n        var d = document, s = d.createElement('script');\n        s.src = '//noahgilmore-com.disqus.com/embed.js';\n        s.setAttribute('data-timestamp', +new Date());\n        (d.head || d.body).appendChild(s);\n        })();     \n    }\n}","import React from 'react';\nimport { Helmet } from \"react-helmet\";\nimport { GlobalStyle } from './default';\nimport Nav from './Nav';\nimport EndButtons from './EndButtons';\nimport { BlogPostContainer, BlogPostMeta } from './BlogPost';\nimport MarkdownContent from './MarkdownContent';\nimport { formatDateString } from '../lib/dateFormat';\nimport Disqus from './Disqus';\nimport ReactGA from 'react-ga';\nimport styled from 'styled-components';\n\nconst Container = styled.div`\n  @media (prefers-color-scheme: dark) {\n    background-color: #2b2c2f;\n  }\n`;\n\nconst NonContent = styled.div`\n    @media all and (max-width: 600px) {\n        padding-right: 5%;\n        padding-left: 5%;\n    }\n`;\n\nexport default class BlogPageLayout extends React.Component {\n    render() {\n      let isDarkMode = (typeof window !== 'undefined' && window.matchMedia(\"(prefers-color-scheme: dark)\").matches);\n        return (\n            <Container>\n              <GlobalStyle />\n              <Helmet>\n                  <link href='https://fonts.googleapis.com/css?family=Roboto:700' rel='stylesheet' type='text/css' />\n                  <link href=\"https://fonts.googleapis.com/css?family=Gentium+Book+Basic\" rel=\"stylesheet\" />\n                  {!isDarkMode && <link rel=\"stylesheet\" href=\"//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.0/styles/atom-one-light.min.css\" />}\n                  {isDarkMode && <link rel=\"stylesheet\" href=\"//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.0/styles/zenburn.min.css\" />}\n                  <meta name=\"twitter:card\" content=\"summary\" />\n                  <meta name=\"twitter:creator\" content=\"@noahsark769\" />\n                  <meta property=\"og:url\" content={`https://noahgilmore.com${this.props.location.pathname}`} />\n                  <meta property=\"og:title\" content={this.props.pageContext.frontmatter.title} />\n                  <meta property=\"og:description\" content={this.props.pageContext.frontmatter.staticPreview} />\n                  <meta name=\"description\" content={this.props.pageContext.frontmatter.staticPreview} />\n              </Helmet>\n              <Nav blog />\n              <BlogPostContainer>\n                <NonContent>\n                  <BlogPostMeta\n                      title={this.props.pageContext.frontmatter.title}\n                      date={formatDateString(this.props.pageContext.frontmatter.date)} />\n                </NonContent>\n                <MarkdownContent>\n                  {this.props.children}\n                </MarkdownContent>\n                <NonContent>\n                  <EndButtons tweetTitle={this.props.pageContext.frontmatter.title} tweetUrl={`https://noahgilmore.com${this.props.location.pathname}`} />\n                  <Disqus />\n                </NonContent>\n              </BlogPostContainer>\n            </Container>\n        )\n    }\n\n    componentDidMount() {\n        ReactGA.initialize('UA-35325391-1');\n        ReactGA.pageview(window.location.pathname + window.location.search);\n    }\n}\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\nimport Link, {\n  withPrefix,\n  navigate,\n  push,\n  replace,\n  navigateTo,\n} from \"gatsby-link\"\nimport PageRenderer from \"./public-page-renderer\"\nimport parsePath from \"./parse-path\"\n\nconst StaticQueryContext = React.createContext({})\n\nconst StaticQuery = props => (\n  <StaticQueryContext.Consumer>\n    {staticQueryData => {\n      if (\n        props.data ||\n        (staticQueryData[props.query] && staticQueryData[props.query].data)\n      ) {\n        return (props.render || props.children)(\n          props.data ? props.data.data : staticQueryData[props.query].data\n        )\n      } else {\n        return <div>Loading (StaticQuery)</div>\n      }\n    }}\n  </StaticQueryContext.Consumer>\n)\n\nStaticQuery.propTypes = {\n  data: PropTypes.object,\n  query: PropTypes.string.isRequired,\n  render: PropTypes.func,\n  children: PropTypes.func,\n}\n\nfunction graphql() {\n  throw new Error(\n    `It appears like Gatsby is misconfigured. Gatsby related \\`graphql\\` calls ` +\n      `are supposed to only be evaluated at compile time, and then compiled away,. ` +\n      `Unfortunately, something went wrong and the query was left in the compiled code.\\n\\n.` +\n      `Unless your site has a complex or custom babel/Gatsby configuration this is likely a bug in Gatsby.`\n  )\n}\n\nexport {\n  Link,\n  withPrefix,\n  graphql,\n  parsePath,\n  navigate,\n  push, // TODO replace for v3\n  replace, // TODO remove replace for v3\n  navigateTo, // TODO: remove navigateTo for v3\n  StaticQueryContext,\n  StaticQuery,\n  PageRenderer,\n}\n","const preferDefault = m => (m && m.default) || m\n\nif (process.env.BUILD_STAGE === `develop`) {\n  module.exports = preferDefault(require(`./public-page-renderer-dev`))\n} else if (process.env.BUILD_STAGE === `build-javascript`) {\n  module.exports = preferDefault(require(`./public-page-renderer-prod`))\n} else {\n  module.exports = () => null\n}\n","function _extends() {\n  module.exports = _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nmodule.exports = _extends;","import React from \"react\"\nimport PropTypes from \"prop-types\"\n\nimport InternalPageRenderer from \"./page-renderer\"\nimport loader from \"./loader\"\n\nconst ProdPageRenderer = ({ location }) => {\n  const pageResources = loader.getResourcesForPathnameSync(location.pathname)\n  return React.createElement(InternalPageRenderer, {\n    location,\n    pageResources,\n    ...pageResources.json,\n  })\n}\n\nProdPageRenderer.propTypes = {\n  location: PropTypes.shape({\n    pathname: PropTypes.string.isRequired,\n  }).isRequired,\n}\n\nexport default ProdPageRenderer\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _objectWithoutPropertiesLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutPropertiesLoose\"));\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\n// Handle legacy names for image queries.\nvar convertProps = function convertProps(props) {\n  var convertedProps = (0, _extends2.default)({}, props);\n\n  if (convertedProps.resolutions) {\n    convertedProps.fixed = convertedProps.resolutions;\n    delete convertedProps.resolutions;\n  }\n\n  if (convertedProps.sizes) {\n    convertedProps.fluid = convertedProps.sizes;\n    delete convertedProps.sizes;\n  }\n\n  return convertedProps;\n}; // Cache if we've seen an image before so we don't both with\n// lazy-loading & fading in on subsequent mounts.\n\n\nvar imageCache = {};\n\nvar inImageCache = function inImageCache(props) {\n  var convertedProps = convertProps(props); // Find src\n\n  var src = convertedProps.fluid ? convertedProps.fluid.src : convertedProps.fixed.src;\n\n  if (imageCache[src]) {\n    return true;\n  } else {\n    imageCache[src] = true;\n    return false;\n  }\n};\n\nvar io;\nvar listeners = [];\n\nfunction getIO() {\n  if (typeof io === \"undefined\" && typeof window !== \"undefined\" && window.IntersectionObserver) {\n    io = new window.IntersectionObserver(function (entries) {\n      entries.forEach(function (entry) {\n        listeners.forEach(function (l) {\n          if (l[0] === entry.target) {\n            // Edge doesn't currently support isIntersecting, so also test for an intersectionRatio > 0\n            if (entry.isIntersecting || entry.intersectionRatio > 0) {\n              io.unobserve(l[0]);\n              l[1]();\n            }\n          }\n        });\n      });\n    }, {\n      rootMargin: \"200px\"\n    });\n  }\n\n  return io;\n}\n\nvar listenToIntersections = function listenToIntersections(el, cb) {\n  getIO().observe(el);\n  listeners.push([el, cb]);\n};\n\nvar noscriptImg = function noscriptImg(props) {\n  // Check if prop exists before adding each attribute to the string output below to prevent\n  // HTML validation issues caused by empty values like width=\"\" and height=\"\"\n  var src = props.src ? \"src=\\\"\" + props.src + \"\\\" \" : \"src=\\\"\\\" \"; // required attribute\n\n  var sizes = props.sizes ? \"sizes=\\\"\" + props.sizes + \"\\\" \" : \"\";\n  var srcSetWebp = props.srcSetWebp ? \"<source type='image/webp' srcSet=\\\"\" + props.srcSetWebp + \"\\\" \" + sizes + \"/>\" : \"\";\n  var srcSet = props.srcSet ? \"<source srcSet=\\\"\" + props.srcSet + \"\\\" \" + sizes + \"/>\" : \"\";\n  var title = props.title ? \"title=\\\"\" + props.title + \"\\\" \" : \"\";\n  var alt = props.alt ? \"alt=\\\"\" + props.alt + \"\\\" \" : \"alt=\\\"\\\" \"; // required attribute\n\n  var width = props.width ? \"width=\\\"\" + props.width + \"\\\" \" : \"\";\n  var height = props.height ? \"height=\\\"\" + props.height + \"\\\" \" : \"\";\n  var opacity = props.opacity ? props.opacity : \"1\";\n  var transitionDelay = props.transitionDelay ? props.transitionDelay : \"0.5s\";\n  return \"<picture>\" + srcSetWebp + srcSet + \"<img \" + width + height + src + alt + title + \"style=\\\"position:absolute;top:0;left:0;transition:opacity 0.5s;transition-delay:\" + transitionDelay + \";opacity:\" + opacity + \";width:100%;height:100%;object-fit:cover;object-position:center\\\"/></picture>\";\n};\n\nvar Img = _react.default.forwardRef(function (props, ref) {\n  var style = props.style,\n      onLoad = props.onLoad,\n      onError = props.onError,\n      otherProps = (0, _objectWithoutPropertiesLoose2.default)(props, [\"style\", \"onLoad\", \"onError\"]);\n  return _react.default.createElement(\"img\", (0, _extends2.default)({}, otherProps, {\n    onLoad: onLoad,\n    onError: onError,\n    ref: ref,\n    style: (0, _extends2.default)({\n      position: \"absolute\",\n      top: 0,\n      left: 0,\n      width: \"100%\",\n      height: \"100%\",\n      objectFit: \"cover\",\n      objectPosition: \"center\"\n    }, style)\n  }));\n});\n\nImg.propTypes = {\n  style: _propTypes.default.object,\n  onError: _propTypes.default.func,\n  onLoad: _propTypes.default.func\n};\n\nvar Image =\n/*#__PURE__*/\nfunction (_React$Component) {\n  (0, _inheritsLoose2.default)(Image, _React$Component);\n\n  function Image(props) {\n    var _this;\n\n    _this = _React$Component.call(this, props) || this; // If this browser doesn't support the IntersectionObserver API\n    // we default to start downloading the image right away.\n\n    var isVisible = true;\n    var imgLoaded = true;\n    var IOSupported = false;\n    var fadeIn = props.fadeIn; // If this image has already been loaded before then we can assume it's\n    // already in the browser cache so it's cheap to just show directly.\n\n    var seenBefore = inImageCache(props);\n\n    if (!seenBefore && typeof window !== \"undefined\" && window.IntersectionObserver) {\n      isVisible = false;\n      imgLoaded = false;\n      IOSupported = true;\n    } // Always don't render image while server rendering\n\n\n    if (typeof window === \"undefined\") {\n      isVisible = false;\n      imgLoaded = false;\n    }\n\n    if (props.critical) {\n      isVisible = true;\n      imgLoaded = false;\n      IOSupported = false;\n    }\n\n    var hasNoScript = !(_this.props.critical && !_this.props.fadeIn);\n    _this.state = {\n      isVisible: isVisible,\n      imgLoaded: imgLoaded,\n      IOSupported: IOSupported,\n      fadeIn: fadeIn,\n      hasNoScript: hasNoScript,\n      seenBefore: seenBefore\n    };\n    _this.imageRef = _react.default.createRef();\n    _this.handleImageLoaded = _this.handleImageLoaded.bind((0, _assertThisInitialized2.default)((0, _assertThisInitialized2.default)(_this)));\n    _this.handleRef = _this.handleRef.bind((0, _assertThisInitialized2.default)((0, _assertThisInitialized2.default)(_this)));\n    return _this;\n  }\n\n  var _proto = Image.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    if (this.props.critical) {\n      var img = this.imageRef.current;\n\n      if (img && img.complete) {\n        this.handleImageLoaded();\n      }\n    }\n  };\n\n  _proto.handleRef = function handleRef(ref) {\n    var _this2 = this;\n\n    if (this.state.IOSupported && ref) {\n      listenToIntersections(ref, function () {\n        _this2.setState({\n          isVisible: true\n        });\n      });\n    }\n  };\n\n  _proto.handleImageLoaded = function handleImageLoaded() {\n    this.setState({\n      imgLoaded: true\n    });\n\n    if (this.state.seenBefore) {\n      this.setState({\n        fadeIn: false\n      });\n    }\n\n    this.props.onLoad && this.props.onLoad();\n  };\n\n  _proto.render = function render() {\n    var _convertProps = convertProps(this.props),\n        title = _convertProps.title,\n        alt = _convertProps.alt,\n        className = _convertProps.className,\n        _convertProps$style = _convertProps.style,\n        style = _convertProps$style === void 0 ? {} : _convertProps$style,\n        _convertProps$imgStyl = _convertProps.imgStyle,\n        imgStyle = _convertProps$imgStyl === void 0 ? {} : _convertProps$imgStyl,\n        _convertProps$placeho = _convertProps.placeholderStyle,\n        placeholderStyle = _convertProps$placeho === void 0 ? {} : _convertProps$placeho,\n        fluid = _convertProps.fluid,\n        fixed = _convertProps.fixed,\n        backgroundColor = _convertProps.backgroundColor,\n        Tag = _convertProps.Tag;\n\n    var bgColor = typeof backgroundColor === \"boolean\" ? \"lightgray\" : backgroundColor;\n    var imagePlaceholderStyle = (0, _extends2.default)({\n      opacity: this.state.imgLoaded ? 0 : 1,\n      transition: \"opacity 0.5s\",\n      transitionDelay: this.state.imgLoaded ? \"0.5s\" : \"0.25s\"\n    }, imgStyle, placeholderStyle);\n    var imageStyle = (0, _extends2.default)({\n      opacity: this.state.imgLoaded || this.state.fadeIn === false ? 1 : 0,\n      transition: this.state.fadeIn === true ? \"opacity 0.5s\" : \"none\"\n    }, imgStyle);\n\n    if (fluid) {\n      var image = fluid;\n      return _react.default.createElement(Tag, {\n        className: (className ? className : \"\") + \" gatsby-image-wrapper\",\n        style: (0, _extends2.default)({\n          position: \"relative\",\n          overflow: \"hidden\"\n        }, style),\n        ref: this.handleRef,\n        key: \"fluid-\" + JSON.stringify(image.srcSet)\n      }, _react.default.createElement(Tag, {\n        style: {\n          width: \"100%\",\n          paddingBottom: 100 / image.aspectRatio + \"%\"\n        }\n      }), image.base64 && _react.default.createElement(Img, {\n        alt: !this.state.isVisible ? alt : \"\",\n        title: title,\n        src: image.base64,\n        style: imagePlaceholderStyle\n      }), image.tracedSVG && _react.default.createElement(Img, {\n        alt: !this.state.isVisible ? alt : \"\",\n        title: title,\n        src: image.tracedSVG,\n        style: imagePlaceholderStyle\n      }), bgColor && _react.default.createElement(Tag, {\n        title: title,\n        style: {\n          backgroundColor: bgColor,\n          position: \"absolute\",\n          top: 0,\n          bottom: 0,\n          opacity: !this.state.imgLoaded ? 1 : 0,\n          transitionDelay: \"0.35s\",\n          right: 0,\n          left: 0\n        }\n      }), this.state.isVisible && _react.default.createElement(\"picture\", null, image.srcSetWebp && _react.default.createElement(\"source\", {\n        type: \"image/webp\",\n        srcSet: image.srcSetWebp,\n        sizes: image.sizes\n      }), _react.default.createElement(\"source\", {\n        srcSet: image.srcSet,\n        sizes: image.sizes\n      }), _react.default.createElement(Img, {\n        alt: alt,\n        title: title,\n        src: image.src,\n        style: imageStyle,\n        ref: this.imageRef,\n        onLoad: this.handleImageLoaded,\n        onError: this.props.onError\n      })), this.state.hasNoScript && _react.default.createElement(\"noscript\", {\n        dangerouslySetInnerHTML: {\n          __html: noscriptImg((0, _extends2.default)({\n            alt: alt,\n            title: title\n          }, image))\n        }\n      }));\n    }\n\n    if (fixed) {\n      var _image = fixed;\n      var divStyle = (0, _extends2.default)({\n        position: \"relative\",\n        overflow: \"hidden\",\n        display: \"inline-block\",\n        width: _image.width,\n        height: _image.height\n      }, style);\n\n      if (style.display === \"inherit\") {\n        delete divStyle.display;\n      }\n\n      return _react.default.createElement(Tag, {\n        className: (className ? className : \"\") + \" gatsby-image-wrapper\",\n        style: divStyle,\n        ref: this.handleRef,\n        key: \"fixed-\" + JSON.stringify(_image.srcSet)\n      }, _image.base64 && _react.default.createElement(Img, {\n        alt: !this.state.isVisible ? alt : \"\",\n        title: title,\n        src: _image.base64,\n        style: imagePlaceholderStyle\n      }), _image.tracedSVG && _react.default.createElement(Img, {\n        alt: !this.state.isVisible ? alt : \"\",\n        title: title,\n        src: _image.tracedSVG,\n        style: imagePlaceholderStyle\n      }), bgColor && _react.default.createElement(Tag, {\n        title: title,\n        style: {\n          backgroundColor: bgColor,\n          width: _image.width,\n          opacity: !this.state.imgLoaded ? 1 : 0,\n          transitionDelay: \"0.25s\",\n          height: _image.height\n        }\n      }), this.state.isVisible && _react.default.createElement(\"picture\", null, _image.srcSetWebp && _react.default.createElement(\"source\", {\n        type: \"image/webp\",\n        srcSet: _image.srcSetWebp,\n        sizes: _image.sizes\n      }), _react.default.createElement(\"source\", {\n        srcSet: _image.srcSet,\n        sizes: _image.sizes\n      }), _react.default.createElement(Img, {\n        alt: alt,\n        title: title,\n        width: _image.width,\n        height: _image.height,\n        src: _image.src,\n        style: imageStyle,\n        ref: this.imageRef,\n        onLoad: this.handleImageLoaded,\n        onError: this.props.onError\n      })), this.state.hasNoScript && _react.default.createElement(\"noscript\", {\n        dangerouslySetInnerHTML: {\n          __html: noscriptImg((0, _extends2.default)({\n            alt: alt,\n            title: title,\n            width: _image.width,\n            height: _image.height\n          }, _image))\n        }\n      }));\n    }\n\n    return null;\n  };\n\n  return Image;\n}(_react.default.Component);\n\nImage.defaultProps = {\n  critical: false,\n  fadeIn: true,\n  alt: \"\",\n  Tag: \"div\"\n};\n\nvar fixedObject = _propTypes.default.shape({\n  width: _propTypes.default.number.isRequired,\n  height: _propTypes.default.number.isRequired,\n  src: _propTypes.default.string.isRequired,\n  srcSet: _propTypes.default.string.isRequired,\n  base64: _propTypes.default.string,\n  tracedSVG: _propTypes.default.string,\n  srcWebp: _propTypes.default.string,\n  srcSetWebp: _propTypes.default.string\n});\n\nvar fluidObject = _propTypes.default.shape({\n  aspectRatio: _propTypes.default.number.isRequired,\n  src: _propTypes.default.string.isRequired,\n  srcSet: _propTypes.default.string.isRequired,\n  sizes: _propTypes.default.string.isRequired,\n  base64: _propTypes.default.string,\n  tracedSVG: _propTypes.default.string,\n  srcWebp: _propTypes.default.string,\n  srcSetWebp: _propTypes.default.string\n});\n\nImage.propTypes = {\n  resolutions: fixedObject,\n  sizes: fluidObject,\n  fixed: fixedObject,\n  fluid: fluidObject,\n  fadeIn: _propTypes.default.bool,\n  title: _propTypes.default.string,\n  alt: _propTypes.default.string,\n  className: _propTypes.default.oneOfType([_propTypes.default.string, _propTypes.default.object]),\n  // Support Glamor's css prop.\n  critical: _propTypes.default.bool,\n  style: _propTypes.default.object,\n  imgStyle: _propTypes.default.object,\n  placeholderStyle: _propTypes.default.object,\n  backgroundColor: _propTypes.default.oneOfType([_propTypes.default.string, _propTypes.default.bool]),\n  onLoad: _propTypes.default.func,\n  onError: _propTypes.default.func,\n  Tag: _propTypes.default.string\n};\nvar _default = Image;\nexports.default = _default;","import React from 'react'\nimport { StaticQuery, graphql } from 'gatsby'\nimport Img from 'gatsby-image'\n\nconst Image = (props) => (\n  <StaticQuery\n    query={graphql`\n      query {\n        images: allFile {\n          edges {\n            node {\n              relativePath\n              name\n              publicURL\n              childImageSharp {\n                sizes(maxWidth: 600) {\n                  ...GatsbyImageSharpSizes\n                }\n              }\n            }\n          }\n        }\n      }\n    `}\n\n    render={(data) => {\n      const image = data.images.edges.find(n => {\n        return n.node.relativePath === props.filename;\n      });\n\n      if (!image) {\n        return null;\n      }\n\n      const childImageSharp = image.node.childImageSharp;\n      if (!childImageSharp) {\n        return (<img style={{width: \"100%\"}} alt={props.alt} src={image.node.publicURL} />);\n      }\n      const imageSizes = image.node.childImageSharp.sizes;\n      return (\n        <Img\n          alt={props.alt}\n          sizes={imageSizes}\n        />\n      );\n    }}\n  />\n)\nexport default Image;\n","import React from 'react';\nimport styled from \"styled-components\";\nimport Image from \"../components/Image\";\n\nconst Wrap = styled.div`\n    display: flex;\n    margin: 20px 0;\n    justify-content: center;\n`;\n\nconst Container = styled.div`\n    flex: 1;\n    ${props => props.max ? \"max-width: \" + props.max + \"px\" : \"\"};\n`;\n\nconst Caption = styled.div`\n    font-family: \"Gentium Book Basic\", times, serif;\n    font-style: italic;\n    font-size: 16px;\n    color: #999;\n    margin-bottom: 30px;\n    margin-top: 12px;\n    text-align: center;\n\n    img {\n        width: 100%;\n        margin-bottom: 10px;   \n    }\n`;\n\nexport default class CaptionedImage extends React.Component {\n    render() {\n        return (\n            <Wrap>\n                <Container max={this.props.max}>\n                    <Image filename={this.props.filename} alt={this.props.alt} />\n                    <Caption>{this.props.caption}</Caption>\n                </Container>\n            </Wrap>\n        );\n    }\n};\n"],"sourceRoot":""}