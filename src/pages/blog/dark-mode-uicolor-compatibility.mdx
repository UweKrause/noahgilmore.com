---
title: Backwards compatibility for iOS 13 system colors
date: 2019-06-09
tags: ios, swift, ios 13, darkmode, uicolor
staticPreview: At WWDC 2019, Apple announced that Dark Mode would be supported on iOS 13. There are some significant changes to UIKit in order to support this - many of them are detailed in the talk Implementing Dark Mode on iOS which I'd highly recommend watching...
mdxPreview: >
    At WWDC 2019, Apple announced that Dark Mode would be supported on iOS 13. There are some significant changes to UIKit in order to support this - many of them are detailed in the talk [Implementing Dark Mode on iOS](https://developer.apple.com/videos/play/wwdc2019/214/) which I'd highly recommend watching...
---
import CaptionedImage from '../../components/CaptionedImage';

At WWDC 2019, Apple announced that Dark Mode would be supported on iOS 13. There are some significant changes to UIKit in order to support this - many of them are detailed in the talk [Implementing Dark Mode on iOS](https://developer.apple.com/videos/play/wwdc2019/214/) which I'd highly recommend watching.

One of the changes that makes adopting Dark Mode so easy is the new system colors api from `UIColor`. On iOS 12 and older, you might have a label you want to make black, and it would work just fine:

```swift
label.textColor = UIColor.black
```

But in Dark Mode, the background will also be black, which means the text won't be visible. In iOS 13+, it's better to use the new system color which will respect the user's color scheme preference:

```swift
label.textColor = UIColor.label
```

`label` is only one example: there are 36 new color scheme agnostic `UIColor`s available in iOS 13+, organized into [Element Colors](https://developer.apple.com/documentation/uikit/uicolor/ui_element_colors) (e.g. `label`) and [Standard Colors](https://developer.apple.com/documentation/uikit/uicolor/standard_colors) (`systemBlue`, `systemGray3`, etc).

## Compatibility
That's all well and good, but most of us with existing apps will still be supporting devices with iOS 12 or lower, at least for a while. This means we'll probably be doing a lot of things like this:

```swift
if #available(iOS 13, *) {
    label.textColor = .label
} else {
    label.textColor = .black
}
```

It's a workable solution, but it necessitates changing a lot of code - an `if` statement for every non-system label or background color!! For [CIFilter.io](/blog/cifilterio), I wondered if there was a better way. What if, instead of the `if #available`, there was a way to abstract the color choice down one level, so we could do something like this?

```swift
label.textColor = ColorCompatibility.label
```

## Generating system colors
I wrote a [small app]()