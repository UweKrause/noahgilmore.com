{"version":3,"sources":["webpack:///./src/components/Disqus.jsx","webpack:///./src/components/BlogPost.jsx","webpack:///./src/components/MarkdownContent.jsx","webpack:///./src/pages/blog/nsobject-equatable.jsx","webpack:///./src/components/default.jsx","webpack:///./src/fonts/Bariol-Regular.eot","webpack:///./src/fonts/Bariol-Regular.woff","webpack:///./src/fonts/Bariol-Regular.ttf","webpack:///./src/fonts/Bariol-Regular.svg","webpack:///./src/components/Nav.jsx"],"names":["Wrapper","styled","div","withConfig","displayName","componentId","Disqus","render","react_default","a","createElement","id","componentDidMount","d","s","document","src","setAttribute","Date","head","body","appendChild","React","Component","BlogPostContainer","TitleContainer","Heading","h1","DateContainer","p","BlogPost","Helmet","this","props","title","date","children","Disqus_Disqus","Container","MarkdownContent","react_markdown_default","source","elements","ReactDOM","findDOMNode","querySelectorAll","i","length","hljs","highlightBlock","content","MarkdownContent_MarkdownContent","Page","_React$Component","apply","arguments","inheritsLoose_default","_proto","prototype","components_default","href","rel","type","Nav","BlogPost_BlogPost","ReactGA","initialize","pageview","window","location","pathname","search","GlobalStyle","createGlobalStyle","_templateObject","bariol_eot","bariol_woff","bariol_ttf","bariol_svg","Div","UL","nav","ul","LI","li","A","module","exports","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","_components_default__WEBPACK_IMPORTED_MODULE_1__","styled_components__WEBPACK_IMPORTED_MODULE_2__","StyledNav","Title","NavLinks","NavLink","StyledA"],"mappings":"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","file":"component---src-pages-blog-nsobject-equatable-jsx-bfe0c88bd80dc49c69cc.js","sourcesContent":["import React from 'react';\nimport { Div, A } from '../components/default';\nimport styled from \"styled-components\";\nimport { Helmet } from \"react-helmet\";\n\nconst Wrapper = styled.div`\n    margin-top: 80px;\n`;\n\nexport default class Disqus extends React.Component {\n    render() {\n        return (\n            <Wrapper>\n                <div id=\"disqus_thread\"></div>\n            </Wrapper>\n        )\n    }\n\n    componentDidMount() {\n       /**\n        *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.\n        *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/\n        /*\n        var disqus_config = function () {\n        this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable\n        this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable\n        };\n        */\n        (function() { // DON'T EDIT BELOW THIS LINE\n        var d = document, s = d.createElement('script');\n        s.src = '//noahgilmore-com.disqus.com/embed.js';\n        s.setAttribute('data-timestamp', +new Date());\n        (d.head || d.body).appendChild(s);\n        })();     \n    }\n}","import React from 'react';\nimport { Div, A } from '../components/default';\nimport Disqus from '../components/Disqus';\nimport styled from \"styled-components\";\nimport { Helmet } from \"react-helmet\";\n\nconst BlogPostContainer = styled.div`\n    padding: 60px 0;\n    margin: 0 auto;\n    width: 90%;\n    @media all and (min-width: 600px) {\n        max-width: 700px;\n        margin: auto;\n    }\n`;\n\nconst TitleContainer = styled.div`\n    width: 100%;\n    margin-bottom: 40px;\n`;\n\nconst Heading = styled.h1`\n    width: 100%;\n    font-family: \"Roboto\", \"Helvetica Neue\", \"Helvetica\", sans-serif;\n    font-size: 28px;\n    margin-bottom: 10px;\n`;\n\nconst DateContainer = styled.p`\n    font-family: \"Gentium Book Basic\", times, serif;\n    font-style: italic;\n    font-size: 16px;\n    color: #999;\n`;\n\nexport default class BlogPost extends React.Component {\n    render() {\n        return (\n            <BlogPostContainer>\n                <Helmet>\n                    <title>{this.props.title}</title>\n                </Helmet>\n                <TitleContainer>\n                    <Heading>{this.props.title}</Heading>\n                    <DateContainer>{this.props.date}</DateContainer>\n                </TitleContainer>\n                <div>\n                    {this.props.children}\n                </div>\n                <Disqus />\n            </BlogPostContainer>\n        );\n    }\n};\n","import React from 'react';\nimport ReactDOM from \"react-dom\";\nimport { Div, A } from '../components/default';\nimport styled, { css } from \"styled-components\";\nimport ReactMarkdown from 'react-markdown';\nimport { Helmet } from \"react-helmet\";\nimport hljs from 'highlight.js';\n\nconst Container = styled.div`\n    .format-post-preview p, .format-post-preview li {\n        font-family: \"Open Sans\", arial, sans-serif;\n        font-size: 14px;\n        line-height: 14px;\n        line-height: 18px;\n        margin-top: 10px;\n        padding-bottom: 10px;\n    }\n    .format-post-preview p + p {\n        margin-top: 0;\n    }\n    .format-post-preview pre > code {\n        font-size: 12px;\n        line-height: 12px;\n        margin-top: 0;\n        margin-bottom: 0;\n    }\n    p, li {\n        margin: 0;\n        padding: 0;\n        font-family: \"Gentium Book Basic\", times, serif;\n        font-size: 21px;\n        line-height: 26px;\n        color: #333;\n        padding-bottom: 15px;\n        margin-top: 15px;\n    }\n    a {\n        color: #1A3F4B;\n    }\n    code {\n        font-family: monospace;\n        font-size: 16px; \n    }\n    pre {\n        display: block;\n        margin: 0;\n        padding: 0;\n        background: none;\n    }\n    pre > code {\n        display: block;\n        margin: 0;\n        padding: 0;\n        border: 1px solid #ddd;\n        border-radius: 2px;\n        padding: 10px;\n        margin-top: 10px;\n        font-family: monospace;\n        font-size: 14px;\n        white-space: pre-wrap;\n    }\n\n    pre > code.hljs {\n        border: none;\n    }\n    pre + p {\n        margin-top: 30px;\n    }\n    ol {\n        margin-left: 30px;\n    }\n    ol li {\n        list-style-type: decimal;\n    }\n    ul li {\n        list-style-type: square;\n        margin-left: 40px;\n    }\n    h1, h2, h3, h4, h5, h6 {\n        width: 100%;\n        font-family: \"Roboto\", \"Helvetica Neue\", \"Helvetica\", sans-serif;\n        margin-bottom: 10px;   \n        margin-top: 40px;\n    }\n    h1 {\n        font-size: 28px;\n    }\n    h2 {\n        font-size: 24px;\n    }\n    h3 {\n        font-size: 20px;\n    }\n`;\n\nexport default class MarkdownContent extends React.Component {\n    render() {\n        return (\n            <Container>\n                <ReactMarkdown source={this.props.source} />\n            </Container>\n        );\n    }\n\n    componentDidMount() {\n        const node = ReactDOM.findDOMNode(this);\n        var elements = node.querySelectorAll(\"pre code\");\n        // this next line has to be stuck in the 90's\n        // https://css-tricks.com/snippets/javascript/loop-queryselectorall-matches/\n        for (var i = 0; i < elements.length; i++) {\n            hljs.highlightBlock(elements[i]);\n        }\n    }\n}","import React from 'react';\nimport { Helmet } from \"react-helmet\";\nimport { Div, A, GlobalStyle } from '../../components/default';\nimport styled from \"styled-components\";\nimport Nav from '../../components/Nav';\nimport BlogPost from '../../components/BlogPost';\nimport MarkdownContent from '../../components/MarkdownContent';\nimport ReactGA from 'react-ga';\n\nconst content = (<div>\n\n<MarkdownContent source={`\nSwift can be tricky sometimes. For example, what does the following print?\n\n\\`\\`\\`swift\nclass A: NSObject {\n  let x: Int\n\n  init(x: Int) {\n    self.x = x\n  }\n}\n\nfunc ==(left: A, right: A) -> Bool {\n  return left.x == right.x\n}\n\nprint(A(x: 1) == A(x: 1))\nprint([A(x: 1)] == [A(x: 1)])\n\\`\\`\\`\n\nPerhaps surprisingly, it's this:\n\\`\\`\\`nohighlight\ntrue\nfalse // huh?!\n\\`\\`\\`\n\n### Equatable conformance is hard\n\nWhy does comparing two arrays with equal contents return false? It turns out that:\n- Array is bridged to NSArray\n- NSArray doesn't declare a \\`==(_:_:)\\` function, so it falls back to NSObject's \\`==(_:_:)\\`, which calls \\`isEqual\\`\n- NSArray's \\`isEqual\\` [compares objects by casting to AnyHashable](https://github.com/apple/swift-corelibs-foundation/blob/0cbb3225660752987a6c2cf672886fca434d3b1d/Foundation/NSArray.swift#L310)\n\nWe can see that this is the problem by casting the objects to \\`AnyHashable\\` before comparing them:\n\n\\`\\`\\`swift\nprint(A(x: 1) as AnyHashable == A(x: 1) as AnyHashable)\n\\`\\`\\`\n\\`\\`\\`nohighlight\nfalse\n\\`\\`\\`\n\nApparently, doing this will use the NSObject implementation of \\`==(_:_:)\\` rather than the \\`A\\` one. The NSObject implementation of \\`==(_:_:)\\` checks isEqual, which returns false because the two elements aren't the same in memory. We can see this by adding an override:\n\n\\`\\`\\`swift\nclass B: NSObject {\n  let x: Int\n\n  init(x: Int) {\n    self.x = x\n  }\n\n  override func isEqual(_ object: Any?) -> Bool {\n    print(\"isEqual for B\")\n    return super.isEqual(object)\n  }\n}\n\nfunc ==(left: B, right: B) -> Bool {\n  print(\"== for B\")\n  return left.x == right.x\n}\n\\`\\`\\`\n\nThen,\n\n\\`\\`\\`swift\nprint([B(x: 1)] == [B(x: 1)])\n\\`\\`\\`\n\\`\\`\\`nohighlight\nisEqual for B\nfalse\n\\`\\`\\`\n\n### The fix\n\nAs far as I can tell, the best way to make an NSObject subclass use custom equality inside an array is to override isEqual:\n\n\\`\\`\\`swift\nclass C: NSObject {\n  let x: Int\n\n  init(x: Int) {\n    self.x = x\n  }\n\n  override func isEqual(_ object: Any?) -> Bool {\n    guard let object = object as? C else { return false }\n    return object == self\n  }\n}\n\nfunc ==(left: C, right: C) -> Bool {\n  print(\"== for C\")\n  return left.x == right.x\n}\n\\`\\`\\`\n\\`\\`\\`swift\nprint([C(x: 1)] == [C(x: 1)])\n\\`\\`\\`\n\\`\\`\\`nohighlight\n== for C\ntrue\n\\`\\`\\`\n    \nOf course, if we defined \\`A\\` as a \\`struct\\` or a regular \\`class\\` in the first place, there won't be \\`==(_:_:)\\` defined for \\`[A]\\`, which means the compiler would catch our mistake instead of falling back to something that might not work correctly.\n\nSigh. Working with NSObject can be tricky.\n\nA working playground with the code from this post can be found [here](https://github.com/noahsark769/code-examples/blob/ed9df41aae709eaeb4e334e3e9a5b1a650deef4d/swift/swift-nsobject-equatable.playground/Contents.swift).\n`} />\n\n</div>);\n\nexport class Page extends React.Component {\n    render() {\n        return (\n            <div>\n                <GlobalStyle />\n                <Helmet>\n                    <link href='http://fonts.googleapis.com/css?family=Roboto:700' rel='stylesheet' type='text/css' />\n                    <link href=\"https://fonts.googleapis.com/css?family=Gentium+Book+Basic\" rel=\"stylesheet\" />\n                    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/styles/atom-one-light.min.css\" />\n                    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/highlight.min.js\"></script>\n                    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.4.0/languages/swift.min.js\"></script>\n                </Helmet>\n                <Nav />\n                <BlogPost title=\"NSObject Equality is Tricky\" date=\"November 13th, 2016\">\n                    {content}\n                </BlogPost>\n            </div>\n        )\n    }\n\n    componentDidMount() {\n        ReactGA.initialize('UA-35325391-1');\n        ReactGA.pageview(window.location.pathname + window.location.search);\n    }\n}\n\nexport default Page;\n","import React from 'react';\nimport styled from \"styled-components\";\nimport { createGlobalStyle } from 'styled-components'\nimport bariol_eot from '../fonts/Bariol-Regular.eot';\nimport bariol_woff from '../fonts/Bariol-Regular.woff';\nimport bariol_ttf from '../fonts/Bariol-Regular.ttf';\nimport bariol_svg from '../fonts/Bariol-Regular.svg';\n\nexport const GlobalStyle = createGlobalStyle`\n    @font-face {\n        font-family: 'Bariol';\n        src: url('${bariol_eot}');\n        src: url('${bariol_eot}?#iefix') format('embedded-opentype'),\n             url('${bariol_woff}') format('woff'),\n             url('${bariol_ttf}') format('truetype'),\n             url('${bariol_svg}#svgBariolRegular') format('svg');\n    }\n\n    * {\n        box-sizing: border-box;\n    }\n`;\n\nexport const Div = styled.div``;\nexport const Nav = styled.nav``;\nexport const UL = styled.ul`\n    margin: 0;\n    padding: 0;\n`;\nexport const LI = styled.li`\n    margin: 0;\n    padding: 0;\n`;\n\nexport const A = styled.a`\n    &, &:hover, &:focus {\n        outline: none;\n        color: inherit;\n        text-decoration: none;\n    }\n`;","module.exports = __webpack_public_path__ + \"static/Bariol-Regular-b0d07df351f442860551405a4be58de7.eot\";","module.exports = __webpack_public_path__ + \"static/Bariol-Regular-4afd94f0fd93a1f63b46c6c6ad792f71.woff\";","module.exports = __webpack_public_path__ + \"static/Bariol-Regular-8a7d23d53f8d118e190c63e4e81a91fe.ttf\";","module.exports = __webpack_public_path__ + \"static/Bariol-Regular-75b90056f4cdf5a742897ec0a59569d7.svg\";","import React from 'react';\nimport { A, UL, LI } from '../components/default';\nimport styled from \"styled-components\";\n\nconst StyledNav = styled.nav`\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    padding: 20px 60px;\n    border-bottom: 1px solid #ddd;\n\n    @media all and (max-width: 600px) {\n        flex-direction: column;\n        padding: 20px 20px 10px 20px;\n    }\n`;\n\nconst Title = styled.div`\n    flex: 2;\n    font-family: \"Roboto\", \"Helvetica Neue\", \"Helvetica\", sans-serif;\n    font-size: 28px;\n`;\n\nconst NavLinks = styled(UL)`\n    flex: 10;\n    display: flex;\n    flex-direction: horizontal;\n    flex-wrap: wrap;\n    justify-content: flex-end;\n\n    @media all and (max-width: 600px) {\n        justify-content: flex-start;\n    }\n`;\n\nconst NavLink = styled(LI)`\n    display: flex;\n    flex-direction: horizontal;\n    text-align: center;\n    font-family: \"Bariol\", \"Helvetica Neue\", \"Helvetica\", sans-serif;\n    font-size: 16px;\n    padding: 0px 20px;\n\n    @media all and (max-width: 600px) {\n        display: block;\n        width: 100%;\n        font-size: 20px;\n        margin: 5px 0px;\n        padding: 10px 10px;\n        background-color: #eee;\n    }\n`;\n\nconst StyledA = styled(A)`\n    height: auto;\n    color: rgba(128, 165, 177, 1);\n\n    &:hover {\n        color: rgba(151, 195, 210, 1);\n    }\n\n    @media all and (max-width: 600px) {\n        width: 100%;\n    }\n`;\n\nconst Nav = (props) => {\n    return (\n        <StyledNav>\n            <Title>NOAH GILMORE</Title>\n            <NavLinks>\n                <NavLink><StyledA href=\"/\">HOME</StyledA></NavLink>\n                <NavLink><StyledA href=\"/blog/\">POSTS</StyledA></NavLink>\n            </NavLinks>\n        </StyledNav>\n    );\n};\n\nexport default Nav;"],"sourceRoot":""}