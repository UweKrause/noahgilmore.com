{"version":3,"sources":["webpack:///./src/components/BlogPost.jsx","webpack:///./src/components/MarkdownContent.jsx","webpack:///./src/pages/blog/nsobject-equatable.jsx","webpack:///./src/components/default.jsx","webpack:///./src/fonts/Bariol-Regular.eot","webpack:///./src/fonts/Bariol-Regular.woff","webpack:///./src/fonts/Bariol-Regular.ttf","webpack:///./src/fonts/Bariol-Regular.svg","webpack:///./src/components/Nav.jsx"],"names":["BlogPostContainer","styled","div","withConfig","displayName","componentId","TitleContainer","Heading","h1","DateContainer","p","BlogPost","props","react_default","a","createElement","Helmet","title","date","children","Container","MarkdownContent","render","react_markdown_default","source","this","componentDidMount","elements","ReactDOM","findDOMNode","querySelectorAll","i","length","hljs","highlightBlock","React","Component","content","MarkdownContent_MarkdownContent","Page","components_default","href","rel","type","src","Nav","components_BlogPost","GlobalStyle","createGlobalStyle","_templateObject","bariol_eot","bariol_woff","bariol_ttf","bariol_svg","Div","UL","nav","ul","LI","li","A","module","exports","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","_components_default__WEBPACK_IMPORTED_MODULE_1__","styled_components__WEBPACK_IMPORTED_MODULE_2__","StyledNav","Title","NavLinks","NavLink","StyledA"],"mappings":"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","file":"component---src-pages-blog-nsobject-equatable-jsx-4e695d48fcd6171ee7a1.js","sourcesContent":["import React from 'react';\nimport { Div, A } from '../components/default';\nimport styled from \"styled-components\";\nimport { Helmet } from \"react-helmet\";\n\nconst BlogPostContainer = styled.div`\n    padding: 60px 0;\n    margin: 0 auto;\n    width: 90%;\n    @media all and (min-width: 600px) {\n        max-width: 700px;\n        margin: auto;\n    }\n`;\n\nconst TitleContainer = styled.div`\n    width: 100%;\n    margin-bottom: 40px;\n`;\n\nconst Heading = styled.h1`\n    width: 100%;\n    font-family: \"Roboto\", \"Helvetica Neue\", \"Helvetica\", sans-serif;\n    font-size: 28px;\n    margin-bottom: 10px;\n`;\n\nconst DateContainer = styled.p`\n    font-family: \"Gentium Book Basic\", times, serif;\n    font-style: italic;\n    font-size: 16px;\n    color: #999;\n`;\n\nconst BlogPost = (props) => {\n    return (\n        <BlogPostContainer>\n            <Helmet>\n                <title>{props.title}</title>\n            </Helmet>\n            <TitleContainer>\n                <Heading>{props.title}</Heading>\n                <DateContainer>{props.date}</DateContainer>\n            </TitleContainer>\n            <div>\n                {props.children}\n            </div>\n        </BlogPostContainer>\n    )\n};\n\nexport default BlogPost;","import React from 'react';\nimport ReactDOM from \"react-dom\";\nimport { Div, A } from '../components/default';\nimport styled, { css } from \"styled-components\";\nimport ReactMarkdown from 'react-markdown';\nimport { Helmet } from \"react-helmet\";\nimport hljs from 'highlight.js';\n\nconst Container = styled.div`\n    .format-post-preview p, .format-post-preview li {\n        font-family: \"Open Sans\", arial, sans-serif;\n        font-size: 14px;\n        line-height: 14px;\n        line-height: 18px;\n        margin-top: 10px;\n        padding-bottom: 10px;\n    }\n    .format-post-preview p + p {\n        margin-top: 0;\n    }\n    .format-post-preview pre > code {\n        font-size: 12px;\n        line-height: 12px;\n        margin-top: 0;\n        margin-bottom: 0;\n    }\n    p, li {\n        margin: 0;\n        padding: 0;\n        font-family: \"Gentium Book Basic\", times, serif;\n        font-size: 21px;\n        line-height: 26px;\n        color: #333;\n        padding-bottom: 15px;\n        margin-top: 15px;\n    }\n    a {\n        color: #1A3F4B;\n    }\n    code {\n        font-family: monospace;\n        font-size: 16px; \n    }\n    pre {\n        display: block;\n        margin: 0;\n        padding: 0;\n        background: none;\n    }\n    pre > code {\n        display: block;\n        margin: 0;\n        padding: 0;\n        border: 1px solid #ddd;\n        border-radius: 2px;\n        padding: 10px;\n        margin-top: 10px;\n        font-family: monospace;\n        font-size: 14px;\n        white-space: pre-wrap;\n    }\n\n    pre > code.hljs {\n        border: none;\n    }\n    pre + p {\n        margin-top: 30px;\n    }\n    ol {\n        margin-left: 30px;\n    }\n    ol li {\n        list-style-type: decimal;\n    }\n    ul li {\n        list-style-type: square;\n        margin-left: 40px;\n    }\n    h1, h2, h3, h4, h5, h6 {\n        width: 100%;\n        font-family: \"Roboto\", \"Helvetica Neue\", \"Helvetica\", sans-serif;\n        margin-bottom: 10px;   \n        margin-top: 40px;\n    }\n    h1 {\n        font-size: 28px;\n    }\n    h2 {\n        font-size: 24px;\n    }\n    h3 {\n        font-size: 20px;\n    }\n`;\n\nexport default class MarkdownContent extends React.Component {\n    render() {\n        return (\n            <Container>\n                <ReactMarkdown source={this.props.source} />\n            </Container>\n        );\n    }\n\n    componentDidMount() {\n        const node = ReactDOM.findDOMNode(this);\n        var elements = node.querySelectorAll(\"pre code\");\n        // this next line has to be stuck in the 90's\n        // https://css-tricks.com/snippets/javascript/loop-queryselectorall-matches/\n        for (var i = 0; i < elements.length; i++) {\n            hljs.highlightBlock(elements[i]);\n        }\n    }\n}","import React from 'react';\nimport { Helmet } from \"react-helmet\";\nimport { Div, A, GlobalStyle } from '../../components/default';\nimport styled from \"styled-components\";\nimport Nav from '../../components/Nav';\nimport BlogPost from '../../components/BlogPost';\nimport MarkdownContent from '../../components/MarkdownContent';\n\nconst content = (<div>\n\n<MarkdownContent source={`\nSwift can be tricky sometimes. For example, what does the following print?\n\n\\`\\`\\`swift\nclass A: NSObject {\n  let x: Int\n\n  init(x: Int) {\n    self.x = x\n  }\n}\n\nfunc ==(left: A, right: A) -> Bool {\n  return left.x == right.x\n}\n\nprint(A(x: 1) == A(x: 1))\nprint([A(x: 1)] == [A(x: 1)])\n\\`\\`\\`\n\nPerhaps surprisingly, it's this:\n\\`\\`\\`nohighlight\ntrue\nfalse // huh?!\n\\`\\`\\`\n\n### Equatable conformance is hard\n\nWhy does comparing two arrays with equal contents return false? It turns out that:\n- Array is bridged to NSArray\n- NSArray doesn't declare a \\`==(_:_:)\\` function, so it falls back to NSObject's \\`==(_:_:)\\`, which calls \\`isEqual\\`\n- NSArray's \\`isEqual\\` [compares objects by casting to AnyHashable](https://github.com/apple/swift-corelibs-foundation/blob/0cbb3225660752987a6c2cf672886fca434d3b1d/Foundation/NSArray.swift#L310)\n\nWe can see that this is the problem by casting the objects to \\`AnyHashable\\` before comparing them:\n\n\\`\\`\\`swift\nprint(A(x: 1) as AnyHashable == A(x: 1) as AnyHashable)\n\\`\\`\\`\n\\`\\`\\`nohighlight\nfalse\n\\`\\`\\`\n\nApparently, doing this will use the NSObject implementation of \\`==(_:_:)\\` rather than the \\`A\\` one. The NSObject implementation of \\`==(_:_:)\\` checks isEqual, which returns false because the two elements aren't the same in memory. We can see this by adding an override:\n\n\\`\\`\\`swift\nclass B: NSObject {\n  let x: Int\n\n  init(x: Int) {\n    self.x = x\n  }\n\n  override func isEqual(_ object: Any?) -> Bool {\n    print(\"isEqual for B\")\n    return super.isEqual(object)\n  }\n}\n\nfunc ==(left: B, right: B) -> Bool {\n  print(\"== for B\")\n  return left.x == right.x\n}\n\\`\\`\\`\n\nThen,\n\n\\`\\`\\`swift\nprint([B(x: 1)] == [B(x: 1)])\n\\`\\`\\`\n\\`\\`\\`nohighlight\nisEqual for B\nfalse\n\\`\\`\\`\n\n### The fix\n\nAs far as I can tell, the best way to make an NSObject subclass use custom equality inside an array is to override isEqual:\n\n\\`\\`\\`swift\nclass C: NSObject {\n  let x: Int\n\n  init(x: Int) {\n    self.x = x\n  }\n\n  override func isEqual(_ object: Any?) -> Bool {\n    guard let object = object as? C else { return false }\n    return object == self\n  }\n}\n\nfunc ==(left: C, right: C) -> Bool {\n  print(\"== for C\")\n  return left.x == right.x\n}\n\\`\\`\\`\n\\`\\`\\`swift\nprint([C(x: 1)] == [C(x: 1)])\n\\`\\`\\`\n\\`\\`\\`nohighlight\n== for C\ntrue\n\\`\\`\\`\n    \nOf course, if we defined \\`A\\` as a \\`struct\\` or a regular \\`class\\` in the first place, there won't be \\`==(_:_:)\\` defined for \\`[A]\\`, which means the compiler would catch our mistake instead of falling back to something that might not work correctly.\n\nSigh. Working with NSObject can be tricky.\n\nA working playground with the code from this post can be found [here](https://github.com/noahsark769/code-examples/blob/ed9df41aae709eaeb4e334e3e9a5b1a650deef4d/swift/swift-nsobject-equatable.playground/Contents.swift).\n`} />\n\n</div>);\n\nfunction Page() {\n    return (\n        <div>\n            <GlobalStyle />\n            <Helmet>\n                <link href='http://fonts.googleapis.com/css?family=Roboto:700' rel='stylesheet' type='text/css' />\n                <link href=\"https://fonts.googleapis.com/css?family=Gentium+Book+Basic\" rel=\"stylesheet\" />\n                <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/styles/atom-one-light.min.css\" />\n                <script src=\"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/highlight.min.js\"></script>\n                <script src=\"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.4.0/languages/swift.min.js\"></script>\n            </Helmet>\n            <Nav />\n            <BlogPost title=\"NSObject Equality is Tricky\" date=\"November 13th, 2016\">\n                {content}\n            </BlogPost>\n        </div>\n    )\n}\n\nexport default Page;\n","import React from 'react';\nimport styled from \"styled-components\";\nimport { createGlobalStyle } from 'styled-components'\nimport bariol_eot from '../fonts/Bariol-Regular.eot';\nimport bariol_woff from '../fonts/Bariol-Regular.woff';\nimport bariol_ttf from '../fonts/Bariol-Regular.ttf';\nimport bariol_svg from '../fonts/Bariol-Regular.svg';\n\nexport const GlobalStyle = createGlobalStyle`\n    @font-face {\n        font-family: 'Bariol';\n        src: url('${bariol_eot}');\n        src: url('${bariol_eot}?#iefix') format('embedded-opentype'),\n             url('${bariol_woff}') format('woff'),\n             url('${bariol_ttf}') format('truetype'),\n             url('${bariol_svg}#svgBariolRegular') format('svg');\n    }\n\n    * {\n        box-sizing: border-box;\n    }\n`;\n\nexport const Div = styled.div``;\nexport const Nav = styled.nav``;\nexport const UL = styled.ul`\n    margin: 0;\n    padding: 0;\n`;\nexport const LI = styled.li`\n    margin: 0;\n    padding: 0;\n`;\n\nexport const A = styled.a`\n    &, &:hover, &:focus {\n        outline: none;\n        color: inherit;\n        text-decoration: none;\n    }\n`;","module.exports = __webpack_public_path__ + \"static/Bariol-Regular-b0d07df351f442860551405a4be58de7.eot\";","module.exports = __webpack_public_path__ + \"static/Bariol-Regular-4afd94f0fd93a1f63b46c6c6ad792f71.woff\";","module.exports = __webpack_public_path__ + \"static/Bariol-Regular-8a7d23d53f8d118e190c63e4e81a91fe.ttf\";","module.exports = __webpack_public_path__ + \"static/Bariol-Regular-75b90056f4cdf5a742897ec0a59569d7.svg\";","import React from 'react';\nimport { A, UL, LI } from '../components/default';\nimport styled from \"styled-components\";\n\nconst StyledNav = styled.nav`\n    display: flex;\n    flex-direction: horizontal;\n    flex-wrap: wrap;\n    padding: 20px 60px;\n    border-bottom: 1px solid #ddd;\n`;\n\nconst Title = styled.div`\n    flex: 2;\n    font-family: \"Roboto\", \"Helvetica Neue\", \"Helvetica\", sans-serif;\n    font-size: 28px;\n`;\n\nconst NavLinks = styled(UL)`\n    flex: 10;\n    display: flex;\n    flex-direction: horizontal;\n    flex-wrap: wrap;\n    justify-content: flex-end;\n`;\n\nconst NavLink = styled(LI)`\n    display: flex;\n    flex-direction: horizontal;\n    text-align: center;\n    font-family: \"Bariol\", \"Helvetica Neue\", \"Helvetica\", sans-serif;\n    font-size: 16px;\n    padding: 0px 20px;\n`;\n\nconst StyledA = styled(A)`\n    height: auto;\n    color: rgba(128, 165, 177, 1);\n\n    &:hover {\n        color: rgba(151, 195, 210, 1);\n    }\n`;\n\nconst Nav = (props) => {\n    return (\n        <StyledNav>\n            <Title>NOAH GILMORE</Title>\n            <NavLinks>\n                <NavLink><StyledA href=\"/\">HOME</StyledA></NavLink>\n                <NavLink><StyledA href=\"/blog/\">POSTS</StyledA></NavLink>\n            </NavLinks>\n        </StyledNav>\n    );\n};\n\nexport default Nav;"],"sourceRoot":""}