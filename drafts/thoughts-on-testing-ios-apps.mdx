How many types of testing mechanisms generally a team should adopt?
This is a great question and it depends a lot on the team and what you mean by mechanism. My opinion is that in general, you should at least have two types of tests:
Unit tests, which test small, usually pure input/output, “units of code”. E.g. you call didUpdateText() on your viewModel and you assert that its shouldShowCancelButton is true as a result (but maybe only if the text is non-empty? etc). Usually people use XCTest or Quick/Nimble for unit tests.
Integration tests, which test the app at a high level. My opinion on this is that integration tests should test large features, and generally be a replacement for manual QA. Don’t focus on testing every single network response code in an integration test, for example (unless it affects your UI in a big way) and don’t test the same status codes on every screen. People usually use XCUITest or a framework like KIF for integration tests
Is functional test, behavioural test and integration test mean same thing? We started with BDD but when my discusses they often say it's Integration test.
Lots of people use different words to describe different things, but most likely these all mean the same thing. “Behavioral” is with regards to testing the “end behavior” rather than the implementation, which is more what an integration test is about as well. You can take a “behavioral” approach to unit testing too, in my opinion - if you have a section of your code, like a NetworkService, you can focus on testing only what outside callers will interact with, not the internal state of the object (for example)
Does having unit test help adding integration test or any other type of testing mechanism later?
Besides the setup of test targets, the two don’t really impact each other very much directly, in my experience. One thing is that generally, if your code is well unit tested, you’ll avoid bugs which means your integration tests will break less, too. But generally, unit tests and integration tests are used for different purposes - one to verify that the code works as the developer expects (and doesn’t break later), one to verify that the app works as the user expects (and doesn’t break later).
During integration test does it have to be tested with real environment (e.g actually hitting a backend API) instead of mock environment?
I’ve worked in both situations, and there are pros and cons to this:
Pros: Using a real environment means your tests are always testing the same thing the users are interacting with. No need to keep mock responses up to date, and you can sometimes find bugs before deploying to prod because tests start failing.
Cons: It’s much easier to get flakey tests. The network on your CI machine might be slow, causing a timeout and a failure/you might accidentally write a new test which causes the server environment to become polluted which means other tests fail/flipping a feature flag can cause a test to start failing seemingly randomly. It can also be harder to set up the environment for testing, since you need to populate the backend with test data.
My opinion is that if you’re small enough and you have a relatively stable test environment, start with actually hitting the API. If it becomes an issue, you can move to mock responses, but make sure you still have processes in place (e.g. manual QA) to ensure that the _real_ thing is actually working too
Which type of testing is the most important to add to a codebase?
I mentioned before that unit and integration tests have different and separate values, but if you only have to add one, my opinion is that you should add unit testing. It’s a smaller scope, it introduces the team to testing in an easier way, you won’t have to deal with flakes as much, you can start testing the code you own without impacting others, and it still provides real value. Beware though: if you start introducing bad unit tests (like things which test the implementation rather than the interface, excessive mocking, tests which modify global variables and make other tests fail), it could start to feel like a burden to maintain the unit tests, which can actually turn the team off from testing, so I’d say definitely try to be careful about that.
