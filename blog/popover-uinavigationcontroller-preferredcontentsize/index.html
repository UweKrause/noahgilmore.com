<!DOCTYPE html><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="stylesheet" href="https://meyerweb.com/eric/tools/css/reset/reset.css"/><meta name="generator" content="Gatsby 2.13.67"/><title data-react-helmet="true">Popovers, UINavigationController, and preferredContentSize</title><link data-react-helmet="true" href="https://fonts.googleapis.com/css?family=Roboto:700" rel="stylesheet" type="text/css"/><link data-react-helmet="true" href="https://fonts.googleapis.com/css?family=Gentium+Book+Basic" rel="stylesheet"/><link data-react-helmet="true" rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.0/styles/atom-one-light.min.css"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="@noahsark769"/><meta data-react-helmet="true" property="og:url" content="https://noahgilmore.com/blog/popover-uinavigationcontroller-preferredcontentsize/"/><meta data-react-helmet="true" property="og:title" content="Popovers, UINavigationController, and preferredContentSize"/><meta data-react-helmet="true" property="og:description" content="In this post we&#x27;ll look at a very specific but tricky interaction in UIKit, one which took me multiple days to work out how to implement. It&#x27;s two view controllers of different sizes, pushed on a UINavigationController, which is presented as a popover. The view controllers..."/><meta data-react-helmet="true" name="description" content="In this post we&#x27;ll look at a very specific but tricky interaction in UIKit, one which took me multiple days to work out how to implement. It&#x27;s two view controllers of different sizes, pushed on a UINavigationController, which is presented as a popover. The view controllers..."/><style data-styled="iMCcXf  cVYlGn kTXgoV keWLqg bdgfEI hXDMKj eDGoCg bzyGkm cChEnP lkFayL kUaCUZ kdejuh gafZTn fUKgpU hMMDbz lJxmp iHypvy jLitGW ArWbr cdDtcW isFShQ ikpcIb kWZJua bYstva iuTZfP kUWdPE BghPk jbrLwc bESzeC xZrcw iUqscu cOjJgG kQKRzx gdeVmW irqfGc dbcHwh jGqQLX kktZTX" data-styled-version="4.3.2">
/* sc-component-id: CaptionedImage__Wrap-ceijyq-0 */
.hMMDbz{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin:20px 0;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}
/* sc-component-id: CaptionedImage__Container-ceijyq-1 */
.lJxmp{-webkit-flex:1;-ms-flex:1;flex:1;max-width:500px;}.iHypvy{-webkit-flex:1;-ms-flex:1;flex:1;max-width:300px;}
/* sc-component-id: CaptionedImage__Caption-ceijyq-2 */
.jLitGW{font-family:"Gentium Book Basic",times,serif;font-style:italic;font-size:16px;color:#999;margin-bottom:30px;margin-top:12px;text-align:center;} .jLitGW img{width:100%;margin-bottom:10px;}
/* sc-component-id: Instabug__Container-kuxoh4-0 */
.kUWdPE a,.kUWdPE a:visited{color:#60b5d1 !important;} .kUWdPE a:hover{color:#6bcfef;}
/* sc-component-id: Instabug__HeaderContainer-kuxoh4-1 */
.BghPk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;padding:0 0 5px 0;} @media all and (max-width:600px){.BghPk{padding-left:10px;padding-right:10px;}}
/* sc-component-id: Instabug__HeaderContent-kuxoh4-2 */
.jbrLwc{font-family:"Bariol","Helvetica Neue","Helvetica",sans-serif;font-size:11px;color:#666;margin:0;} @media (prefers-color-scheme:light){.jbrLwc{color:#aaa;}}
/* sc-component-id: Instabug__BodyContainer-kuxoh4-3 */
.bESzeC{border:2px solid rgba(128,165,177,1);border-radius:4px;padding:10px 10px 0 10px;background-color:#3a3a3a;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;} .bESzeC:hover{border-color:rgba(151,195,210,1);} @media all and (max-width:600px){.bESzeC{border-right:none;border-left:none;border-radius:0;}}
/* sc-component-id: Instabug__Spacer-kuxoh4-4 */
.kQKRzx{-webkit-flex:1;-ms-flex:1;flex:1;}
/* sc-component-id: Instabug__BodyAndContent-kuxoh4-5 */
.xZrcw{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;} @media all and (max-width:600px){.xZrcw{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}
/* sc-component-id: Instabug__BodyInner-kuxoh4-6 */
.irqfGc{-webkit-flex:6;-ms-flex:6;flex:6;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding-top:10px;-webkit-align-items:flex-end;-webkit-box-align:flex-end;-ms-flex-align:flex-end;align-items:flex-end;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;font-family:"Gentium Book Basic",times,serif;}
/* sc-component-id: Instabug__BodyContent-kuxoh4-7 */
.dbcHwh{padding-bottom:10px;font-size:16px !important;line-height:18px !important;margin:0 !important;padding-bottom:10px !important;color:white !important;} .dbcHwh:last-child{padding-bottom:0;}
/* sc-component-id: Instabug__LogoContainer-kuxoh4-8 */
.cOjJgG{max-width:200px;padding-top:10px;} @media all and (max-width:600px){.cOjJgG{margin-bottom:20px;}}
/* sc-component-id: Instabug__ScreenshotContainer-kuxoh4-9 */
.iUqscu{-webkit-flex:4;-ms-flex:4;flex:4;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;margin-right:20px;}
/* sc-component-id: Instabug__Screenshot-kuxoh4-10 */
@media all and (max-width:600px){.gdeVmW{display:none;}}
/* sc-component-id: Instabug__FooterContainer-kuxoh4-11 */
.kktZTX{text-align:right;} .kktZTX p{font-size:16px !important;line-height:18px !important;font-family:"Bariol","Helvetica Neue","Helvetica",sans-serif !important;font-size:12px;color:#666;margin-top:6px;}
/* sc-component-id: Instabug__CallToActionButton-kuxoh4-12 */
.jGqQLX{display:block;padding:10px 20px 10px 20px;background-color:rgba(128,165,177,1);font-family:"Roboto","Helvetica Neue","Helvetica",sans-serif;color:white !important;text-align:center;border-radius:4px;margin-bottom:10px;margin-top:10px;-webkit-text-decoration:none;text-decoration:none;}
/* sc-component-id: sc-global-1949001232 */
@font-face{font-family:'Bariol';src:url('/static/Bariol-Regular-b0d07df351f442860551405a4be58de7.eot');src:url('/static/Bariol-Regular-b0d07df351f442860551405a4be58de7.eot?#iefix') format('embedded-opentype'), url('/static/Bariol-Regular-4afd94f0fd93a1f63b46c6c6ad792f71.woff') format('woff'), url('/static/Bariol-Regular-8a7d23d53f8d118e190c63e4e81a91fe.ttf') format('truetype'), url('/static/Bariol-Regular-75b90056f4cdf5a742897ec0a59569d7.svg#svgBariolRegular') format('svg');} *{box-sizing:border-box !important;} body{margin:0;padding:0;} @media (prefers-color-scheme:dark){html,body{background-color:#2b2c2f;}}
/* sc-component-id: default__A-d4l1a1-5 */
.cdDtcW,.cdDtcW:hover,.cdDtcW:focus{outline:none;color:inherit;-webkit-text-decoration:none;text-decoration:none;}
/* sc-component-id: Nav__StyledNav-sc-1cm9dpf-0 */
.cVYlGn{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;padding:20px 60px;border-bottom:1px solid #ddd;} @media all and (max-width:600px){.cVYlGn{padding:20px;}} @media (prefers-color-scheme:dark){.cVYlGn{border-color:#777;}}
/* sc-component-id: Nav__Title-sc-1cm9dpf-1 */
.kTXgoV{-webkit-flex:2;-ms-flex:2;flex:2;font-family:"Roboto","Helvetica Neue","Helvetica",sans-serif;font-size:28px;font-display:swap;} @media (prefers-color-scheme:dark){.kTXgoV{color:#fff;}}
/* sc-component-id: Nav__NavLinks-sc-1cm9dpf-2 */
.bdgfEI{margin:0;padding:0;-webkit-flex:10;-ms-flex:10;flex:10;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:horizontal;-ms-flex-direction:horizontal;flex-direction:horizontal;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;height:100%;-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;}
/* sc-component-id: Nav__NavLink-sc-1cm9dpf-3 */
.hXDMKj{margin:0;padding:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:vertical;-ms-flex-direction:vertical;flex-direction:vertical;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;text-align:center;font-family:"Bariol","Helvetica Neue","Helvetica",sans-serif;font-size:16px;padding:0px 20px;}
/* sc-component-id: Nav__StyledA-sc-1cm9dpf-4 */
.keWLqg{height:auto;color:rgba(128,165,177,1);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:vertical;-ms-flex-direction:vertical;flex-direction:vertical;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-transition:0.2s ease-in-out;-moz-transition:0.2s ease-in-out;-o-transition:0.2s ease-in-out;-webkit-transition:0.2s ease-in-out;transition:0.2s ease-in-out;} .keWLqg,.keWLqg:hover,.keWLqg:focus{outline:none;color:inherit;-webkit-text-decoration:none;text-decoration:none;} .keWLqg:hover{color:rgba(151,195,210,1);}
/* sc-component-id: BlogPost__BlogPostContainer-gyfnna-0 */
.eDGoCg{padding:60px 0;margin:0 auto;width:90%;} @media all and (min-width:600px){.eDGoCg{max-width:1600px;margin:auto;}} @media all and (max-width:600px){.eDGoCg{width:100%;padding:20px 0;}}
/* sc-component-id: BlogPost__TitleContainer-gyfnna-1 */
.kUaCUZ{width:100%;margin-bottom:40px;}
/* sc-component-id: BlogPost__Heading-gyfnna-2 */
.kdejuh{width:100%;font-family:"Roboto","Helvetica Neue","Helvetica",sans-serif;font-size:34px;margin-bottom:10px;line-height:1.2em;} @media (prefers-color-scheme:dark){.kdejuh{color:#fff;}}
/* sc-component-id: BlogPost__DateContainer-gyfnna-3 */
.gafZTn{font-family:"Gentium Book Basic",times,serif;font-style:italic;font-size:16px;color:#999;}
/* sc-component-id: MarkdownContent__Container-zl3v0s-0 */
.fUKgpU p,.fUKgpU li{margin:0;padding:0;font-family:"Gentium Book Basic",times,serif;font-size:21px;line-height:29px;color:#333;padding-bottom:15px;margin-top:15px;} @media all and (max-width:600px){.fUKgpU p,.fUKgpU li{width:90%;margin:15px auto 0 auto;}} @media (prefers-color-scheme:dark){.fUKgpU p,.fUKgpU li{color:#fff;}} .fUKgpU blockquote{background-color:#faf9f7;border-left:4px solid #e5e4e1;padding:20px;font-style:italic;} @media (prefers-color-scheme:dark){.fUKgpU blockquote{background-color:#3f3f3f;}} .fUKgpU blockquote p{margin:0;padding:0;color:#555;} @media (prefers-color-scheme:dark){.fUKgpU blockquote p{color:#fff;}} .fUKgpU a{color:#1A3F4B;-webkit-transition:0.2s ease-in-out;-moz-transition:0.2s ease-in-out;-o-transition:0.2s ease-in-out;-webkit-transition:0.2s ease-in-out;transition:0.2s ease-in-out;} @media (prefers-color-scheme:dark){.fUKgpU a{color:#60b5d1;}} .fUKgpU a:hover{color:#47656E;} @media (prefers-color-scheme:dark){.fUKgpU a:hover{color:#6bcfef;}} .fUKgpU code{font-family:monospace;font-size:16px;padding:3px 5px;margin:0px 2px;} @media (prefers-color-scheme:dark){.fUKgpU code{color:#fff;}} .fUKgpU code:not(.vscode-highlight-code){font-family:monospace;font-size:16px;background-color:#faf9f7;border:1px solid #e5e4e1;padding:3px 5px;margin:0px 2px;color:#555;} @media (prefers-color-scheme:dark){.fUKgpU code:not(.vscode-highlight-code){color:#fff;background-color:#3f3f3f;}} .fUKgpU code:first-child{margin-left:0;} .fUKgpU pre{display:block;margin:0;padding:0;margin-top:10px;border:1px solid #e5e4e1;border-radius:2px;} @media all and (max-width:600px){.fUKgpU pre{width:100%;margin:10px auto 0 auto;border-left:none;border-right:none;border-radius:0;overflow-x:scroll;}} .fUKgpU pre > code{display:block;margin:0;padding:10px;font-family:monospace;font-size:14px;line-height:17px;white-space:pre-wrap;} @media all and (max-width:600px){.fUKgpU pre > code{font-size:15px;white-space:pre;padding:15px 5% 15px 5%;width:100%;}} .fUKgpU pre + p{margin-top:30px;} .fUKgpU ol{margin-left:30px;} @media all and (max-width:600px){.fUKgpU ol{width:90%;margin:0 auto 0 30px;}} @media (prefers-color-scheme:dark){.fUKgpU ol{color:#fff;}} .fUKgpU ol li{list-style-type:decimal;} .fUKgpU ul li{list-style-type:square;margin-left:40px;} @media all and (max-width:600px){.fUKgpU ul li{width:90%;margin:0 auto;}} @media (prefers-color-scheme:dark){.fUKgpU ul li{color:#fff;}} .fUKgpU h1,.fUKgpU h2,.fUKgpU h3,.fUKgpU h4,.fUKgpU h5,.fUKgpU h6{width:100%;font-family:"Roboto","Helvetica Neue","Helvetica",sans-serif;margin-bottom:10px;margin-top:40px;} @media all and (max-width:600px){.fUKgpU h1,.fUKgpU h2,.fUKgpU h3,.fUKgpU h4,.fUKgpU h5,.fUKgpU h6{width:90%;margin:40px auto 10px auto;}} @media (prefers-color-scheme:dark){.fUKgpU h1,.fUKgpU h2,.fUKgpU h3,.fUKgpU h4,.fUKgpU h5,.fUKgpU h6{color:#fff;}} .fUKgpU h1{font-size:28px;} .fUKgpU h2{font-size:24px;} .fUKgpU h3{font-size:20px;} .fUKgpU em{font-style:italic;} .fUKgpU strong{font-weight:bold;}
/* sc-component-id: EndButtons__Container-sc-2ta1su-0 */
.ArWbr{width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:horizontal;-ms-flex-direction:horizontal;flex-direction:horizontal;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-top:40px;}
/* sc-component-id: EndButtons__ButtonStyle-sc-2ta1su-1 */
.isFShQ{background-color:rgba(128,165,177,1);-webkit-transition:0.2s ease-in-out;-moz-transition:0.2s ease-in-out;-o-transition:0.2s ease-in-out;-webkit-transition:0.2s ease-in-out;transition:0.2s ease-in-out;width:100px;padding:10px 20px;text-align:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:vertical;-ms-flex-direction:vertical;flex-direction:vertical;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;border-radius:4px;margin-right:20px;} .isFShQ:hover{background-color:rgba(151,195,210,1);}.ikpcIb{background-color:rgba(128,165,177,1);-webkit-transition:0.2s ease-in-out;-moz-transition:0.2s ease-in-out;-o-transition:0.2s ease-in-out;-webkit-transition:0.2s ease-in-out;transition:0.2s ease-in-out;width:100px;padding:10px 20px;text-align:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:vertical;-ms-flex-direction:vertical;flex-direction:vertical;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;border-radius:4px;} .ikpcIb:hover{background-color:rgba(151,195,210,1);}
/* sc-component-id: Disqus__Wrapper-sc-1jjeqqj-0 */
.kWZJua{margin-top:80px;}
/* sc-component-id: BlogPageLayout__Container-sc-118ribu-0 */
@media (prefers-color-scheme:dark){.iMCcXf{background-color:#2b2c2f;}}
/* sc-component-id: BlogPageLayout__NonContent-sc-118ribu-1 */
@media all and (max-width:600px){.lkFayL{padding-right:5%;padding-left:5%;}}
/* sc-component-id: BlogPageLayout__InstabugContainer-sc-118ribu-2 */
.bYstva{min-width:430px;margin-left:60px;} @media all and (max-width:1200px){.bYstva{display:none;}}
/* sc-component-id: BlogPageLayout__PostContainerOuter-sc-118ribu-4 */
.bzyGkm{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;padding:20px;} @media all and (max-width:1200px){.bzyGkm{padding:0;}}
/* sc-component-id: BlogPageLayout__PostContainerInner-sc-118ribu-5 */
.cChEnP{display:block;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:100%;}</style><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link rel="alternate" type="application/rss+xml" title="Noah Gilmore&#x27;s Development Blog: iOS" href="/blog/ios.xml"/><link rel="alternate" type="application/rss+xml" title="Noah Gilmore&#x27;s Development Blog: Web" href="/blog/web.xml"/><link rel="alternate" type="application/rss+xml" title="Noah Gilmore&#x27;s Development Blog" href="/blog/rss.xml"/><link as="script" rel="preload" href="/webpack-runtime-857b3928f2d07f876267.js"/><link as="script" rel="preload" href="/app-3d1521efe5b145a1147b.js"/><link as="script" rel="preload" href="/0-17ed31d8ee8499fcdaa9.js"/><link as="script" rel="preload" href="/1-77da60a0cb3c82e43b9b.js"/><link as="script" rel="preload" href="/component---src-pages-blog-popover-uinavigationcontroller-preferredcontentsize-mdx-8dd3e4b094987d288bad.js"/><link as="fetch" rel="preload" href="/page-data/blog/popover-uinavigationcontroller-preferredcontentsize/page-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><div class="BlogPageLayout__Container-sc-118ribu-0 iMCcXf"><nav class="Nav__StyledNav-sc-1cm9dpf-0 cVYlGn"><div class="Nav__Title-sc-1cm9dpf-1 kTXgoV"><a href="/blog" class="default__A-d4l1a1-5 Nav__StyledA-sc-1cm9dpf-4 keWLqg">NOAH GILMORE</a></div><ul class="default__UL-d4l1a1-2 Nav__NavLinks-sc-1cm9dpf-2 bdgfEI"><li class="default__LI-d4l1a1-3 Nav__NavLink-sc-1cm9dpf-3 hXDMKj"><a aria-label="Blog Home" href="/blog" class="default__A-d4l1a1-5 Nav__StyledA-sc-1cm9dpf-4 keWLqg"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" color="rgba(128, 165, 177, 1)" size="24" style="color:rgba(128, 165, 177, 1)" height="24" width="24"><path d="M258.5 104.1c-1.5-1.2-3.5-1.2-5 0l-156 124.8c-.9.8-1.5 1.9-1.5 3.1v230c0 1.1.9 2 2 2h108c1.1 0 2-.9 2-2V322c0-1.1.9-2 2-2h92c1.1 0 2 .9 2 2v140c0 1.1.9 2 2 2h108c1.1 0 2-.9 2-2V232c0-1.2-.6-2.4-1.5-3.1l-156-124.8z"></path><path d="M458.7 204.2l-189-151.4C265.9 49.7 261 48 256 48s-9.9 1.7-13.7 4.8L160 119.7V77.5c0-1.1-.9-2-2-2H98c-1.1 0-2 .9-2 2v92.2l-42.7 35.1c-3.1 2.5-5.1 6.2-5.3 10.2-.2 4 1.3 7.9 4.1 10.7 2.6 2.6 6.1 4.1 9.9 4.1 3.2 0 6.3-1.1 8.8-3.1l183.9-148c.5-.4.9-.4 1.3-.4s.8.1 1.3.4l183.9 147.4c2.5 2 5.6 3.1 8.8 3.1 3.7 0 7.2-1.4 9.9-4.1 2.9-2.8 4.4-6.7 4.2-10.7-.3-4-2.2-7.7-5.4-10.2z"></path></svg></a></li><li class="default__LI-d4l1a1-3 Nav__NavLink-sc-1cm9dpf-3 hXDMKj"><a aria-label="Twitter" href="https://twitter.com/noahsark769" class="default__A-d4l1a1-5 Nav__StyledA-sc-1cm9dpf-4 keWLqg"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" color="rgba(128, 165, 177, 1)" size="24" style="color:rgba(128, 165, 177, 1)" height="24" width="24"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg></a></li><li class="default__LI-d4l1a1-3 Nav__NavLink-sc-1cm9dpf-3 hXDMKj"><a aria-label="App Store" href="https://itunes.apple.com/us/app/trestle-the-new-sudoku/id1300230302?mt=8" class="default__A-d4l1a1-5 Nav__StyledA-sc-1cm9dpf-4 keWLqg"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" color="rgba(128, 165, 177, 1)" size="24" style="color:rgba(128, 165, 177, 1)" height="24" width="24"><path d="M256 48C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48zm-78.9 296.9c-2.7 4.6-7.5 7.1-12.5 7.1-2.5 0-5-.6-7.3-2-6.9-4-9.2-12.8-5.2-19.7l14.2-23.6c1.5-2.5 4.1-4 7-4h2.1c10.3 0 17.5 6.2 19.6 12.2l-17.9 30zm120.2-46.4l-93 .1h-61.8c-8.2 0-14.8-6.8-14.4-15 .3-7.8 7.1-13.7 14.9-13.7h44.8l53.1-90.4-17.2-29.3c-3.9-6.7-2.2-15.5 4.4-19.7 7-4.5 16.2-2.2 20.3 4.8l9.2 15.7h.1l9.2-15.7c4.1-7 13.4-9.3 20.3-4.8 6.6 4.2 8.3 13 4.4 19.7l-17.2 29.3-16.7 28.5-36.3 61.9v.1h53.5c6.7 0 15.1 3.6 18.5 9.4l.3.6c3 5.1 4.7 8.6 4.7 13.7-.1 2.8-1.1 4.8-1.1 4.8zm72.2.1h-25.2v.1l18.4 31.3c4 6.8 2.1 15.8-4.8 20-2.3 1.4-4.9 2.1-7.5 2.1-5 0-9.8-2.6-12.5-7.1l-27.2-46.3-16.9-28.8-21.8-37.3c-6.4-10.9-6.7-24.5-.6-35.3 4.3-7.6 7.6-9.6 7.6-9.6l48.5 82.1h41.7c7.8 0 14.5 6 14.9 13.7.3 8.3-6.3 15.1-14.6 15.1z"></path></svg></a></li></ul></nav><div class="BlogPost__BlogPostContainer-gyfnna-0 eDGoCg"><div class="BlogPageLayout__PostContainerOuter-sc-118ribu-4 bzyGkm"><div class="BlogPageLayout__PostContainerInner-sc-118ribu-5 cChEnP"><div class="BlogPageLayout__NonContent-sc-118ribu-1 lkFayL"><div><div class="BlogPost__TitleContainer-gyfnna-1 kUaCUZ"><h1 class="BlogPost__Heading-gyfnna-2 kdejuh">Popovers, UINavigationController, and preferredContentSize</h1><p class="BlogPost__DateContainer-gyfnna-3 gafZTn">August 25, 2019</p></div></div></div><div class="MarkdownContent__Container-zl3v0s-0 fUKgpU"><p>In this post we&#x27;ll look at a very specific but tricky interaction in UIKit, one which took me multiple days to work out how to implement.</p><p>It&#x27;s two view controllers of different sizes, pushed on a <code>UINavigationController</code>, which is presented as a popover. The interaction has a few unique qualities:</p><ol><li>The view controllers have different sizes (defined by autolayout)</li><li>Only one of them displays a nav bar</li><li>The popover animates when their autolayout-defined sizes change</li><li>Including when they get pushed onto the nav stack, where the resize animation happens at the same time as the push animation</li></ol><div class="CaptionedImage__Wrap-ceijyq-0 hMMDbz"><div max="500" class="CaptionedImage__Container-ceijyq-1 lJxmp"><img style="width:100%" alt="Finished presentation of UIViewControllers with different content sizes inside a popover" src="/static/popover-finished-eee8d64b409a066d939c8373e702a4e3.gif"/><div class="CaptionedImage__Caption-ceijyq-2 jLitGW"></div></div></div><p>Surprisingly this is very tricky to implement in UIKit, and it ties together a lot of concepts that I wasn&#x27;t really familiar with until I ran into this case.</p><blockquote><p>The finished code for this interaction is available at <a href="https://github.com/noahsark769/NGPopoverForceResizeTest">NGPopoverForceResizeTest</a>. There&#x27;s also a summary at the bottom of this post.</p></blockquote><h1>Motivation</h1><p>At work, we do a fair amount of presenting view controllers as popovers to add context or more data to our existing iPad view. A common flow is the following:</p><ol><li>Present a small popover to add more context to something the user tapped.</li><li>When the user taps on a button in that popover, push on a new view controller with more information.</li></ol><p>UIKit provides the building blocks for this out of the box, but the kicker is when <em>the two view controllers are different sizes</em>.</p><p>Let&#x27;s assume we have two view controllers to present: one 300x300 with a red background and no navigation bar content, and one 600x400 with a green background and a nav bar title. Here&#x27;s what we want them to look like:</p><div class="CaptionedImage__Wrap-ceijyq-0 hMMDbz"><div max="300" class="CaptionedImage__Container-ceijyq-1 iHypvy"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden"><div style="width:100%;padding-bottom:105.82959641255604%"></div><img alt="Red view controller" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAABYlAAAWJQFJUiTwAAACCklEQVQ4y62Uy07bQBiFJ9euEY9QtY0qJCSKuqBClQh73oAHYJeiLljQZ2HJq3RRWjXXRrCpVIREwPY4NrGdzOmZS1KDKLgViy9z8flPzng8I+I4xoJItxGiKDLjLIuRpiSJkKWR7adWazSGXD0R4/EYhiDA2PMMke8hGHlon1xi8P0Sp2cBen2JPvvD3gjyijrfW+hNrfMRYRgilBJSKQSAQRKfDEZA9xoY9kdof/6F3rWdm2vyeu2hvURIdzmZID4+RrK3h2R/H0mrheRDC7OP5NMB0HwPvHuL2eGBmTPPNVrLmvjoyHhoLyH5E+j3tbEBCHEvyvG359NGAwEN5cKQa8+2t21xvQ5Vrd6mXLbcnafWGK6vm1B/DLlbWbNpDXVhLtWDUGsM19buMdzasktwokIUMZxRdKNbkpHUkTlu3Fi30yKGGUU9tmdkSH6QEzf+Sb6SvpuTzjB7yFCVK5iIOhPUkIgq+1VE4pnp23ENsRs/8g7tpkzLNSZ7wZSvme4l0zTwTaziVDw3dDj/RbzBQLziOyw9vuT5vxbZ5UKbov5hl1VRwyf9Dp8u4fzoVSpQpVIxqL119Pz8Wd7cLH5C7l4OKyu5hL5vbopkdxeqVsNseRlqaakQRsuadGcHQZJAey0SyosLhO02wm4XYadTDK1ljTw/R8DL1SZ0HW2qk/4XOpC+qOn1GxC0i+2pLwUoAAAAAElFTkSuQmCC" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition:opacity 0.5s;transition-delay:0.25s"/><noscript><picture><source srcSet="/static/d80c5a6d15c13f77c3d7a4572a11f333/d3809/red-controller.png 150w,
/static/d80c5a6d15c13f77c3d7a4572a11f333/fdbb0/red-controller.png 300w,
/static/d80c5a6d15c13f77c3d7a4572a11f333/1bf8f/red-controller.png 446w" sizes="(max-width: 446px) 100vw, 446px" /><img src="/static/d80c5a6d15c13f77c3d7a4572a11f333/1bf8f/red-controller.png" alt="Red view controller" style="position:absolute;top:0;left:0;transition:opacity 0.5s;transition-delay:0.5s;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><div class="CaptionedImage__Caption-ceijyq-2 jLitGW">SmallViewControllerNoNavBar</div></div></div><div class="CaptionedImage__Wrap-ceijyq-0 hMMDbz"><div max="500" class="CaptionedImage__Container-ceijyq-1 lJxmp"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden"><div style="width:100%;padding-bottom:83.50515463917526%"></div><img alt="Green view controller" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAABYlAAAWJQFJUiTwAAABpElEQVQ4y6WTz07CQBDGF4KJnjxqgvGm8BKEg/oqJl40RgXuHn0ESPBFPKvReDFREwP1bwzQlna3u6Bt93PbEoGKSmMmv+x0d/br7M4s4ZwjxBH48gcIwWF1HRh6hGk432LiEMYYbKcLmxswmTmEmrC4icdXE3eagetGG/daFwY1x+NGoIyCOMzGDXvFafcZ966Gpt9EY0BTargTt7h4O8dF+xxXrctwrjESM4rOdRBL/fGwf4St/gFKfgUlWVKUw7Gsxr2PfWyznQhnZ7A2TllWsCt3cSrOQDpUx7K/BBKYnEDc5M9xNVED0ZVgzsuFExmZQTowmUYSC/YF+4/FcSS46q2GEymZGmbVj/E+GB0FU/jDjIMEAr8u6pHgirfyXZArXmZAtFmQJ8XDHMjzbPTdUmvetIIYuTs6j1R7EamW4i2r/IUQJTEWN12GkwoSL8zUR5Z/VDS2Pv2RfxNCkjtMYpME815+2IcynZixPuzQDrJ+NnlmE6wqqsFbtrD5vomCW8CGu4E1dy0R6+56SNEt4sQ5Ua1GKXp2D8IW/yLQ4JTjE6RCeUhi91EvAAAAAElFTkSuQmCC" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition:opacity 0.5s;transition-delay:0.25s"/><noscript><picture><source srcSet="/static/29af07b3c26b824254b7c27969ab7538/d3809/green-controller.png 150w,
/static/29af07b3c26b824254b7c27969ab7538/fdbb0/green-controller.png 300w,
/static/29af07b3c26b824254b7c27969ab7538/59139/green-controller.png 600w,
/static/29af07b3c26b824254b7c27969ab7538/6e4a8/green-controller.png 776w" sizes="(max-width: 600px) 100vw, 600px" /><img src="/static/29af07b3c26b824254b7c27969ab7538/59139/green-controller.png" alt="Green view controller" style="position:absolute;top:0;left:0;transition:opacity 0.5s;transition-delay:0.5s;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><div class="CaptionedImage__Caption-ceijyq-2 jLitGW">LargeViewControllerWithNavBar</div></div></div><h1>preferredContentSize</h1><p>Let&#x27;s start with the red controller.</p><p>Setting up the width and height is doable with autolayout:</p><pre class="dark-default-dark vscode-highlight" data-language="swift"><code class="vscode-highlight-code"><span class="vscode-highlight-line"><span class="mtk4">override</span><span class="mtk1"> </span><span class="mtk4">func</span><span class="mtk1"> </span><span class="mtk11">viewDidLoad</span><span class="mtk1">() {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk3">// ...</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk12">view</span><span class="mtk1">.</span><span class="mtk12">widthAnchor</span><span class="mtk1">.</span><span class="mtk11">constraint</span><span class="mtk1">(</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        </span><span class="mtk11">equalToConstant</span><span class="mtk1">: </span><span class="mtk7">300</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    ).</span><span class="mtk12">isActive</span><span class="mtk1"> = </span><span class="mtk4">true</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk12">view</span><span class="mtk1">.</span><span class="mtk12">heightAnchor</span><span class="mtk1">.</span><span class="mtk11">constraint</span><span class="mtk1">(</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        </span><span class="mtk11">equalToConstant</span><span class="mtk1">: </span><span class="mtk7">300</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    ).</span><span class="mtk12">isActive</span><span class="mtk1"> = </span><span class="mtk4">true</span></span>
<span class="vscode-highlight-line"><span class="mtk1">}</span></span></code></pre><p>We&#x27;ll set the navigation bar hidden in <code>viewWillAppear</code>:</p><pre class="dark-default-dark vscode-highlight" data-language="swift"><code class="vscode-highlight-code"><span class="vscode-highlight-line"><span class="mtk4">override</span><span class="mtk1"> </span><span class="mtk4">func</span><span class="mtk1"> </span><span class="mtk11">viewWillAppear</span><span class="mtk1">(</span><span class="mtk11">_</span><span class="mtk1"> </span><span class="mtk12">animated</span><span class="mtk1">: </span><span class="mtk10">Bool</span><span class="mtk1">) {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">super</span><span class="mtk1">.</span><span class="mtk11">viewWillAppear</span><span class="mtk1">(animated)</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk12">navigationController</span><span class="mtk1">?.</span><span class="mtk11">setNavigationBarHidden</span><span class="mtk1">(</span><span class="mtk4">true</span><span class="mtk1">, </span><span class="mtk11">animated</span><span class="mtk1">: </span><span class="mtk4">false</span><span class="mtk1">)</span></span>
<span class="vscode-highlight-line"><span class="mtk1">}</span></span></code></pre><p>And, from the main controller, present our red view as a popover:</p><pre class="dark-default-dark vscode-highlight" data-language="swift"><code class="vscode-highlight-code"><span class="vscode-highlight-line"><span class="mtk4">let</span><span class="mtk1"> containerController = </span><span class="mtk11">UINavigationController</span><span class="mtk1">(</span><span class="mtk11">rootViewController</span><span class="mtk1">: firstVC)</span></span>
<span class="vscode-highlight-line"><span class="mtk1">containerController.</span><span class="mtk12">modalPresentationStyle</span><span class="mtk1"> = .</span><span class="mtk12">popover</span></span>
<span class="vscode-highlight-line"><span class="mtk3">// ... set the sourceView, sourceRect, etc</span></span>
<span class="vscode-highlight-line"><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk11">present</span><span class="mtk1">(containerController, </span><span class="mtk11">animated</span><span class="mtk1">: </span><span class="mtk4">true</span><span class="mtk1">)</span></span></code></pre><p>Unfortunately, this doesn&#x27;t exactly produce the effect we&#x27;re going for:</p><div class="CaptionedImage__Wrap-ceijyq-0 hMMDbz"><div max="500" class="CaptionedImage__Container-ceijyq-1 lJxmp"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden"><div style="width:100%;padding-bottom:76.07476635514018%"></div><img alt="Red view controller displaying in a popover with the wrong height and width" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAABPUlEQVQ4y+WUP27CMBTG86/MrZDYgImVBcQtOECXLh2KkKq0B+EaSAh2jsEZqJi6IBLbiePYX59NI9ohldKy1dKn78l+76dny7ZnjIGV1hqyKCA4ByNPATDSuwH2R+DAgeRzzq5xysuyDEopV2+Hda8KyrJEJgRSKcF2O8j5HDKOIZ5jsPsHsMcn5C+vkLMZssUCSZo6aEH59UDGXBd8uQQ8r1blYIDkeAQjoMxzt7t6IMVis4GmQtGKkEUBRBggJS9bLQdUk0kTICDWaygqfPPb2Ht3OHi3zlUQnYGjUbMOOQFtofZvqNOIFDqZIDhv+bdA+N/P7s9A4/sw1itdC3j1Dv8DkC52BXDQSmF4Bo7HDYD26a1WPz+94bABkBb5dgvd6UD3etDd7kX9PnS7jWI6RXI6gVG+pM/hK/ADmnnGBuW1gsAAAAAASUVORK5CYII=" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition:opacity 0.5s;transition-delay:0.25s"/><noscript><picture><source srcSet="/static/8a2c59f3755bb29e1fb5e2c74ef1b2f9/d3809/red-controller-1.png 150w,
/static/8a2c59f3755bb29e1fb5e2c74ef1b2f9/fdbb0/red-controller-1.png 300w,
/static/8a2c59f3755bb29e1fb5e2c74ef1b2f9/59139/red-controller-1.png 600w,
/static/8a2c59f3755bb29e1fb5e2c74ef1b2f9/cb30f/red-controller-1.png 900w,
/static/8a2c59f3755bb29e1fb5e2c74ef1b2f9/3ed65/red-controller-1.png 1070w" sizes="(max-width: 600px) 100vw, 600px" /><img src="/static/8a2c59f3755bb29e1fb5e2c74ef1b2f9/59139/red-controller-1.png" alt="Red view controller displaying in a popover with the wrong height and width" style="position:absolute;top:0;left:0;transition:opacity 0.5s;transition-delay:0.5s;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><div class="CaptionedImage__Caption-ceijyq-2 jLitGW">Interesting</div></div></div><h2>preferredContentSize + autolayout</h2><p>Our red view controller doesn&#x27;t have the right size because when <code>UIViewController</code>s are presented as popovers, the popover&#x27;s size is <a href="https://developer.apple.com/documentation/uikit/uiviewcontroller/1621476-preferredcontentsize">determined by the controller&#x27;s <code>preferredContentSize</code></a>. Since we haven&#x27;t set <code>self.preferredContentSize</code> in our controller, the system uses the default: on iOS 12 with a 12.9 inch iPad, this is 375x636 points.</p><p>To fix this, we have to trigger a layout pass to determine our autolayout-defined size, and we can set that as our preferred size, as many posts online <a href="https://useyourloaf.com/blog/self-sizing-child-views/">have</a> <a href="https://stackoverflow.com/questions/29128271/autolayout-and-uipopovercontroller">detailed</a>:</p><pre class="dark-default-dark vscode-highlight" data-language="swift"><code class="vscode-highlight-code"><span class="vscode-highlight-line"><span class="mtk4">override</span><span class="mtk1"> </span><span class="mtk4">func</span><span class="mtk1"> </span><span class="mtk11">viewWillAppear</span><span class="mtk1">(</span><span class="mtk11">_</span><span class="mtk1"> </span><span class="mtk12">animated</span><span class="mtk1">: </span><span class="mtk10">Bool</span><span class="mtk1">) {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk3">// ...</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk12">preferredContentSize</span><span class="mtk1"> = </span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk12">view</span><span class="mtk1">.</span><span class="mtk11">systemLayoutSizeFitting</span><span class="mtk1">(</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        UIView.</span><span class="mtk12">layoutFittingCompressedSize</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    )</span></span>
<span class="vscode-highlight-line"><span class="mtk1">}</span></span></code></pre><p>Assuming we&#x27;ve implemented the same thing in our green view controller (with different height and width), we now get our controllers displaying their correct sizes! </p><p>Unfortunately, the animation is a little weird - our green controller starts out 300x300, <em>then</em> transitions to 600x400:</p><div class="CaptionedImage__Wrap-ceijyq-0 hMMDbz"><div max="500" class="CaptionedImage__Container-ceijyq-1 lJxmp"><img style="width:100%" alt="Red view controller with the right size, pushing on a green view controller, whose size starts the same as the red controller but expands when finished pushing." src="/static/popover-animation-1-91e457a2371ce65679fed7cd7638c6d7.gif"/><div class="CaptionedImage__Caption-ceijyq-2 jLitGW">Also interesting</div></div></div><h1>UINavigationController animations</h1><p>Apparently, <code>UINavigationController</code> queues the animations for pushing on a new view controller and setting its own <code>preferredContentSize</code> based on the controller being pushed, so the push animation and the resize animation happen in series. Ideally, we&#x27;d like these animations to happen simultaneously.</p><p>After quite a bit of spelunking online, I realized that <code>UINavigationController</code> just doesn&#x27;t support this use case. However, I stumbled across <a href="https://github.com/fatuhoku/Resize-Popover-with-embedded-UINavigationController">this example</a> by <a href="http://hokshunpoon.me/">Hok Shun Poon</a>, which noted that you can get the resize to happen at the same time if you encapsulate the <code>UINavigationController</code> in a parent view controller!</p><p>The flow looks like this:</p><ol><li>We have a parent <code>UIViewController</code> <a href="https://useyourloaf.com/blog/container-view-controllers/">wrapping</a> our <code>UINavigationController</code>.</li><li>When the new controller appears, we&#x27;ll set the wrapper view controller&#x27;s <code>preferredContentSize</code> to mirror the child&#x27;s <code>preferredContentSize</code> using <code>popoverPresentationController</code>.</li></ol><h2>Wrapping the nav controller</h2><p>Our wrapper controller looks like this:</p><pre class="dark-default-dark vscode-highlight" data-language="swift"><code class="vscode-highlight-code"><span class="vscode-highlight-line"><span class="mtk4">final</span><span class="mtk1"> </span><span class="mtk4">class</span><span class="mtk1"> </span><span class="mtk10">PopoverPushController</span><span class="mtk1">: UIViewController {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">private</span><span class="mtk1"> </span><span class="mtk4">let</span><span class="mtk1"> wrappedNavigationController: PopoverPushNavigationController</span></span>
<span class="vscode-highlight-line"><span class="mtk1"></span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">init</span><span class="mtk1">(</span><span class="mtk11">rootViewController</span><span class="mtk1">: UIViewController) {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        </span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk12">wrappedNavigationController</span><span class="mtk1"> = </span><span class="mtk11">PopoverPushNavigationController</span><span class="mtk1">(</span></span>
<span class="vscode-highlight-line"><span class="mtk1">            </span><span class="mtk11">rootViewController</span><span class="mtk1">: rootViewController</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        )</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        </span><span class="mtk4">super</span><span class="mtk1">.</span><span class="mtk4">init</span><span class="mtk1">(</span><span class="mtk11">nibName</span><span class="mtk1">: </span><span class="mtk4">nil</span><span class="mtk1">, </span><span class="mtk11">bundle</span><span class="mtk1">: </span><span class="mtk4">nil</span><span class="mtk1">)</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        </span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk12">wrappedNavigationController</span><span class="mtk1">.</span><span class="mtk12">delegate</span><span class="mtk1"> = </span><span class="mtk4">self</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    }</span></span>
<span class="vscode-highlight-line"><span class="mtk1"></span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">override</span><span class="mtk1"> </span><span class="mtk4">func</span><span class="mtk1"> </span><span class="mtk11">viewDidLoad</span><span class="mtk1">() {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        </span><span class="mtk4">super</span><span class="mtk1">.</span><span class="mtk11">viewDidLoad</span><span class="mtk1">()</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        wrappedNavigationController.</span><span class="mtk11">willMove</span><span class="mtk1">(</span><span class="mtk11">toParent</span><span class="mtk1">: </span><span class="mtk4">self</span><span class="mtk1">)</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        </span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk11">addChild</span><span class="mtk1">(wrappedNavigationController)</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        </span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk12">view</span><span class="mtk1">.</span><span class="mtk11">addSubview</span><span class="mtk1">(wrappedNavigationController.</span><span class="mtk12">view</span><span class="mtk1">)</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    }</span></span>
<span class="vscode-highlight-line"><span class="mtk1"></span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk3">// ...</span></span>
<span class="vscode-highlight-line"><span class="mtk1">}</span></span></code></pre><p>When our container controller&#x27;s view loads, we add the navigation controller&#x27;s view as a subview, after using <code>willMove(toParent:)</code> and <code>addChild()</code> to <a href="https://developer.apple.com/documentation/uikit/uiviewcontroller/1621381-willmove">add the navigation controller as a child view controller</a>.</p><p>We also need the implementation of <code>viewWillAppear</code> to set the wrapper controller&#x27;s content size. Luckily we can access the wrapper controller using <code>popoverPresentationController</code>&#x27;s <code>presentedViewController</code>, even though it&#x27;s two levels up:</p><pre class="dark-default-dark vscode-highlight" data-language="swift"><code class="vscode-highlight-code"><span class="vscode-highlight-line"><span class="mtk4">override</span><span class="mtk1"> </span><span class="mtk4">func</span><span class="mtk1"> </span><span class="mtk11">viewWillAppear</span><span class="mtk1">(</span><span class="mtk11">_</span><span class="mtk1"> </span><span class="mtk12">animated</span><span class="mtk1">: </span><span class="mtk10">Bool</span><span class="mtk1">) {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk3">// ...</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">let</span><span class="mtk1"> contentSize = </span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk12">view</span><span class="mtk1">.</span><span class="mtk11">systemLayoutSizeFitting</span><span class="mtk1">(</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        UIView.</span><span class="mtk12">layoutFittingCompressedSize</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    )</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk12">preferredContentSize</span><span class="mtk1"> = contentSize</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk12">popoverPresentationController</span><span class="mtk1">?</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        .</span><span class="mtk12">presentedViewController</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        .</span><span class="mtk12">preferredContentSize</span><span class="mtk1"> = contentSize</span></span>
<span class="vscode-highlight-line"><span class="mtk1">}</span></span></code></pre><p>And finally, we&#x27;ll change our presentation code to present the <code>PopoverPushController</code> wrapper instead of the regular navigation controller:</p><pre class="dark-default-dark vscode-highlight" data-language="swift"><code class="vscode-highlight-code"><span class="vscode-highlight-line"><span class="mtk4">let</span><span class="mtk1"> containerController = </span><span class="mtk11">PopoverPushController</span><span class="mtk1">(</span><span class="mtk11">rootViewController</span><span class="mtk1">: firstVC)</span></span>
<span class="vscode-highlight-line"><span class="mtk1">containerController.</span><span class="mtk12">modalPresentationStyle</span><span class="mtk1"> = .</span><span class="mtk12">popover</span></span>
<span class="vscode-highlight-line"><span class="mtk3">// ... set the sourceView, sourceRect, etc</span></span>
<span class="vscode-highlight-line"><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk11">present</span><span class="mtk1">(containerController, </span><span class="mtk11">animated</span><span class="mtk1">: </span><span class="mtk4">true</span><span class="mtk1">)</span></span></code></pre><p>No we have the simultaneous animation we want!</p><div class="CaptionedImage__Wrap-ceijyq-0 hMMDbz"><div max="500" class="CaptionedImage__Container-ceijyq-1 lJxmp"><img style="width:100%" alt="Red view controller transitioning to green view controller with size animating at the same time as the push animation." src="/static/popover-animation-2-99de52720a173cde44bb20d50736999b.gif"/><div class="CaptionedImage__Caption-ceijyq-2 jLitGW">🎉</div></div></div><h2>Updating the size</h2><p>Everything&#x27;s well and good now, so we can implement the last part of the interaction: resizing the green controller on button tap. Our code isn&#x27;t particularly complicated, but we&#x27;ll use the same autolayout technique from the red controller:</p><pre class="dark-default-dark vscode-highlight" data-language="swift"><code class="vscode-highlight-code"><span class="vscode-highlight-line"><span class="mtk4">func</span><span class="mtk1"> </span><span class="mtk11">setPreferredContentSizeFromAutolayout</span><span class="mtk1">() {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk12">preferredContentSize</span><span class="mtk1"> = </span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk12">view</span><span class="mtk1">.</span><span class="mtk11">systemLayoutSizeFitting</span><span class="mtk1">(</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        UIView.</span><span class="mtk12">layoutFittingCompressedSize</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    )</span></span>
<span class="vscode-highlight-line"><span class="mtk1">}</span></span>
<span class="vscode-highlight-line"><span class="mtk1"></span></span>
<span class="vscode-highlight-line"><span class="mtk4">var</span><span class="mtk1"> isExpanded: </span><span class="mtk10">Bool</span><span class="mtk1"> = </span><span class="mtk4">false</span><span class="mtk1"> {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">didSet</span><span class="mtk1"> {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        </span><span class="mtk4">let</span><span class="mtk1"> constant = </span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk12">isExpanded</span><span class="mtk1"> ? </span><span class="mtk7">600</span><span class="mtk1"> : </span><span class="mtk7">400</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        </span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk12">heightConstraint</span><span class="mtk1">.</span><span class="mtk12">constant</span><span class="mtk1"> = constant</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        </span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk11">setPreferredContentSizeFromAutolayout</span><span class="mtk1">()</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    }</span></span>
<span class="vscode-highlight-line"><span class="mtk1">}</span></span>
<span class="vscode-highlight-line"><span class="mtk1"></span></span>
<span class="vscode-highlight-line"><span class="mtk4">@objc</span><span class="mtk1"> </span><span class="mtk4">private</span><span class="mtk1"> </span><span class="mtk4">func</span><span class="mtk1"> </span><span class="mtk11">didTap</span><span class="mtk1">() {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk12">isExpanded</span><span class="mtk1"> = !</span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk12">isExpanded</span></span>
<span class="vscode-highlight-line"><span class="mtk1">}</span></span></code></pre><p>But now we&#x27;ve got a new problem: the popover size doesn&#x27;t animate!</p><div class="CaptionedImage__Wrap-ceijyq-0 hMMDbz"><div max="500" class="CaptionedImage__Container-ceijyq-1 lJxmp"><img style="width:100%" alt="Green view controller updating height, but without animation." src="/static/popover-animation-3-5cee60f8fce36a91b11012c39d5dedaf.gif"/><div class="CaptionedImage__Caption-ceijyq-2 jLitGW">We were expecting a smooth animation</div></div></div><h2>Informing the presented view controller</h2><p>The issue we have here is that our green view controller is changing its <code>preferredContentSize</code>, but <em>the popover view controller doesn&#x27;t know it changed</em>. We&#x27;ll use the same technique that we used for setting the popover view controller&#x27;s content size when the green view initially appeared (using <code>popoverPresentationController</code>):</p><pre class="dark-default-dark vscode-highlight" data-language="swift"><code class="vscode-highlight-code"><span class="vscode-highlight-line"><span class="mtk4">func</span><span class="mtk1"> </span><span class="mtk11">setPreferredContentSizeFromAutolayout</span><span class="mtk1">() {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">let</span><span class="mtk1"> contentSize = </span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk12">view</span><span class="mtk1">.</span><span class="mtk11">systemLayoutSizeFitting</span><span class="mtk1">(</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        UIView.</span><span class="mtk12">layoutFittingCompressedSize</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    )</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk12">preferredContentSize</span><span class="mtk1"> = contentSize</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk12">popoverPresentationController</span><span class="mtk1">?</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        .</span><span class="mtk12">presentedViewController</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        .</span><span class="mtk12">preferredContentSize</span><span class="mtk1"> = contentSize</span></span>
<span class="vscode-highlight-line"><span class="mtk1">}</span></span></code></pre><p>Now our interaction finally works as expected!</p><div class="CaptionedImage__Wrap-ceijyq-0 hMMDbz"><div max="500" class="CaptionedImage__Container-ceijyq-1 lJxmp"><img style="width:100%" alt="Finished presentation of UIViewControllers with different content sizes inside a popover" src="/static/popover-finished-eee8d64b409a066d939c8373e702a4e3.gif"/><div class="CaptionedImage__Caption-ceijyq-2 jLitGW">🎉🎉</div></div></div><h1>Conclusion</h1><p>Hopefully this was a helpful look into the world of <code>preferredContentSize</code>, view controller wrapping, and UIKit popovers. Here&#x27;s a tl;dr:</p><ol><li>To define the size of your popover with autolayout, set <code>preferredContentSize</code> to the result of <code>systemLayoutSizeFitting</code></li><li>To animate popover size updates at the same time as navigation controller animations, wrap your <code>UINavigationController</code> in a <code>PopoverPushController</code> (see code below)</li><li>When you change your controller&#x27;s <code>preferredContentSize</code>, be sure to change the <code>preferredContentSize</code> of your controller&#x27;s <code>popoverPresentationController</code>&#x27;s <code>presentedViewController</code> as well</li></ol><p>Though this solution takes some time to explain, I think it ends up being pretty clean:</p><ol><li>No <code>UINavigationController</code> subclass 🎉</li><li>No need to implement <code>UINavigationControllerDelegate</code> - you can even modify <code>PopoverPushController</code> to accept your own navigation controller, along with your own delegate 😮</li><li>No need to set <code>preferredContentSize</code> except when the size actually changes ✅</li><li>If you make the width and height constraints have <code>priority = .defaultHigh</code>, no unsatisfiable constraint warnings clogging your logs 💪</li></ol><p>With more plumbing, it&#x27;s possible to implement the same interaction without having to call into <code>self.popoverPresentationController</code> - you can have a <code>UINavigationController</code> subclass implement <code>preferredContentSizeWillChange</code>, and have it set the navgation controller&#x27;s content size, which will be intercepted by <code>PopoverPushController</code>&#x27;s <code>preferredContentSizeWillChange</code>. You can also provide a <code>UINavigationControllerDelegate</code> to avoid setting the popover controller&#x27;s content size in <code>viewWillAppear</code>.</p><p>Ultimately though, it&#x27;s better to do whatever feels more workable for your use case. I prefer using the <code>popoverPresentationController</code> because it feels cleaner to me, but if you think differently, <a href="https://twitter.com/noahsark769">let me know</a>.</p><h2>Code</h2><p>All the code is available at <a href="https://github.com/noahsark769/NGPopoverForceResizeTest">NGPopoverForceResizeTest</a>.</p><p>Here&#x27;s the full implementation of the nav controller wrapper:</p><pre class="dark-default-dark vscode-highlight" data-language="swift"><code class="vscode-highlight-code"><span class="vscode-highlight-line"><span class="mtk4">final</span><span class="mtk1"> </span><span class="mtk4">class</span><span class="mtk1"> </span><span class="mtk10">PopoverPushController</span><span class="mtk1">: UIViewController {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">private</span><span class="mtk1"> </span><span class="mtk4">let</span><span class="mtk1"> wrappedNavigationController: UINavigationController</span></span>
<span class="vscode-highlight-line"><span class="mtk1"></span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">init</span><span class="mtk1">(</span><span class="mtk11">rootViewController</span><span class="mtk1">: UIViewController) {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        </span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk12">wrappedNavigationController</span><span class="mtk1"> = </span><span class="mtk11">UINavigationController</span><span class="mtk1">(</span><span class="mtk11">rootViewController</span><span class="mtk1">: rootViewController)</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        </span><span class="mtk4">super</span><span class="mtk1">.</span><span class="mtk4">init</span><span class="mtk1">(</span><span class="mtk11">nibName</span><span class="mtk1">: </span><span class="mtk4">nil</span><span class="mtk1">, </span><span class="mtk11">bundle</span><span class="mtk1">: </span><span class="mtk4">nil</span><span class="mtk1">)</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    }</span></span>
<span class="vscode-highlight-line"><span class="mtk1"></span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">required</span><span class="mtk1"> </span><span class="mtk4">init?</span><span class="mtk1">(</span><span class="mtk11">coder</span><span class="mtk1"> </span><span class="mtk12">aDecoder</span><span class="mtk1">: NSCoder) {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        </span><span class="mtk11">fatalError</span><span class="mtk1">(</span><span class="mtk8">&quot;init(coder:) has not been implemented&quot;</span><span class="mtk1">)</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    }</span></span>
<span class="vscode-highlight-line"><span class="mtk1"></span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">override</span><span class="mtk1"> </span><span class="mtk4">func</span><span class="mtk1"> </span><span class="mtk11">viewDidLoad</span><span class="mtk1">() {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        </span><span class="mtk4">super</span><span class="mtk1">.</span><span class="mtk11">viewDidLoad</span><span class="mtk1">()</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        wrappedNavigationController.</span><span class="mtk11">willMove</span><span class="mtk1">(</span><span class="mtk11">toParent</span><span class="mtk1">: </span><span class="mtk4">self</span><span class="mtk1">)</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        </span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk11">addChild</span><span class="mtk1">(wrappedNavigationController)</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        </span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk12">view</span><span class="mtk1">.</span><span class="mtk11">addSubview</span><span class="mtk1">(wrappedNavigationController.</span><span class="mtk12">view</span><span class="mtk1">)</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    }</span></span>
<span class="vscode-highlight-line"><span class="mtk1">}</span></span></code></pre><style class="vscode-highlight-styles">.dark-default-dark {
background-color: #1E1E1E;
color: #D4D4D4;
}

.dark-default-dark .mtk1 { color: #D4D4D4; }
.dark-default-dark .mtk2 { color: #1E1E1E; }
.dark-default-dark .mtk3 { color: #6A9955; }
.dark-default-dark .mtk4 { color: #569CD6; }
.dark-default-dark .mtk5 { color: #D16969; }
.dark-default-dark .mtk6 { color: #D7BA7D; }
.dark-default-dark .mtk7 { color: #B5CEA8; }
.dark-default-dark .mtk8 { color: #CE9178; }
.dark-default-dark .mtk9 { color: #646695; }
.dark-default-dark .mtk10 { color: #4EC9B0; }
.dark-default-dark .mtk11 { color: #DCDCAA; }
.dark-default-dark .mtk12 { color: #9CDCFE; }
.dark-default-dark .mtk13 { color: #000080; }
.dark-default-dark .mtk14 { color: #F44747; }
.dark-default-dark .mtk15 { color: #C586C0; }
.dark-default-dark .mtk16 { color: #6796E6; }
.dark-default-dark .mtk17 { color: #808080; }
.dark-default-dark .mtki { font-style: italic; }
.dark-default-dark .mtkb { font-weight: bold; }
.dark-default-dark .mtku { text-decoration: underline; text-underline-position: under; }</style></div><div class="BlogPageLayout__NonContent-sc-118ribu-1 lkFayL"><div class="EndButtons__Container-sc-2ta1su-0 ArWbr"><a href="https://twitter.com/intent/tweet?text=Post%20by%20%40noahsark769%3A%20Popovers%2C%20UINavigationController%2C%20and%20preferredContentSize%20https%3A%2F%2Fnoahgilmore.com%2Fblog%2Fpopover-uinavigationcontroller-preferredcontentsize%2F" target="_blank" aria-label="Twitter" class="default__A-d4l1a1-5 cdDtcW"><div class="EndButtons__ButtonStyle-sc-2ta1su-1 isFShQ"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" size="24" color="white" style="color:white" height="24" width="24"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg></div></a><a href="/blog" aria-label="Blog homepage" class="default__A-d4l1a1-5 cdDtcW"><div class="EndButtons__ButtonStyle-sc-2ta1su-1 ikpcIb"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" size="24" color="white" style="color:white" height="24" width="24"><path d="M258.5 104.1c-1.5-1.2-3.5-1.2-5 0l-156 124.8c-.9.8-1.5 1.9-1.5 3.1v230c0 1.1.9 2 2 2h108c1.1 0 2-.9 2-2V322c0-1.1.9-2 2-2h92c1.1 0 2 .9 2 2v140c0 1.1.9 2 2 2h108c1.1 0 2-.9 2-2V232c0-1.2-.6-2.4-1.5-3.1l-156-124.8z"></path><path d="M458.7 204.2l-189-151.4C265.9 49.7 261 48 256 48s-9.9 1.7-13.7 4.8L160 119.7V77.5c0-1.1-.9-2-2-2H98c-1.1 0-2 .9-2 2v92.2l-42.7 35.1c-3.1 2.5-5.1 6.2-5.3 10.2-.2 4 1.3 7.9 4.1 10.7 2.6 2.6 6.1 4.1 9.9 4.1 3.2 0 6.3-1.1 8.8-3.1l183.9-148c.5-.4.9-.4 1.3-.4s.8.1 1.3.4l183.9 147.4c2.5 2 5.6 3.1 8.8 3.1 3.7 0 7.2-1.4 9.9-4.1 2.9-2.8 4.4-6.7 4.2-10.7-.3-4-2.2-7.7-5.4-10.2z"></path></svg></div></a></div><div class="Disqus__Wrapper-sc-1jjeqqj-0 kWZJua"><div id="disqus_thread"></div></div></div></div><div class="BlogPageLayout__InstabugContainer-sc-118ribu-2 bYstva"><div class="BlogPageLayout__InstabugInner-sc-118ribu-3 iuTZfP"><div class="sponsorship-opt-out-point"><div class="Instabug__Container-kuxoh4-0 kUWdPE"><div class="Instabug__HeaderContainer-kuxoh4-1 BghPk"><div class="Instabug__HeaderContent-kuxoh4-2 jbrLwc">SPONSORED CONTENT</div><div class="Instabug__HeaderContent-kuxoh4-2 jbrLwc"><a href="#">HIDE</a></div></div><div class="Instabug__BodyContainer-kuxoh4-3 bESzeC"><div class="Instabug__BodyAndContent-kuxoh4-5 xZrcw"><div class="Instabug__ScreenshotContainer-kuxoh4-9 iUqscu"><div class="Instabug__LogoContainer-kuxoh4-8 cOjJgG"><a to="https://instabug.com/crashlytics-alternative?utm_source=noahgilmore&amp;utm_medium=nativeads&amp;utm_campaign=noahgilmore-nativeads-november" target="_blank" style="text-decoration:none" href="https://instabug.com/crashlytics-alternative?utm_source=noahgilmore&amp;utm_medium=nativeads&amp;utm_campaign=noahgilmore-nativeads-november"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden"><div style="width:100%;padding-bottom:17.219787100814024%"></div><img alt="Instabug logo" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAACxKAAAsSgF3enRNAAAAlUlEQVQI1y3MsQqBURiAYWGQhIFNGUw2uQGDMspgMNgUpWRgYLLIKGWTMmAwuQV3YWVzA9b/96h/eHrP+c7XiYVhmKTPhy81ikEQtDRHlpR7U+ukKdMjT5zEf89OKeZQ5cSbp2FbK9w4uG/0GNmxNTvrNXpf60r3evl/WGDJiweZaDalYbGjC+3qQCc6j95HjJkx5P4DQKnKncO7pVMAAAAASUVORK5CYII=" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition:opacity 0.5s;transition-delay:0.25s"/><noscript><picture><source srcSet="/static/228d46cd079b1b365869f058b2f02de3/d3809/instabug-logo-white.png 150w,
/static/228d46cd079b1b365869f058b2f02de3/fdbb0/instabug-logo-white.png 300w,
/static/228d46cd079b1b365869f058b2f02de3/59139/instabug-logo-white.png 600w,
/static/228d46cd079b1b365869f058b2f02de3/cb30f/instabug-logo-white.png 900w,
/static/228d46cd079b1b365869f058b2f02de3/ba299/instabug-logo-white.png 1200w,
/static/228d46cd079b1b365869f058b2f02de3/6cff2/instabug-logo-white.png 3194w" sizes="(max-width: 600px) 100vw, 600px" /><img src="/static/228d46cd079b1b365869f058b2f02de3/59139/instabug-logo-white.png" alt="Instabug logo" style="position:absolute;top:0;left:0;transition:opacity 0.5s;transition-delay:0.5s;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></a></div><div class="Instabug__Spacer-kuxoh4-4 kQKRzx"></div><div class="Instabug__Screenshot-kuxoh4-10 gdeVmW"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden"><div style="width:100%;padding-bottom:76.35514018691589%"></div><img alt="Screenshot of Instabug running in Trestle" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAACu0lEQVQ4y52TS08TURTHZ/CBhZpoGhLGsqGPaewnIGEpX8SFrtzxAezCQg2EhWwkYUuihKYI3fncEGLrg4dAW4pQoNBCX1M7befRezzn2iGAJiTe5ORmbs753f//3DOC0F6Tky+E/10AcPHgwdAQbddsNttDj8cz7ff7X0qSNOVwOKZ6enouBJ1JvdIU5Xi93umuru5HWHvjWXD0D2xgYKCD9s7OzseBwFNIb2/D3l4GJiYmoK+vD3w+H2AhD1mWwel0QjAYhMz+Ps99HhqFbrv9CTEGBwc7hOHhYQ509fe/3kqmUD3UgTFD0zQ9mUzqKysr+urqqr62tqavr6/zs2azqWOeQbm7+4cgez1hRFwfHx/vEAKBAAFvyl73q8/ff4DSBENr1BkWMaLn83k4OjqC4+NjvrdaLVDVOlNrv1ixphvfNnfgvk+OIKM7EomIVkPvYO8+JLa2QFEqJhazXC4H2WwWCoUCFItFMAzjLEzTxN2kC40cXoTtmEeGfXFxURTQmogfDgR+TKVSgMrMUqnEyuUyUFSrVajVanB5kVIOxIsRSArts7OzohCLxQh4F4FvNzY2oFKpmGiTFVEZ2SWVJycn3O7BwQEQgFQXTk8BxZAbeqx3xOBu25bv4S1fE4kENBoNE5UxRVEIzlWW0LL1rWCQurZCCxhHhsRZqIAU9rrd7qWfOzs8CYPBFesS8AsynBcUouV4Op3mSVnFYKpm8kLG2D/DArZ7uHymsA2UELhMj3KY2TWXNrNM1TnuKqD1KFHq4czMjCiMjIzQHN52uVzzpDD+6b2RP8xcaZmg54BviBEOh0UhFAoR0IY9nEvhr0RJNNQYOEIaNDQddP3vwBfmubyHXpnP4cLCgiiMjY0R8Jbb45kjy3ivoaoqa9TrUK41IV/FYsOEFg6zeS5owC2gNdjRaFT8DanzD1VA6gy+AAAAAElFTkSuQmCC" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition:opacity 0.5s;transition-delay:0.25s"/><noscript><picture><source srcSet="/static/569608069ed18c8dfe6846aeba688b3b/d3809/instabug-screenshot.png 150w,
/static/569608069ed18c8dfe6846aeba688b3b/fdbb0/instabug-screenshot.png 300w,
/static/569608069ed18c8dfe6846aeba688b3b/59139/instabug-screenshot.png 600w,
/static/569608069ed18c8dfe6846aeba688b3b/cb30f/instabug-screenshot.png 900w,
/static/569608069ed18c8dfe6846aeba688b3b/3ed65/instabug-screenshot.png 1070w" sizes="(max-width: 600px) 100vw, 600px" /><img src="/static/569608069ed18c8dfe6846aeba688b3b/59139/instabug-screenshot.png" alt="Screenshot of Instabug running in Trestle" style="position:absolute;top:0;left:0;transition:opacity 0.5s;transition-delay:0.5s;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></div></div><div class="Instabug__BodyInner-kuxoh4-6 irqfGc"><p class="Instabug__BodyContent-kuxoh4-7 dbcHwh">Instabug implements in-app bug reports and message threads with users in a simple, easy to configure interface.</p><p class="Instabug__BodyContent-kuxoh4-7 dbcHwh">Drop Instabug&#x27;s library into your app to support user feedback out of the box!</p><a to="https://instabug.com/crashlytics-alternative?utm_source=noahgilmore&amp;utm_medium=nativeads&amp;utm_campaign=noahgilmore-nativeads-november" target="_blank" style="text-decoration:none" href="https://instabug.com/crashlytics-alternative?utm_source=noahgilmore&amp;utm_medium=nativeads&amp;utm_campaign=noahgilmore-nativeads-november"><span class="Instabug__CallToActionButton-kuxoh4-12 jGqQLX">Try Instabug Free</span></a></div></div></div><div class="Instabug__FooterContainer-kuxoh4-11 kktZTX"><p>Visiting Instabug helps support my writing and open source projects. <a href="/blog/advertising">Learn more</a></p></div></div></div></div></div></div></div></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/popover-uinavigationcontroller-preferredcontentsize/";window.webpackCompilationHash="6d35410ed09d245a5ab9";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-3d1521efe5b145a1147b.js"],"component---src-templates-mdx-blog-posts-jsx":["/component---src-templates-mdx-blog-posts-jsx-1a311671d120bd53bf4d.js"],"component---src-pages-404-jsx":["/component---src-pages-404-jsx-1288ab0cabb54ba1a104.js"],"component---src-pages-blog-index-jsx":["/component---src-pages-blog-index-jsx-e6b2ef4b0ba9d0b4f53c.js"],"component---src-pages-examples-ios-copy-to-clipboard-index-jsx":["/component---src-pages-examples-ios-copy-to-clipboard-index-jsx-c73b761513fcca02da64.js"],"component---src-pages-index-jsx":["/component---src-pages-index-jsx-53b7af2c884cf9856b9f.js"],"component---src-pages-blog-catalina-importerror-no-module-named-zlib-mdx":["/component---src-pages-blog-catalina-importerror-no-module-named-zlib-mdx-117c676403a6f2a272fd.js"],"component---src-pages-blog-advertising-mdx":["/component---src-pages-blog-advertising-mdx-430ea7f87d42c52929cc.js"],"component---src-pages-blog-cfbundleversion-invalid-mdx":["/component---src-pages-blog-cfbundleversion-invalid-mdx-206ef642b52b239380ce.js"],"component---src-pages-blog-cifilter-colorwheel-mdx":["/component---src-pages-blog-cifilter-colorwheel-mdx-252c6ac469746758ceb5.js"],"component---src-pages-blog-cifilterio-mdx":["/component---src-pages-blog-cifilterio-mdx-c2bc8d82e95cc8ce252e.js"],"component---src-pages-blog-civector-codable-mdx":["/component---src-pages-blog-civector-codable-mdx-c89dd4246c448d9aa0df.js"],"component---src-pages-blog-color-compatibility-pod-mdx":["/component---src-pages-blog-color-compatibility-pod-mdx-fde266549ce2e1a7e45b.js"],"component---src-pages-blog-data-over-the-app-store-mdx":["/component---src-pages-blog-data-over-the-app-store-mdx-a3ba77055ed459be92d6.js"],"component---src-pages-blog-dark-mode-uicolor-compatibility-mdx":["/component---src-pages-blog-dark-mode-uicolor-compatibility-mdx-9e6e1ac8a74c6b6fd904.js"],"component---src-pages-blog-docker-commands-mdx":["/component---src-pages-blog-docker-commands-mdx-92e84855877327da1759.js"],"component---src-pages-blog-easy-gatsby-image-components-mdx":["/component---src-pages-blog-easy-gatsby-image-components-mdx-34df8c4e03abc9f71d5e.js"],"component---src-pages-blog-gatsby-mdx-frontmatter-mdx":["/component---src-pages-blog-gatsby-mdx-frontmatter-mdx-217c3e78c3c25a35879b.js"],"component---src-pages-blog-gpu-capture-flickering-mdx":["/component---src-pages-blog-gpu-capture-flickering-mdx-0d0363e9d9c2e61aaff2.js"],"component---src-pages-blog-install-nokogiri-macos-mojave-mdx":["/component---src-pages-blog-install-nokogiri-macos-mojave-mdx-3f3ea2230e51b208c10d.js"],"component---src-pages-blog-my-bucket-list-mdx":["/component---src-pages-blog-my-bucket-list-mdx-20b8c37e1b2c842b0512.js"],"component---src-pages-blog-nsobject-equatable-mdx":["/component---src-pages-blog-nsobject-equatable-mdx-3d60f129cd3c2ebb283a.js"],"component---src-pages-blog-popover-uinavigationcontroller-preferredcontentsize-mdx":["/component---src-pages-blog-popover-uinavigationcontroller-preferredcontentsize-mdx-8dd3e4b094987d288bad.js"],"component---src-pages-blog-pyparsing-trees-mdx":["/component---src-pages-blog-pyparsing-trees-mdx-dd237c1aa9605197ab79.js"],"component---src-pages-blog-rxswift-multiple-subscribers-mdx":["/component---src-pages-blog-rxswift-multiple-subscribers-mdx-39742f3306bb3c69a85c.js"],"component---src-pages-blog-swift-dependency-injection-mdx":["/component---src-pages-blog-swift-dependency-injection-mdx-fd3c3f3f551c6429cfaf.js"],"component---src-pages-blog-swift-pointer-uint-mdx":["/component---src-pages-blog-swift-pointer-uint-mdx-d5dae6a3b990da95ef12.js"],"component---src-pages-blog-swiftui-relativedatetimeformatter-mdx":["/component---src-pages-blog-swiftui-relativedatetimeformatter-mdx-6dceb6b74e9ac175eef2.js"],"component---src-pages-blog-tables-are-hard-mdx":["/component---src-pages-blog-tables-are-hard-mdx-9409b85028bc46f744cc.js"],"component---src-pages-blog-taking-down-sfsymbols-mdx":["/component---src-pages-blog-taking-down-sfsymbols-mdx-baadc2c3533cb9d5580b.js"],"component---src-pages-blog-uibutton-padding-mdx":["/component---src-pages-blog-uibutton-padding-mdx-fe09a353c847ddedbdbe.js"],"component---src-pages-blog-uiwindowscene-black-screen-mdx":["/component---src-pages-blog-uiwindowscene-black-screen-mdx-5db7ca1dd3d56e45c58f.js"],"component---src-pages-blog-userdefaults-set-nil-mdx":["/component---src-pages-blog-userdefaults-set-nil-mdx-438819fe87b241f7afab.js"]};/*]]>*/</script><script src="/component---src-pages-blog-popover-uinavigationcontroller-preferredcontentsize-mdx-8dd3e4b094987d288bad.js" async=""></script><script src="/1-77da60a0cb3c82e43b9b.js" async=""></script><script src="/0-17ed31d8ee8499fcdaa9.js" async=""></script><script src="/app-3d1521efe5b145a1147b.js" async=""></script><script src="/webpack-runtime-857b3928f2d07f876267.js" async=""></script></body></html>