<!DOCTYPE html><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="stylesheet" href="https://meyerweb.com/eric/tools/css/reset/reset.css"/><meta name="generator" content="Gatsby 2.13.67"/><title data-react-helmet="true">iOS Color Wheel Using CIFilter</title><link data-react-helmet="true" href="https://fonts.googleapis.com/css?family=Roboto:700" rel="stylesheet" type="text/css"/><link data-react-helmet="true" href="https://fonts.googleapis.com/css?family=Gentium+Book+Basic" rel="stylesheet"/><link data-react-helmet="true" rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.0/styles/atom-one-light.min.css"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="@noahsark769"/><meta data-react-helmet="true" property="og:url" content="https://noahgilmore.com/blog/cifilter-colorwheel/"/><meta data-react-helmet="true" property="og:title" content="iOS Color Wheel Using CIFilter"/><meta data-react-helmet="true" property="og:description" content="After struggling for some time with CIFilter documentation at work, I&#x27;ve been working on an app which can apply filters interactively for various inputs..."/><meta data-react-helmet="true" name="description" content="After struggling for some time with CIFilter documentation at work, I&#x27;ve been working on an app which can apply filters interactively for various inputs..."/><style data-styled="iMCcXf  cVYlGn kTXgoV keWLqg bdgfEI hXDMKj DMJVx lkFayL kUaCUZ kdejuh gafZTn fUKgpU hMMDbz buSXhe jLitGW ArWbr cdDtcW isFShQ ikpcIb kWZJua" data-styled-version="4.3.2">
/* sc-component-id: CaptionedImage__Wrap-ceijyq-0 */
.hMMDbz{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin:20px 0;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}
/* sc-component-id: CaptionedImage__Container-ceijyq-1 */
.buSXhe{-webkit-flex:1;-ms-flex:1;flex:1;max-width:400px;}
/* sc-component-id: CaptionedImage__Caption-ceijyq-2 */
.jLitGW{font-family:"Gentium Book Basic",times,serif;font-style:italic;font-size:16px;color:#999;margin-bottom:30px;margin-top:12px;text-align:center;} .jLitGW img{width:100%;margin-bottom:10px;}
/* sc-component-id: sc-global-1949001232 */
@font-face{font-family:'Bariol';src:url('/static/Bariol-Regular-b0d07df351f442860551405a4be58de7.eot');src:url('/static/Bariol-Regular-b0d07df351f442860551405a4be58de7.eot?#iefix') format('embedded-opentype'), url('/static/Bariol-Regular-4afd94f0fd93a1f63b46c6c6ad792f71.woff') format('woff'), url('/static/Bariol-Regular-8a7d23d53f8d118e190c63e4e81a91fe.ttf') format('truetype'), url('/static/Bariol-Regular-75b90056f4cdf5a742897ec0a59569d7.svg#svgBariolRegular') format('svg');} *{box-sizing:border-box !important;} body{margin:0;padding:0;} @media (prefers-color-scheme:dark){html,body{background-color:#2b2c2f;}}
/* sc-component-id: default__A-d4l1a1-5 */
.cdDtcW,.cdDtcW:hover,.cdDtcW:focus{outline:none;color:inherit;-webkit-text-decoration:none;text-decoration:none;}
/* sc-component-id: Nav__StyledNav-sc-1cm9dpf-0 */
.cVYlGn{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;padding:20px 60px;border-bottom:1px solid #ddd;} @media all and (max-width:600px){.cVYlGn{padding:20px;}} @media (prefers-color-scheme:dark){.cVYlGn{border-color:#777;}}
/* sc-component-id: Nav__Title-sc-1cm9dpf-1 */
.kTXgoV{-webkit-flex:2;-ms-flex:2;flex:2;font-family:"Roboto","Helvetica Neue","Helvetica",sans-serif;font-size:28px;font-display:swap;} @media (prefers-color-scheme:dark){.kTXgoV{color:#fff;}}
/* sc-component-id: Nav__NavLinks-sc-1cm9dpf-2 */
.bdgfEI{margin:0;padding:0;-webkit-flex:10;-ms-flex:10;flex:10;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:horizontal;-ms-flex-direction:horizontal;flex-direction:horizontal;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;height:100%;-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;}
/* sc-component-id: Nav__NavLink-sc-1cm9dpf-3 */
.hXDMKj{margin:0;padding:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:vertical;-ms-flex-direction:vertical;flex-direction:vertical;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;text-align:center;font-family:"Bariol","Helvetica Neue","Helvetica",sans-serif;font-size:16px;padding:0px 20px;}
/* sc-component-id: Nav__StyledA-sc-1cm9dpf-4 */
.keWLqg{height:auto;color:rgba(128,165,177,1);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:vertical;-ms-flex-direction:vertical;flex-direction:vertical;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-transition:0.2s ease-in-out;-moz-transition:0.2s ease-in-out;-o-transition:0.2s ease-in-out;-webkit-transition:0.2s ease-in-out;transition:0.2s ease-in-out;} .keWLqg,.keWLqg:hover,.keWLqg:focus{outline:none;color:inherit;-webkit-text-decoration:none;text-decoration:none;} .keWLqg:hover{color:rgba(151,195,210,1);}
/* sc-component-id: BlogPost__BlogPostContainer-gyfnna-0 */
.DMJVx{padding:60px 0;margin:0 auto;width:90%;} @media all and (min-width:600px){.DMJVx{max-width:700px;margin:auto;}} @media all and (max-width:600px){.DMJVx{width:100%;padding:20px 0;}}
/* sc-component-id: BlogPost__TitleContainer-gyfnna-1 */
.kUaCUZ{width:100%;margin-bottom:40px;}
/* sc-component-id: BlogPost__Heading-gyfnna-2 */
.kdejuh{width:100%;font-family:"Roboto","Helvetica Neue","Helvetica",sans-serif;font-size:34px;margin-bottom:10px;line-height:1.2em;} @media (prefers-color-scheme:dark){.kdejuh{color:#fff;}}
/* sc-component-id: BlogPost__DateContainer-gyfnna-3 */
.gafZTn{font-family:"Gentium Book Basic",times,serif;font-style:italic;font-size:16px;color:#999;}
/* sc-component-id: MarkdownContent__Container-zl3v0s-0 */
.fUKgpU p,.fUKgpU li{margin:0;padding:0;font-family:"Gentium Book Basic",times,serif;font-size:21px;line-height:29px;color:#333;padding-bottom:15px;margin-top:15px;} @media all and (max-width:600px){.fUKgpU p,.fUKgpU li{width:90%;margin:15px auto 0 auto;}} @media (prefers-color-scheme:dark){.fUKgpU p,.fUKgpU li{color:#fff;}} .fUKgpU blockquote{background-color:#faf9f7;border-left:4px solid #e5e4e1;padding:20px;font-style:italic;} @media (prefers-color-scheme:dark){.fUKgpU blockquote{background-color:#3f3f3f;}} .fUKgpU blockquote p{margin:0;padding:0;color:#555;} @media (prefers-color-scheme:dark){.fUKgpU blockquote p{color:#fff;}} .fUKgpU a{color:#1A3F4B;-webkit-transition:0.2s ease-in-out;-moz-transition:0.2s ease-in-out;-o-transition:0.2s ease-in-out;-webkit-transition:0.2s ease-in-out;transition:0.2s ease-in-out;} @media (prefers-color-scheme:dark){.fUKgpU a{color:#60b5d1;}} .fUKgpU a:hover{color:#47656E;} @media (prefers-color-scheme:dark){.fUKgpU a:hover{color:#6bcfef;}} .fUKgpU code{font-family:monospace;font-size:16px;padding:3px 5px;margin:0px 2px;} @media (prefers-color-scheme:dark){.fUKgpU code{color:#fff;}} .fUKgpU code:not(.vscode-highlight-code){font-family:monospace;font-size:16px;background-color:#faf9f7;border:1px solid #e5e4e1;padding:3px 5px;margin:0px 2px;color:#555;} @media (prefers-color-scheme:dark){.fUKgpU code:not(.vscode-highlight-code){color:#fff;background-color:#3f3f3f;}} .fUKgpU code:first-child{margin-left:0;} .fUKgpU pre{display:block;margin:0;padding:0;margin-top:10px;border:1px solid #e5e4e1;border-radius:2px;} @media all and (max-width:600px){.fUKgpU pre{width:100%;margin:10px auto 0 auto;border-left:none;border-right:none;border-radius:0;overflow-x:scroll;}} .fUKgpU pre > code{display:block;margin:0;padding:10px;font-family:monospace;font-size:14px;line-height:17px;white-space:pre-wrap;} @media all and (max-width:600px){.fUKgpU pre > code{font-size:15px;white-space:pre;padding:15px 5% 15px 5%;width:100%;}} .fUKgpU pre + p{margin-top:30px;} .fUKgpU ol{margin-left:30px;} @media all and (max-width:600px){.fUKgpU ol{width:90%;margin:0 auto 0 30px;}} @media (prefers-color-scheme:dark){.fUKgpU ol{color:#fff;}} .fUKgpU ol li{list-style-type:decimal;} .fUKgpU ul li{list-style-type:square;margin-left:40px;} @media all and (max-width:600px){.fUKgpU ul li{width:90%;margin:0 auto;}} @media (prefers-color-scheme:dark){.fUKgpU ul li{color:#fff;}} .fUKgpU h1,.fUKgpU h2,.fUKgpU h3,.fUKgpU h4,.fUKgpU h5,.fUKgpU h6{width:100%;font-family:"Roboto","Helvetica Neue","Helvetica",sans-serif;margin-bottom:10px;margin-top:40px;} @media all and (max-width:600px){.fUKgpU h1,.fUKgpU h2,.fUKgpU h3,.fUKgpU h4,.fUKgpU h5,.fUKgpU h6{width:90%;margin:40px auto 10px auto;}} @media (prefers-color-scheme:dark){.fUKgpU h1,.fUKgpU h2,.fUKgpU h3,.fUKgpU h4,.fUKgpU h5,.fUKgpU h6{color:#fff;}} .fUKgpU h1{font-size:28px;} .fUKgpU h2{font-size:24px;} .fUKgpU h3{font-size:20px;} .fUKgpU em{font-style:italic;} .fUKgpU strong{font-weight:bold;}
/* sc-component-id: EndButtons__Container-sc-2ta1su-0 */
.ArWbr{width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:horizontal;-ms-flex-direction:horizontal;flex-direction:horizontal;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-top:40px;}
/* sc-component-id: EndButtons__ButtonStyle-sc-2ta1su-1 */
.isFShQ{background-color:rgba(128,165,177,1);-webkit-transition:0.2s ease-in-out;-moz-transition:0.2s ease-in-out;-o-transition:0.2s ease-in-out;-webkit-transition:0.2s ease-in-out;transition:0.2s ease-in-out;width:100px;padding:10px 20px;text-align:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:vertical;-ms-flex-direction:vertical;flex-direction:vertical;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;border-radius:4px;margin-right:20px;} .isFShQ:hover{background-color:rgba(151,195,210,1);}.ikpcIb{background-color:rgba(128,165,177,1);-webkit-transition:0.2s ease-in-out;-moz-transition:0.2s ease-in-out;-o-transition:0.2s ease-in-out;-webkit-transition:0.2s ease-in-out;transition:0.2s ease-in-out;width:100px;padding:10px 20px;text-align:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:vertical;-ms-flex-direction:vertical;flex-direction:vertical;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;border-radius:4px;} .ikpcIb:hover{background-color:rgba(151,195,210,1);}
/* sc-component-id: Disqus__Wrapper-sc-1jjeqqj-0 */
.kWZJua{margin-top:80px;}
/* sc-component-id: BlogPageLayout__Container-sc-118ribu-0 */
@media (prefers-color-scheme:dark){.iMCcXf{background-color:#2b2c2f;}}
/* sc-component-id: BlogPageLayout__NonContent-sc-118ribu-1 */
@media all and (max-width:600px){.lkFayL{padding-right:5%;padding-left:5%;}}</style><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link rel="alternate" type="application/rss+xml" title="Noah Gilmore&#x27;s Development Blog: iOS" href="/blog/ios.xml"/><link rel="alternate" type="application/rss+xml" title="Noah Gilmore&#x27;s Development Blog: Web" href="/blog/web.xml"/><link rel="alternate" type="application/rss+xml" title="Noah Gilmore&#x27;s Development Blog" href="/blog/rss.xml"/><link as="script" rel="preload" href="/component---src-pages-blog-cifilter-colorwheel-mdx-0f8e25bc9aaa604c8e8a.js"/><link as="script" rel="preload" href="/app-aa48f7bb10e6f6ffe94e.js"/><link as="script" rel="preload" href="/2-f216f924b3884ad57b76.js"/><link as="script" rel="preload" href="/1-be6f2e1f06814dc7eacb.js"/><link as="script" rel="preload" href="/0-036063f1e7af05c0db20.js"/><link as="script" rel="preload" href="/webpack-runtime-d51ba99c045ccca0b6de.js"/><link as="fetch" rel="preload" href="/page-data/blog/cifilter-colorwheel/page-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><div class="BlogPageLayout__Container-sc-118ribu-0 iMCcXf"><nav class="Nav__StyledNav-sc-1cm9dpf-0 cVYlGn"><div class="Nav__Title-sc-1cm9dpf-1 kTXgoV"><a href="/blog" class="default__A-d4l1a1-5 Nav__StyledA-sc-1cm9dpf-4 keWLqg">NOAH GILMORE</a></div><ul class="default__UL-d4l1a1-2 Nav__NavLinks-sc-1cm9dpf-2 bdgfEI"><li class="default__LI-d4l1a1-3 Nav__NavLink-sc-1cm9dpf-3 hXDMKj"><a aria-label="Blog Home" href="/blog" class="default__A-d4l1a1-5 Nav__StyledA-sc-1cm9dpf-4 keWLqg"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" color="rgba(128, 165, 177, 1)" size="24" style="color:rgba(128, 165, 177, 1)" height="24" width="24"><path d="M258.5 104.1c-1.5-1.2-3.5-1.2-5 0l-156 124.8c-.9.8-1.5 1.9-1.5 3.1v230c0 1.1.9 2 2 2h108c1.1 0 2-.9 2-2V322c0-1.1.9-2 2-2h92c1.1 0 2 .9 2 2v140c0 1.1.9 2 2 2h108c1.1 0 2-.9 2-2V232c0-1.2-.6-2.4-1.5-3.1l-156-124.8z"></path><path d="M458.7 204.2l-189-151.4C265.9 49.7 261 48 256 48s-9.9 1.7-13.7 4.8L160 119.7V77.5c0-1.1-.9-2-2-2H98c-1.1 0-2 .9-2 2v92.2l-42.7 35.1c-3.1 2.5-5.1 6.2-5.3 10.2-.2 4 1.3 7.9 4.1 10.7 2.6 2.6 6.1 4.1 9.9 4.1 3.2 0 6.3-1.1 8.8-3.1l183.9-148c.5-.4.9-.4 1.3-.4s.8.1 1.3.4l183.9 147.4c2.5 2 5.6 3.1 8.8 3.1 3.7 0 7.2-1.4 9.9-4.1 2.9-2.8 4.4-6.7 4.2-10.7-.3-4-2.2-7.7-5.4-10.2z"></path></svg></a></li><li class="default__LI-d4l1a1-3 Nav__NavLink-sc-1cm9dpf-3 hXDMKj"><a aria-label="Twitter" href="https://twitter.com/noahsark769" class="default__A-d4l1a1-5 Nav__StyledA-sc-1cm9dpf-4 keWLqg"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" color="rgba(128, 165, 177, 1)" size="24" style="color:rgba(128, 165, 177, 1)" height="24" width="24"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg></a></li><li class="default__LI-d4l1a1-3 Nav__NavLink-sc-1cm9dpf-3 hXDMKj"><a aria-label="App Store" href="https://itunes.apple.com/us/app/trestle-the-new-sudoku/id1300230302?mt=8" class="default__A-d4l1a1-5 Nav__StyledA-sc-1cm9dpf-4 keWLqg"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" color="rgba(128, 165, 177, 1)" size="24" style="color:rgba(128, 165, 177, 1)" height="24" width="24"><path d="M256 48C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48zm-78.9 296.9c-2.7 4.6-7.5 7.1-12.5 7.1-2.5 0-5-.6-7.3-2-6.9-4-9.2-12.8-5.2-19.7l14.2-23.6c1.5-2.5 4.1-4 7-4h2.1c10.3 0 17.5 6.2 19.6 12.2l-17.9 30zm120.2-46.4l-93 .1h-61.8c-8.2 0-14.8-6.8-14.4-15 .3-7.8 7.1-13.7 14.9-13.7h44.8l53.1-90.4-17.2-29.3c-3.9-6.7-2.2-15.5 4.4-19.7 7-4.5 16.2-2.2 20.3 4.8l9.2 15.7h.1l9.2-15.7c4.1-7 13.4-9.3 20.3-4.8 6.6 4.2 8.3 13 4.4 19.7l-17.2 29.3-16.7 28.5-36.3 61.9v.1h53.5c6.7 0 15.1 3.6 18.5 9.4l.3.6c3 5.1 4.7 8.6 4.7 13.7-.1 2.8-1.1 4.8-1.1 4.8zm72.2.1h-25.2v.1l18.4 31.3c4 6.8 2.1 15.8-4.8 20-2.3 1.4-4.9 2.1-7.5 2.1-5 0-9.8-2.6-12.5-7.1l-27.2-46.3-16.9-28.8-21.8-37.3c-6.4-10.9-6.7-24.5-.6-35.3 4.3-7.6 7.6-9.6 7.6-9.6l48.5 82.1h41.7c7.8 0 14.5 6 14.9 13.7.3 8.3-6.3 15.1-14.6 15.1z"></path></svg></a></li></ul></nav><div class="BlogPost__BlogPostContainer-gyfnna-0 DMJVx"><div class="BlogPageLayout__NonContent-sc-118ribu-1 lkFayL"><div><div class="BlogPost__TitleContainer-gyfnna-1 kUaCUZ"><h1 class="BlogPost__Heading-gyfnna-2 kdejuh">iOS Color Wheel Using CIFilter</h1><p class="BlogPost__DateContainer-gyfnna-3 gafZTn">January 28, 2019</p></div></div></div><div class="MarkdownContent__Container-zl3v0s-0 fUKgpU"><p>After struggling for some time with <a href="https://developer.apple.com/documentation/coreimage/cifilter">CIFilter</a> documentation at work, I&#x27;ve been <a href="https://twitter.com/noahsark769/status/1080580341973348352">working on an app</a> which can apply filters interactively for various inputs (another blog post to come on this later). As part of this app, I needed a UI for the user to select a color, and decided to implement a color wheel.</p><p>There are several open source projects implementing color wheels on iOS, and StackOverflow has a <a href="https://stackoverflow.com/questions/5108921/how-to-draw-a-color-wheel-in-objective-c">few answers</a> which mostly recommend drawing the color wheel image yourself by iterating over the <a href="https://en.wikipedia.org/wiki/HSL_and_HSV">Hue-Saturation-Lightness</a> color representation. However, I managed to find <a href="http://www.chibicode.org/?p=62">this post</a> about new CIFilters in iOS 10, which included a description of <code>CIHueSaturationValueGradient</code>, and realized we can use this filter to generate a color wheel much more easily.</p><h2>CoreImage Has Color Wheels Built In</h2><p>The description of <code>CIHueSaturationValueGradient</code> is:</p><blockquote><p>Generates a color wheel that shows hues and saturations for a specified value.</p></blockquote><p>For a given value of lightness (0 is dark, 1 is light), this filter&#x27;s output image will be a wheel of all the hues and saturations for that lightness in a given color space. Code that looks like this:</p><pre class="dark-default-dark vscode-highlight" data-language="swift"><code class="vscode-highlight-code"><span class="vscode-highlight-line"><span class="mtk4">let</span><span class="mtk1"> filter = </span><span class="mtk11">CIFilter</span><span class="mtk1">(</span><span class="mtk11">name</span><span class="mtk1">: </span><span class="mtk8">&quot;CIHueSaturationValueGradient&quot;</span><span class="mtk1">, </span><span class="mtk11">parameters</span><span class="mtk1">: [</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk8">&quot;inputColorSpace&quot;</span><span class="mtk1">: </span><span class="mtk11">CGColorSpaceCreateDeviceRGB</span><span class="mtk1">(),</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk8">&quot;inputDither&quot;</span><span class="mtk1">: </span><span class="mtk7">0</span><span class="mtk1">,</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk8">&quot;inputRadius&quot;</span><span class="mtk1">: </span><span class="mtk7">160</span><span class="mtk1">,</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk8">&quot;inputSoftness&quot;</span><span class="mtk1">: </span><span class="mtk7">0</span><span class="mtk1">,</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk8">&quot;inputValue&quot;</span><span class="mtk1">: </span><span class="mtk7">1</span></span>
<span class="vscode-highlight-line"><span class="mtk1">])!</span></span>
<span class="vscode-highlight-line"><span class="mtk4">let</span><span class="mtk1"> image = </span><span class="mtk11">UIImage</span><span class="mtk1">(</span><span class="mtk11">ciImage</span><span class="mtk1">: filter.</span><span class="mtk12">outputImage</span><span class="mtk1">!)</span></span></code></pre><p>Generates an output image that looks like this:</p><div class="CaptionedImage__Wrap-ceijyq-0 hMMDbz"><div max="400" class="CaptionedImage__Container-ceijyq-1 buSXhe"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden"><div style="width:100%;padding-bottom:96.72131147540985%"></div><img alt="Color wheel" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAABYlAAAWJQFJUiTwAAAEMElEQVQ4y0WUfXTNdRzH7x+Vhs44qlN0jsdOOpwT2ZqHiTMPmYqIOJ6WVMxDpEgIedoOp1liB2Ei8pCYhyO0dSwLm+2kknKcnTWPQ6adMbZ736/e2x397n3d7+d37/f7uZ/35/P5fQIi/Kp+BxWk5rJ9kSL2ag3rlEg6A2wPpECTKNFGqnQlvK36WO0ZhW8I1Bi+qqp/sHlN15mqyUSrMd0VwUjqM0ePsdrsVn3yVJfLNCUUmu39t6qP2E8V9/4hcN+Zr3zO8CxxRNCAKLVimKKZQSxfqBs7TY5iOacOlNHCvh5C56NRxblaX2GngaBCNcZvKqaJhvK44hxdPD28juFlFuh10jWEg+aUZZfQl2CwG5REoYJIlP2MnV+odRp0hI75DkFHtISGGkuM5fby+gajmawxpOo9RzeVY6bQObzlv6FsMDrbE+XEoC310Z74Gun3JS9TPg+QRAdS6cVSS01mohY6d3NZqyQOKYXf9RnXWUyociZcGI/yh6D9cSi9HfrE8gu+CUuutOQoDlruVl7UDgZpGxNsz9NmlmsD28xx3xebO0qHG6nojznox3GObgBKjUUTHkVJ4SgD+Sq31J9pa3qbBOUww6TqKFuU7dxlOrpsbpLtAhxARV+j4ylo13SUNtLRWfqbzuNrTdDlIgKbKKeeey6Kv3nVjDPzzVp/t9+cVCHnKaQq5GpezUWn9qADq9G6uWj+22hcX9S/PWodgU5kE1jpytQN3aVjqJL+ZrztxeYr84M5Y/5VJZSXor9Oo6xDaFM6Sl6IJiWigf1QJ7dPAxdn7x4C625DPTf+CyXQzySahWa9+d78chmumFCx+6zgItqXh9ZkoHlp6J1ZqO9o9HwfFNEMHT5CIKtMROaL5wpEvHnL9myz4qTYkSeyjok/c0V5rjOeWY62nUPLj6KPtzt3LlDvj1CbEahRDxerkEBppWh1SDTPEN33iqFeJ+8Wi74Tq7aLnVtFnu8v7fITtcUPQdpV5+5XNPEwGrwRdVuCGrviHV2kqqrqPhRTfhIRy0TMKke5QiR8LqamiAXJYoPXrJWO0txM8e5PK9CUIjTiBHrJ0qO/RHXsLPlguG2qm7GoVDSeJ5pOE12mi1feFyMmiA/MimmQMVPkmuIP4W6ijw2/geLPoM5H4Em3Uev1qLQi3NhVwfC02ZwjHuwvnh4kOg8UfeLFWK9Jw8WmBJGZAKeHiX8GOMqernonF6jZSVR3n4txKfwsV4Wqx5fnYCg8BFd+Kx5pA080F7HtYVSsmBUn0nqJ3ea47aIu4nY7b29UhiLPukjXap2FAwvcG46h8NAhM0t0jRIt6kDPhvDuU7CoJaS3FAeauHMixZWH3UZd3UYnKsPzMBge0NUfgdr5WjN9g7Xy71SIjM1i7hC3UIxY2kZsbGvZncTZUXBrl8LTujYy8b+T/wDhbdQq+eKJyAAAAABJRU5ErkJggg==" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition:opacity 0.5s;transition-delay:0.25s"/><noscript><picture><source srcSet="/static/cifilter-colorwheel-1-f984a2b2d9b731dc2ba0092348e014c4-5f5eb.png 150w,
/static/cifilter-colorwheel-1-f984a2b2d9b731dc2ba0092348e014c4-07cb7.png 300w,
/static/cifilter-colorwheel-1-f984a2b2d9b731dc2ba0092348e014c4-1e875.png 600w,
/static/cifilter-colorwheel-1-f984a2b2d9b731dc2ba0092348e014c4-406cd.png 610w" sizes="(max-width: 600px) 100vw, 600px" /><img src="/static/cifilter-colorwheel-1-f984a2b2d9b731dc2ba0092348e014c4-1e875.png" alt="Color wheel" style="position:absolute;top:0;left:0;transition:opacity 0.5s;transition-delay:0.5s;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><div class="CaptionedImage__Caption-ceijyq-2 jLitGW"></div></div></div><h2>Details</h2><p>The filter takes five parameters:</p><p><code>inputColorSpace</code>: This is a <code>CGColorSpaceRef</code> representing the color space in which to generate the wheel. Generally, you&#x27;re going to want to use <code>CGColorSpaceCreateDeviceRGB()</code> for this, which will generate a wheel in the current device&#x27;s color space.</p><p><code>inputDither</code>: The amount of <a href="https://en.wikipedia.org/wiki/Dither">dither</a> to apply to the wheel. I&#x27;m not exactly sure what this is useful for, but it can be fun to play around with. I also don&#x27;t really know the units of this value, but I think it&#x27;s pixels (if you can confirm, <a href="https://twitter.com/noahsark769">let me know</a>). For example, here&#x27;s a color wheel with <code>inputDither</code> as 300:</p><div class="CaptionedImage__Wrap-ceijyq-0 hMMDbz"><div max="400" class="CaptionedImage__Container-ceijyq-1 buSXhe"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden"><div style="width:100%;padding-bottom:99.00332225913623%"></div><img alt="Color wheel with dither" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAABYlAAAWJQFJUiTwAAAExElEQVQ4y1WViU8VVxSH319irJS4VRvaWqOoVQGLUCSAUVoao6Ai4opKCqJgRQmupSqt4lb3iCCoiAiCIBQtlu29NzP3zgwGFyqkKFVx4733dfAB6kl+OefmZr6cc++Zc20ej4d+9Zvb48ZavYv7PH3YX92msCuXC53pVHSlc7drL/f/K+Z1XyeD5vG4vP5d7ME2CHNZsEG7+KyQ6HvfES7HMd/uwyrHCHapozjs8OGy6kuD6U9H5xbevOnwwtyuoW9tH8KeuV6wtH0dvtoYJks/ohR/EuzTydKCyXUEUCiCqJZBNEp/nM5PMVun0fu07iOozT2QYa/rFdEPNjK8ZSpTnCGEaCHEGREkq5HkaNGcVqOpaouhXotC0SPQHbNRar9CLxtLb0flEHQImNxxkhHKQmZoCcxW45ivLmK9mUi2XMVhsZIibSVV6jIaxRKEugD1r7ko5UEo5/yQxybwtuf++5Krnkt8HGnM0HcQYE8hSqSRIDbzk0hlv55JgbmTCpnFbXUL0sxEb12D/uci9JJw5Nlg9N1j6Cre8B645GEZ4+URgtQ8ItWDxGt5pIhDZOu5HBB7uaIfpVo9hEM/jNKajXH3Z7TSBLT8WERuKNqmiehJX/D6vsDW8fYlX5tlTNFLCBOXWGyWsl4Us1UtZL+az2ntPOVaMY3GFVRRgNKQh6z5BaMkA2feUsSOeahrZuII96G76Ci26t4exhn1BBi3iZR1LNZq2GT5vHsNnLDiIkcFt0QNzWoVjqariLrziNKDqKe3o+esRVs3F3VhIM5Z43iYvhZbYc8TRqktTNdarLOzs1x3ki7t7FeaOWup3Nprkg6kJfVONfJGCUbBKdqO7EOmb0CJjUbMmYU+yY+H8bHYCrp7GNui8a1iEmX5RLtOpl1yzFoXWL68WaX2Titai8Cob0KWVKIdPYe6PQeZtBl9QQLOmaHIzybwYFE8tponLxhfozG10klUrSTxjklylcoeS+fqdIornFy/Zqf1pkC/oWJe+Rv9cDly2xmMtfsQMWkYYStwjJpJ+8pUbF2vXUy8ZAFLDOZc1llQJEkq0si8oPJ7gcbZfElFkU5DkQUsNjDPOKw2qcVIv4qx/CRm5E5EYDKKTxRPjl/yts3y648YmasQ8ofB3EOCZYckGcfvsS1H4+CvksLfNOqO6SjH2xC7nZjZzVa5lZgLL6IFH0CZkIbwW01f22MvsL79JaMzJVO36QSmWqWnKizdKFi9xsoyy+TsVsHNPSaN2SZKikQmtqLG1CDnWLcecArpu4uu1Evexna5vb9exrnHDPveztTFGqFLJFExKiviDLISBCeSDApXqFTEKzRbe/bIFkRwA8rMMowvi2kPKMTd2esFDo6vPpeH2IxHDJvUyvRQwZwwk7gIQXq0Se6POseiHJTO07gVrtAY5LDOzY5jzE00vzJeNnZ7h4PL7S3Z7R6EQsrWf/Ad6WDyeIMfvpGsDrQuKEDlZJjO5WCd8mkKLf4m5ug2zAA7LxqfDsE+ynAQ2m/l15+zLOYB4Z8LIoY3sWG0RvonLRwZoVA21qAhwKRzz7+4n7kHYJ6B6T0wsd8/AZ4PwB5M5RWV+d1c29fFjR2dtB7tprOmlzc9fe+fgA9g/fofwnrr0uPY/GAAAAAASUVORK5CYII=" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition:opacity 0.5s;transition-delay:0.25s"/><noscript><picture><source srcSet="/static/cifilter-colorwheel-2-400fd036426ebd5e355f794ebb92b391-5f5eb.png 150w,
/static/cifilter-colorwheel-2-400fd036426ebd5e355f794ebb92b391-07cb7.png 300w,
/static/cifilter-colorwheel-2-400fd036426ebd5e355f794ebb92b391-1e875.png 600w,
/static/cifilter-colorwheel-2-400fd036426ebd5e355f794ebb92b391-0fa0b.png 602w" sizes="(max-width: 600px) 100vw, 600px" /><img src="/static/cifilter-colorwheel-2-400fd036426ebd5e355f794ebb92b391-1e875.png" alt="Color wheel with dither" style="position:absolute;top:0;left:0;transition:opacity 0.5s;transition-delay:0.5s;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><div class="CaptionedImage__Caption-ceijyq-2 jLitGW"></div></div></div><p><code>inputRadius</code>: The value, <em>in points</em>, of the radius of the wheel. A radius of 160 creates an image which is 320x320 points square (640x640 pixels on a device with 2x screen scale).</p><p><code>inputSoftness</code>: Specifies a softness value to smooth the gradient. A value of 0 means no smoothing, which is probably what you want for a color wheel. I&#x27;m also pretty sure the units here are pixels. Here&#x27;s a color wheel with <code>inputSoftness</code> as 4:</p><div class="CaptionedImage__Wrap-ceijyq-0 hMMDbz"><div max="400" class="CaptionedImage__Container-ceijyq-1 buSXhe"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden"><div style="width:100%;padding-bottom:101.34228187919463%"></div><img alt="Color wheel" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAABYlAAAWJQFJUiTwAAAEKElEQVQ4y1WUC2yNZxjHzzLmGpUuNWOyNDGJazJWdC6tBWOaIogSt6K70a1Y6S5BMWWxpDYmwbothkWsZnNfZ3Sy2Nia1Bghs4tsJUaGVTn9/r/9v3NOUztf/nme837v+3uf53uf94ngn/yEv0AB9X6ID1KjGr7RYY5pK79ad+zjMalhSr39gEaGiDTA6tUI+lpHGadJtKETHZTENLXmU+sf+6iTN55k0BESDPvxtfJOkXthdxUlX8/ygJr4RZLVmV7qxQL18SZ9qLMvjwUGB2ppf44h0f9BI0Ei5DrVMlKZhKjuhj2mdEc3hMEawRJlcdKqty+GGJZu2822qW04djsBDQwkiP2ZrkKa6n56K5kMtYvBB2gy2crlbUd9zoJcz55kUJYXD7bfG90x9PK0RMpBPOUdOkMTPUdP5TiiTMYojdkMZxYvMUuvs1FLuWRhP9A8a6ZhY1FdBjrdE2029NSOeMphdAN1lhTt40m974iWGTSHRZrBShVRrPV8oo1c0yYD1xlWYtgidGsWOpGNNg1A01PQ7EGEXy/ynU+mrad01y2G6g+m6KQPYTertIEyrWGLtnHQm9Vqr4E7PXMzur4aKheg0ikodyjq3QM1T0LHjxNZ5whbONS+tllWnmtrsW6wQRcp1zGO6BBV+oG7VHlWJfqrHPZvQCWL0dQ8lDYKJfd1aM2cwHtEFjrCsAAG2I5RWAg4VfjQOuhSqOZvavwEwZ/wezXadwit/QgVlKAx+Y5uHGo/0EBHOH8hkQJDWhsSAsdac60Sy0uo8PgZl9f1Wmd77TaqPo0OfI7K1qMVRejFqYYOQeldUSsfx8v5RJZ7YXNHk25lG/C8/y8zcHOt2HNJfF8lzv8souf98kQt2vujT7UMLS9EL4xGo3t4cRsIgSuKiZTHIhSPhyV6W+ReFq+eEqUHxDbnvXunqKwUdUe84z5HutX3t/QcKtqGZixEI55x2qk+FAN3lRO5YuCjV0XqWZFxWEzY4u+4WiwpFO8shtIysWu7uLndEX7gm7/W0CW2c35DEz5DGUtR6kirj/tGTVjYYv5J0ewtkVYkhk8Vk7Mgf7QofEUUrPL3XCOuWKwMa9uwubaTrWHuPGkVju4NNO/jWK+I3ZSaG77yOaJDN9G/s3g6FXKeEtl5YmK+eHe++MVy53ABGzTRdrjV3/7DVx3dcUf3b/ymROvj7euoW137++ARb9HvQfGEK6GLC3PYOPFmDlR7Q9nXKCvTC/rZdjSwtW1FEG+C0UT7aoB+uUd0aemb49GHukGKq73fIPFapvjWitoPb4C62rYyrL39/YmmGFVjyrGemOivFy+I2U6pY5Jo0Rw6JsPMduIL61Zy/FqprReHEV9IdOoYLB5UpKGdh6+i0Ub/J9dfaYnIGy+KneJX1s3xfuVDUlUj4F5YaP4DJb4QLN84j8oAAAAASUVORK5CYII=" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition:opacity 0.5s;transition-delay:0.25s"/><noscript><picture><source srcSet="/static/cifilter-colorwheel-3-d7ab3b40faa43c643473dd4c1c269b9e-60cd2.png 150w,
/static/cifilter-colorwheel-3-d7ab3b40faa43c643473dd4c1c269b9e-2b560.png 300w,
/static/cifilter-colorwheel-3-d7ab3b40faa43c643473dd4c1c269b9e-77bd3.png 596w" sizes="(max-width: 596px) 100vw, 596px" /><img src="/static/cifilter-colorwheel-3-d7ab3b40faa43c643473dd4c1c269b9e-77bd3.png" alt="Color wheel" style="position:absolute;top:0;left:0;transition:opacity 0.5s;transition-delay:0.5s;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><div class="CaptionedImage__Caption-ceijyq-2 jLitGW"></div></div></div><p><code>inputValue</code>: The lightness value. 0 creates a black wheel, 1 means full lightness. Here&#x27;s a color wheel with <code>inputValue</code> as 0.5:</p><div class="CaptionedImage__Wrap-ceijyq-0 hMMDbz"><div max="400" class="CaptionedImage__Container-ceijyq-1 buSXhe"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden"><div style="width:100%;padding-bottom:100.67567567567568%"></div><img alt="Color wheel" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAABYlAAAWJQFJUiTwAAAEi0lEQVQ4y1WVaWxUVRiGbyIGCCaAJIKFmSktdoOUQje62ZZawNqVAt330tJCKS3DzHSm0/PNKC4EiBAiKv8UYjAGQaNRQxDUgCHxhzFRTAhVf2AUKaFKUpy2j1/pgtzkufPmO3OffOeee8+1xsfHmWDiGB0bZfq4Hxrh28GLvHP5MMe+cHFC+VjztcFLhEZHZv43NnXNtMealoWmBkbHRzl65XVSj8ax3D+LKI/FGpdFtlKsuWngcfYfXcnlK0dUMDYlDc1Irf/Lbgz9StrbeVhui0X9c1kli8kM2CgIOtimNGveqbUeHXM5LU4cSefOX4OT0tFJqTU9zeu3f8N+cB2WZxFhwQgiAg7WSCQ5EkWRiaFaYmjT3CMR+MVB0LsUT6vFoV4HQ3/cmJn+gw7vqz3pzWqVRWMLprDcxBMjK0nR3w0mkS2STKNJZpdmt8Rj+mMwPeEEO2x4yize6k1hLPTvZIcTp5e/OoXlSmZZMF9lOaw02SSaTDJNBoWSTY1ZT7vSq9lv0hFXIqYzDmlQacVS3OkWX598ZVJ4d+Qeyw+18IS/CIeUEWNKVFZMlhSRLwVsNi/QpLUupU8KEV8+pjsLaU1EKmOQYgf+jHkcLoxg5J9hrLM/fYflq2SJNBAp9aw2dWQoG0wtJaaaKlOl3dXilFoGBioRZwlmxwakLgMpXY08F0kg/Wl8kRbXzn+kromTuwl7oItos5MkJUcpNJ1UKs1mh3bXgU86kL5mTJdKm7TTrTnIpiQkI5rgWjvuJy3O7/di1Z85rYuxB0fQS6x4SFHylFKlTulUXOLG+J1ITwemtQ6pKEUK8pCsFCQhlkCUHe+8x3i/tgKr9vQHWHv7cPQHiPUKKUqeUqbUK52KWzGufqSzG1OnXZZuRfI2ISk67dh4AvZIvLPmcnqLCp0ffo7V4sLRHSS6y5Ck5CpFXULVLkPrTkO30q9IqwdTtQspakByy5EkvZfRaSpMwGMt4LPefqxTl7/HqvIS1hxgRaOQ0GjIbDBsVMrqhOoaYUe9YV+DdlntR8r2Yja2I5k1Ot0SZEUegbA0vJadH97T9bg5NMxT9a8yv2wAR7kQt1lILhOyS4WNRUJ5sdCste7NBq9m2diHyd6NJLcgcRVIeCED8zN4bUkuf/9+a/LB3n3sE6x1bmybgkTkGVatV2m28GyWULTeUJuvXeYbnFofyBxQ2T5klS5QRD1B2zbcVhqf7jny8E358849bM8fZHa8D3uqStcY4uKF1ATtMlnYmqpdphq6kg19WpM4n8r2ELS345tdzkFHI/du3Z0UhkYnt6CLVweZEy3MWebD9oxKw4W1K4TcGKE4TqhR2jX3as0fbnjR1odvThuBuc38cunHyc0hNLU5TEsvfHODsKgDWJabsIWG1csCZDkCFIQH2Ka0aN6tNZeOuSwnB8L8DH7584xsaspTG+yU9ObNYdpaz2Jf8BKLLQ/RyrpZfeQrJZprFNfC/ZzZflYXYfgR2SM79gNpaGwmD16/zbtvXEW2n8NZdBK/crztHBeOX+XW9aGHn4Cpa6Y/Af8BUCvt8Y/5YCwAAAAASUVORK5CYII=" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition:opacity 0.5s;transition-delay:0.25s"/><noscript><picture><source srcSet="/static/cifilter-colorwheel-4-0d39cdbdf34f103710576549973bab0b-10b39.png 150w,
/static/cifilter-colorwheel-4-0d39cdbdf34f103710576549973bab0b-ac3c4.png 300w,
/static/cifilter-colorwheel-4-0d39cdbdf34f103710576549973bab0b-f9dcb.png 592w" sizes="(max-width: 592px) 100vw, 592px" /><img src="/static/cifilter-colorwheel-4-0d39cdbdf34f103710576549973bab0b-f9dcb.png" alt="Color wheel" style="position:absolute;top:0;left:0;transition:opacity 0.5s;transition-delay:0.5s;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><div class="CaptionedImage__Caption-ceijyq-2 jLitGW"></div></div></div><h2>Getting The Color On Touch</h2><p>I still needed to actually let the user select a color from the color wheel. Turns out there are tons of people online talking about how to get the color at a given touch location for a <code>UIImageView</code>. I ended up going with <a href="https://stackoverflow.com/questions/12770181/how-to-get-the-pixel-color-on-touch">this one</a> which translated pretty well into an extension:</p><pre class="dark-default-dark vscode-highlight" data-language="swift"><code class="vscode-highlight-code"><span class="vscode-highlight-line"><span class="mtk4">extension</span><span class="mtk1"> </span><span class="mtk10">UIImageView</span><span class="mtk1"> {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">func</span><span class="mtk1"> </span><span class="mtk11">getPixelColorAt</span><span class="mtk1">(</span><span class="mtk11">point</span><span class="mtk1">: CGPoint) -&gt; UIColor {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        </span><span class="mtk4">let</span><span class="mtk1"> pixel = </span><span class="mtk10">UnsafeMutablePointer</span><span class="mtk1">&lt;</span><span class="mtk10">CUnsignedChar</span><span class="mtk1">&gt;.</span><span class="mtk11">allocate</span><span class="mtk1">(</span><span class="mtk11">capacity</span><span class="mtk1">: </span><span class="mtk7">4</span><span class="mtk1">)</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        </span><span class="mtk4">let</span><span class="mtk1"> colorSpace = </span><span class="mtk11">CGColorSpaceCreateDeviceRGB</span><span class="mtk1">()</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        </span><span class="mtk4">let</span><span class="mtk1"> bitmapInfo = </span><span class="mtk11">CGBitmapInfo</span><span class="mtk1">(</span><span class="mtk11">rawValue</span><span class="mtk1">: CGImageAlphaInfo.</span><span class="mtk12">premultipliedLast</span><span class="mtk1">.</span><span class="mtk12">rawValue</span><span class="mtk1">)</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        </span><span class="mtk4">let</span><span class="mtk1"> context = </span><span class="mtk11">CGContext</span><span class="mtk1">(</span></span>
<span class="vscode-highlight-line"><span class="mtk1">            </span><span class="mtk11">data</span><span class="mtk1">: pixel,</span></span>
<span class="vscode-highlight-line"><span class="mtk1">            </span><span class="mtk11">width</span><span class="mtk1">: </span><span class="mtk7">1</span><span class="mtk1">,</span></span>
<span class="vscode-highlight-line"><span class="mtk1">            </span><span class="mtk11">height</span><span class="mtk1">: </span><span class="mtk7">1</span><span class="mtk1">,</span></span>
<span class="vscode-highlight-line"><span class="mtk1">            </span><span class="mtk11">bitsPerComponent</span><span class="mtk1">: </span><span class="mtk7">8</span><span class="mtk1">,</span></span>
<span class="vscode-highlight-line"><span class="mtk1">            </span><span class="mtk11">bytesPerRow</span><span class="mtk1">: </span><span class="mtk7">4</span><span class="mtk1">,</span></span>
<span class="vscode-highlight-line"><span class="mtk1">            </span><span class="mtk11">space</span><span class="mtk1">: colorSpace,</span></span>
<span class="vscode-highlight-line"><span class="mtk1">            </span><span class="mtk11">bitmapInfo</span><span class="mtk1">: bitmapInfo.</span><span class="mtk12">rawValue</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        )</span></span>
<span class="vscode-highlight-line"><span class="mtk1"></span></span>
<span class="vscode-highlight-line"><span class="mtk1">        context!.</span><span class="mtk11">translateBy</span><span class="mtk1">(</span><span class="mtk11">x</span><span class="mtk1">: -point.</span><span class="mtk12">x</span><span class="mtk1">, </span><span class="mtk11">y</span><span class="mtk1">: -point.</span><span class="mtk12">y</span><span class="mtk1">)</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        layer.</span><span class="mtk11">render</span><span class="mtk1">(</span><span class="mtk11">in</span><span class="mtk1">: context!)</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        </span><span class="mtk4">let</span><span class="mtk1"> color = </span><span class="mtk11">UIColor</span><span class="mtk1">(</span></span>
<span class="vscode-highlight-line"><span class="mtk1">            </span><span class="mtk11">red</span><span class="mtk1">: </span><span class="mtk11">CGFloat</span><span class="mtk1">(pixel[</span><span class="mtk7">0</span><span class="mtk1">]) / </span><span class="mtk7">255.0</span><span class="mtk1">,</span></span>
<span class="vscode-highlight-line"><span class="mtk1">            </span><span class="mtk11">green</span><span class="mtk1">: </span><span class="mtk11">CGFloat</span><span class="mtk1">(pixel[</span><span class="mtk7">1</span><span class="mtk1">]) / </span><span class="mtk7">255.0</span><span class="mtk1">,</span></span>
<span class="vscode-highlight-line"><span class="mtk1">            </span><span class="mtk11">blue</span><span class="mtk1">: </span><span class="mtk11">CGFloat</span><span class="mtk1">(pixel[</span><span class="mtk7">2</span><span class="mtk1">]) / </span><span class="mtk7">255.0</span><span class="mtk1">,</span></span>
<span class="vscode-highlight-line"><span class="mtk1">            </span><span class="mtk11">alpha</span><span class="mtk1">: </span><span class="mtk11">CGFloat</span><span class="mtk1">(pixel[</span><span class="mtk7">3</span><span class="mtk1">]) / </span><span class="mtk7">255.0</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        )</span></span>
<span class="vscode-highlight-line"><span class="mtk1"></span></span>
<span class="vscode-highlight-line"><span class="mtk1">        pixel.</span><span class="mtk11">deallocate</span><span class="mtk1">()</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        </span><span class="mtk15">return</span><span class="mtk1"> color</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    }</span></span>
<span class="vscode-highlight-line"><span class="mtk1">}</span></span></code></pre><h2>End Result</h2><p>It ended up <a href="https://twitter.com/noahsark769/status/1087511576871981056">working pretty well</a>! Adding a gesture recognizer to the imageView which calls <code>getPixelColorAt(point:)</code> allows us to easily determine the color that the user picked and render a simple UI to show the selected color:</p><div class="CaptionedImage__Wrap-ceijyq-0 hMMDbz"><div max="400" class="CaptionedImage__Container-ceijyq-1 buSXhe"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden"><div style="width:100%;padding-bottom:128.36676217765043%"></div><img alt="Color wheel" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaCAYAAAC3g3x9AAAACXBIWXMAABYlAAAWJQFJUiTwAAAFSUlEQVRIx5WVe5CNZRzHz9SIxNQ0NWHUVNakDLnUiqxL5NbFrMgmuZUmQrnfVmFYVsJSIynWLaxLaIWyLrGZSrVI2l23ZJdlz57dPXthz3m/n37ve9aEfxrPe77nubzP83m/z+95nvf1SaKkpISioiIvd1VWWobjOLjJvX8r8rl/hYWF5OfnEwwGPXBxcTGhUMjr4IJvCegO8Pv9nisXfA1eUFAQUaCA65Pk/D/QdeUOdvNAIODJX+g3mJ9AvoWi8IqnspIKD+ooxM3pBmBZWZkXuyvlVwiWBikpLYEy62S6VJrD2dIMThcfoqD8NBYED1AYrCAnP2gqwV9UfmMMryWnsrOb0tjOZOIYQhTjuZck00ZqkUGMPWA26WvHc2xZX44n9yV9xRguXo6ExneNHHKnYexLyqeX4qijqrRUTQboIabqMT5XA7apHr9yPz/77zDY47CuJaQ0IXtpN7LP5vwHDCvswc4pj8Z0pxq1aaqGvKIWjDRHH6s96/Qc+9SWU7Qi09+IrNXRsPk52NKKM8mxZJ+pBDrulO1XrgpzNIaa6khzdSdGHehDV+LVkyV6jVT14bBe5YI98FJROzbNimbftGc5OPMpUmb04lzu5QgwVOlugr7hdg02Z+/TTkOI5U3eZiCz9C5rNMrcjeYvjSBgfbgax9blbWnYuBlRjzdi2YgmEDzvrYDPhZ1REbWUxKPMsQkm0oMEBms64xTPQk2z2M0xdx+RY+0VzmR0eRhkxrFldhtWubAZVVBagouKAOfoOFWVTLTW0k2rGahVBksmUUtZpiWkaSWZ1l7El7adFqDTH6Ifh8LWV2BJDBpXB01pjq5eiQBfVAb3aTdttJee2sNwpTHT6kv1HZu1nZ+0y9ztJuSk2jZYjY7OR7sm4Czvj5PQGQ1rhLrfjU78jC9oMYxSNg/rTzroBG+YxpuSrJ5i2qdjHNdRivkDSn9Cp1LRwS9QynS04B009iX0RjRqVg1tXYUv185mLQppYOpsGmiKNy02bSNg+y5ALgXmzlbxwgl0OA1tW4kWz0KTh6EBsajLM6huDXvAbHz/OOKBcmhgx6yzaZCVp5g+s3Kq5b+XiTwrO0V2jrPOob2H0OqNKDEJDR+LevRBrdqjmvejmYn4CsLiob9F1Gnx/BnRzzTRtMjqm0zpJ0VWtig9aUv4WzHa8RdathfNsFgOnWOxew+16I2qN0SfrcEXto0dcwxqp4t2h0Tcj2KkKdHqyQdE6l5xeL+4dNBcfm/Hc30uWvQbit+OBi1FXaehphbL6h1s6xy2VbZlHnVEVF8vWn4tXt4kBm8Q8Sli/hqxaqXYb+VTG83lGnO52FzOyELvHUBxKaj9QvTIaBQ1HOUFIsADuaLmItHwE2i/UPReIN6da9AE8Wmi+NbaMux+3jwITzeXoy7YYmSgbjvRMytQjSnora8iG9tx3EzErjDo+xA9QXQaZVMfbtAh4iMrr58oDk4SJ8fZ98cOCf2D6OWTqHU6qm8LdM+nKONCBBiuBJ4wl/cNFHVfhRa9RYeXoF+smPq6+NLadw6CjH7iot0Pd7Pz/+xF9ORRuO0b+OCIB1PIiby+QuEIdPMPoka0qNPYoE+LXq3FmI4iqYvY0NVcdjKXbc1lC+v+RCm6zWLZOzMCcy9H171gK6E7dov69aDWHTb1h8XQxiKhua24aVcTi2UDkXMvVFQxl+8UexBvpHPdJ+Bm6Hnbl5Ps7L/wIPSsBiOrw9y7YO2dcOBuOG/v1dCWyKfjmjPvuhnoQUMRqKvLOeKXbWLPPHFotk03WRT/HhnsocI3wlz9CzTCzRkKiSswAAAAAElFTkSuQmCC" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition:opacity 0.5s;transition-delay:0.25s"/><noscript><picture><source srcSet="/static/cifilter-colorwheel-5-9748453065bc40359ea76ba7c6f577df-5f5eb.png 150w,
/static/cifilter-colorwheel-5-9748453065bc40359ea76ba7c6f577df-07cb7.png 300w,
/static/cifilter-colorwheel-5-9748453065bc40359ea76ba7c6f577df-1e875.png 600w,
/static/cifilter-colorwheel-5-9748453065bc40359ea76ba7c6f577df-7f50f.png 698w" sizes="(max-width: 600px) 100vw, 600px" /><img src="/static/cifilter-colorwheel-5-9748453065bc40359ea76ba7c6f577df-1e875.png" alt="Color wheel" style="position:absolute;top:0;left:0;transition:opacity 0.5s;transition-delay:0.5s;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><div class="CaptionedImage__Caption-ceijyq-2 jLitGW"></div></div></div><p>All in all, this was a great exercise in figuring out the least complicated way to implement a complicated UI component, and I continue to learn about all the awesome stuff that CoreImage comes with out of the box (not just color wheels, but photo effects, blurs, distortions, etc).</p><p>More on CIFilters soon to come! 👋</p><style class="vscode-highlight-styles">.dark-default-dark {
background-color: #1E1E1E;
color: #D4D4D4;
}

.dark-default-dark .mtk1 { color: #D4D4D4; }
.dark-default-dark .mtk2 { color: #1E1E1E; }
.dark-default-dark .mtk3 { color: #6A9955; }
.dark-default-dark .mtk4 { color: #569CD6; }
.dark-default-dark .mtk5 { color: #D16969; }
.dark-default-dark .mtk6 { color: #D7BA7D; }
.dark-default-dark .mtk7 { color: #B5CEA8; }
.dark-default-dark .mtk8 { color: #CE9178; }
.dark-default-dark .mtk9 { color: #646695; }
.dark-default-dark .mtk10 { color: #4EC9B0; }
.dark-default-dark .mtk11 { color: #DCDCAA; }
.dark-default-dark .mtk12 { color: #9CDCFE; }
.dark-default-dark .mtk13 { color: #000080; }
.dark-default-dark .mtk14 { color: #F44747; }
.dark-default-dark .mtk15 { color: #C586C0; }
.dark-default-dark .mtk16 { color: #6796E6; }
.dark-default-dark .mtk17 { color: #808080; }
.dark-default-dark .mtki { font-style: italic; }
.dark-default-dark .mtkb { font-weight: bold; }
.dark-default-dark .mtku { text-decoration: underline; text-underline-position: under; }</style></div><div class="BlogPageLayout__NonContent-sc-118ribu-1 lkFayL"><div class="EndButtons__Container-sc-2ta1su-0 ArWbr"><a href="https://twitter.com/intent/tweet?text=Post%20by%20%40noahsark769%3A%20iOS%20Color%20Wheel%20Using%20CIFilter%20https%3A%2F%2Fnoahgilmore.com%2Fblog%2Fcifilter-colorwheel%2F" target="_blank" aria-label="Twitter" class="default__A-d4l1a1-5 cdDtcW"><div class="EndButtons__ButtonStyle-sc-2ta1su-1 isFShQ"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" size="24" color="white" style="color:white" height="24" width="24"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg></div></a><a href="/blog" aria-label="Blog homepage" class="default__A-d4l1a1-5 cdDtcW"><div class="EndButtons__ButtonStyle-sc-2ta1su-1 ikpcIb"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" size="24" color="white" style="color:white" height="24" width="24"><path d="M258.5 104.1c-1.5-1.2-3.5-1.2-5 0l-156 124.8c-.9.8-1.5 1.9-1.5 3.1v230c0 1.1.9 2 2 2h108c1.1 0 2-.9 2-2V322c0-1.1.9-2 2-2h92c1.1 0 2 .9 2 2v140c0 1.1.9 2 2 2h108c1.1 0 2-.9 2-2V232c0-1.2-.6-2.4-1.5-3.1l-156-124.8z"></path><path d="M458.7 204.2l-189-151.4C265.9 49.7 261 48 256 48s-9.9 1.7-13.7 4.8L160 119.7V77.5c0-1.1-.9-2-2-2H98c-1.1 0-2 .9-2 2v92.2l-42.7 35.1c-3.1 2.5-5.1 6.2-5.3 10.2-.2 4 1.3 7.9 4.1 10.7 2.6 2.6 6.1 4.1 9.9 4.1 3.2 0 6.3-1.1 8.8-3.1l183.9-148c.5-.4.9-.4 1.3-.4s.8.1 1.3.4l183.9 147.4c2.5 2 5.6 3.1 8.8 3.1 3.7 0 7.2-1.4 9.9-4.1 2.9-2.8 4.4-6.7 4.2-10.7-.3-4-2.2-7.7-5.4-10.2z"></path></svg></div></a></div><div class="Disqus__Wrapper-sc-1jjeqqj-0 kWZJua"><div id="disqus_thread"></div></div></div></div></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/cifilter-colorwheel/";window.webpackCompilationHash="ed02d89d6887a18edb5c";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-aa48f7bb10e6f6ffe94e.js"],"component---src-templates-mdx-blog-posts-jsx":["/component---src-templates-mdx-blog-posts-jsx-7431f7de3c0388cb23b0.js"],"component---src-pages-404-jsx":["/component---src-pages-404-jsx-161601fb435f120df7aa.js"],"component---src-pages-blog-index-jsx":["/component---src-pages-blog-index-jsx-fbadef3ac4ee29707717.js"],"component---src-pages-examples-ios-copy-to-clipboard-index-jsx":["/component---src-pages-examples-ios-copy-to-clipboard-index-jsx-d23e664c489cb338eaa5.js"],"component---src-pages-index-jsx":["/component---src-pages-index-jsx-527d06b02a3ede1edfc6.js"],"component---src-pages-blog-cfbundleversion-invalid-mdx":["/component---src-pages-blog-cfbundleversion-invalid-mdx-94a345b74e5cfdd780fb.js"],"component---src-pages-blog-cifilter-colorwheel-mdx":["/component---src-pages-blog-cifilter-colorwheel-mdx-0f8e25bc9aaa604c8e8a.js"],"component---src-pages-blog-cifilterio-mdx":["/component---src-pages-blog-cifilterio-mdx-d52d3a149a9554d3a744.js"],"component---src-pages-blog-civector-codable-mdx":["/component---src-pages-blog-civector-codable-mdx-c3dd9456eaf481c6d445.js"],"component---src-pages-blog-color-compatibility-pod-mdx":["/component---src-pages-blog-color-compatibility-pod-mdx-7e33da878f3b4774bc9c.js"],"component---src-pages-blog-dark-mode-uicolor-compatibility-mdx":["/component---src-pages-blog-dark-mode-uicolor-compatibility-mdx-02ddc0d6bd4de7b1db3b.js"],"component---src-pages-blog-docker-commands-mdx":["/component---src-pages-blog-docker-commands-mdx-810e7a80e10c83b24c3f.js"],"component---src-pages-blog-easy-gatsby-image-components-mdx":["/component---src-pages-blog-easy-gatsby-image-components-mdx-7f42ce1cbd6bc89c1082.js"],"component---src-pages-blog-gatsby-mdx-frontmatter-mdx":["/component---src-pages-blog-gatsby-mdx-frontmatter-mdx-f9be70037b9e2e21c90d.js"],"component---src-pages-blog-gpu-capture-flickering-mdx":["/component---src-pages-blog-gpu-capture-flickering-mdx-100222d0dc7a89c00e10.js"],"component---src-pages-blog-install-nokogiri-macos-mojave-mdx":["/component---src-pages-blog-install-nokogiri-macos-mojave-mdx-0c0216266e2f10cc621f.js"],"component---src-pages-blog-my-bucket-list-mdx":["/component---src-pages-blog-my-bucket-list-mdx-8ce7981cdc3d11e1ed94.js"],"component---src-pages-blog-nsobject-equatable-mdx":["/component---src-pages-blog-nsobject-equatable-mdx-86d882146afdb3f2f590.js"],"component---src-pages-blog-pyparsing-trees-mdx":["/component---src-pages-blog-pyparsing-trees-mdx-b7ec2f09c8d9cd5c6444.js"],"component---src-pages-blog-rxswift-multiple-subscribers-mdx":["/component---src-pages-blog-rxswift-multiple-subscribers-mdx-cdbbd3935158a9e1a356.js"],"component---src-pages-blog-swift-pointer-uint-mdx":["/component---src-pages-blog-swift-pointer-uint-mdx-a8dbb6e8594a207a6e2b.js"],"component---src-pages-blog-swiftui-relativedatetimeformatter-mdx":["/component---src-pages-blog-swiftui-relativedatetimeformatter-mdx-e6039fa8a202a2cd84e0.js"],"component---src-pages-blog-tables-are-hard-mdx":["/component---src-pages-blog-tables-are-hard-mdx-98054d2aa39b85515807.js"],"component---src-pages-blog-taking-down-sfsymbols-mdx":["/component---src-pages-blog-taking-down-sfsymbols-mdx-0354daa4c5fa044e58f6.js"],"component---src-pages-blog-uibutton-padding-mdx":["/component---src-pages-blog-uibutton-padding-mdx-d8e0c07739ebfa153d74.js"],"component---src-pages-blog-uiwindowscene-black-screen-mdx":["/component---src-pages-blog-uiwindowscene-black-screen-mdx-9ffc2c331cb7926aa280.js"],"component---src-pages-blog-userdefaults-set-nil-mdx":["/component---src-pages-blog-userdefaults-set-nil-mdx-ed59ea178b122563509a.js"],"component---src-pages-blog-data-over-the-app-store-mdx":["/component---src-pages-blog-data-over-the-app-store-mdx-d4daaa672ec1b9d69806.js"],"component---src-pages-blog-popover-uinavigationcontroller-preferredcontentsize-mdx":["/component---src-pages-blog-popover-uinavigationcontroller-preferredcontentsize-mdx-631b2001406bad11de2b.js"],"component---src-pages-blog-swift-dependency-injection-mdx":["/component---src-pages-blog-swift-dependency-injection-mdx-a7f4225e0c0fbf7af63d.js"]};/*]]>*/</script><script src="/webpack-runtime-d51ba99c045ccca0b6de.js" async=""></script><script src="/0-036063f1e7af05c0db20.js" async=""></script><script src="/1-be6f2e1f06814dc7eacb.js" async=""></script><script src="/2-f216f924b3884ad57b76.js" async=""></script><script src="/app-aa48f7bb10e6f6ffe94e.js" async=""></script><script src="/component---src-pages-blog-cifilter-colorwheel-mdx-0f8e25bc9aaa604c8e8a.js" async=""></script></body></html>