<!DOCTYPE html><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="stylesheet" href="https://meyerweb.com/eric/tools/css/reset/reset.css"/><meta name="generator" content="Gatsby 2.18.10"/><title data-react-helmet="true">Nested Property Wrappers in Swift</title><link data-react-helmet="true" href="https://fonts.googleapis.com/css?family=Roboto:700" rel="stylesheet" type="text/css"/><link data-react-helmet="true" href="https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,400;1,300&amp;display=swap" rel="stylesheet"/><link data-react-helmet="true" rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.0/styles/atom-one-light.min.css"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="@noahsark769"/><meta data-react-helmet="true" property="og:url" content="https://noahgilmore.com/blog/nesting-property-wrappers/"/><meta data-react-helmet="true" property="og:title" content="Nested Property Wrappers in Swift"/><meta data-react-helmet="true" property="og:description" content="You can nest property wrapers in Swift, but it&#x27;s difficult. NSHipster has a great article about all things property wrappers, and the summary of trying to compose them (which others have echoed) is that it&#x27;s hard and prone to compiler errors..."/><meta data-react-helmet="true" name="description" content="You can nest property wrapers in Swift, but it&#x27;s difficult. NSHipster has a great article about all things property wrappers, and the summary of trying to compose them (which others have echoed) is that it&#x27;s hard and prone to compiler errors..."/><meta data-react-helmet="true" property="og:image" content="https://noahgilmore.com/static/propertywrappers-1-f9e6ec0a35a9f389e4120a81c7c27191.png"/><meta data-react-helmet="true" name="twitter:image" content="https://noahgilmore.com/static/propertywrappers-1-f9e6ec0a35a9f389e4120a81c7c27191.png"/><style data-styled="kZJxiO  dPRTlW ihgmJg kFcWnY jjWRSm dasclg hAFKjM jtmfVw gablWf bDzSYv iQPMaQ cMmljL iVJEJp llzgZ hrBqpY iKttdc bmzpLX fecpOA emBdTA fgyWQq eNfbJZ fPVIZy itlfwG jzMaZh dfIsSY" data-styled-version="4.4.1">
/* sc-component-id: CaptionedImage__Wrap-owr0zk-0 */
.hrBqpY{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin:20px 0;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}
/* sc-component-id: CaptionedImage__Container-owr0zk-1 */
.iKttdc{-webkit-flex:1;-ms-flex:1;flex:1;max-width:400px;}
/* sc-component-id: CaptionedImage__Caption-owr0zk-2 */
.bmzpLX{font-family:"Gentium Book Basic",times,serif;font-style:italic;font-size:16px;color:#999;margin-bottom:30px;margin-top:12px;text-align:center;line-height:1.2em;} .bmzpLX img{width:100%;margin-bottom:10px;}
/* sc-component-id: Tweet__Wrapper-sc-13ea3j0-0 */
.emBdTA{width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}
/* sc-component-id: Tweet__InnerWrapper-sc-13ea3j0-1 */
.fgyWQq{width:1px;min-width:500px;} @media all and (max-width:600px){.fgyWQq{min-width:90%;}}
/* sc-component-id: sc-global-3677396698 */
@font-face{font-family:'Bariol';src:url('/static/Bariol-Regular-b0d07df351f442860551405a4be58de7.eot');src:url('/static/Bariol-Regular-b0d07df351f442860551405a4be58de7.eot?#iefix') format('embedded-opentype'), url('/static/Bariol-Regular-4afd94f0fd93a1f63b46c6c6ad792f71.woff') format('woff'), url('/static/Bariol-Regular-8a7d23d53f8d118e190c63e4e81a91fe.ttf') format('truetype'), url('/static/Bariol-Regular-75b90056f4cdf5a742897ec0a59569d7.svg#svgBariolRegular') format('svg');} *{box-sizing:border-box !important;} body{margin:0;padding:0;} @media (prefers-color-scheme:dark){html,body{background-color:#23282f;}}
/* sc-component-id: default__A-phsh4y-5 */
.fPVIZy,.fPVIZy:hover,.fPVIZy:focus{outline:none;color:inherit;-webkit-text-decoration:none;text-decoration:none;}
/* sc-component-id: Nav__StyledNav-sc-17txzo8-0 */
.dPRTlW{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;padding:20px 60px;border-bottom:1px solid #ddd;} @media all and (max-width:600px){.dPRTlW{padding:20px;}} @media (prefers-color-scheme:dark){.dPRTlW{border-color:#777;}}
/* sc-component-id: Nav__Title-sc-17txzo8-1 */
.ihgmJg{-webkit-flex:2;-ms-flex:2;flex:2;font-family:"Roboto","Helvetica Neue","Helvetica",sans-serif;font-size:28px;font-display:swap;} @media (prefers-color-scheme:dark){.ihgmJg{color:#fff;}}
/* sc-component-id: Nav__NavLinks-sc-17txzo8-2 */
.jjWRSm{margin:0;padding:0;-webkit-flex:10;-ms-flex:10;flex:10;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:horizontal;-ms-flex-direction:horizontal;flex-direction:horizontal;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;height:100%;-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;}
/* sc-component-id: Nav__NavLink-sc-17txzo8-3 */
.dasclg{margin:0;padding:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:vertical;-ms-flex-direction:vertical;flex-direction:vertical;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;text-align:center;font-family:"Bariol","Helvetica Neue","Helvetica",sans-serif;font-size:16px;padding:0px 20px;}
/* sc-component-id: Nav__StyledA-sc-17txzo8-4 */
.kFcWnY{height:auto;color:rgba(128,165,177,1);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:vertical;-ms-flex-direction:vertical;flex-direction:vertical;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-transition:0.2s ease-in-out;-moz-transition:0.2s ease-in-out;-o-transition:0.2s ease-in-out;-webkit-transition:0.2s ease-in-out;transition:0.2s ease-in-out;} .kFcWnY,.kFcWnY:hover,.kFcWnY:focus{outline:none;color:inherit;-webkit-text-decoration:none;text-decoration:none;} .kFcWnY:hover{color:rgba(151,195,210,1);}
/* sc-component-id: BlogPost__BlogPostContainer-tv75ut-0 */
.hAFKjM{padding:60px 0;margin:0 auto;width:90%;} @media all and (min-width:600px){.hAFKjM{max-width:700px;margin:auto;}} @media all and (max-width:600px){.hAFKjM{width:100%;padding:20px 0;}}
/* sc-component-id: BlogPost__TitleContainer-tv75ut-1 */
.iQPMaQ{width:100%;margin-bottom:40px;}
/* sc-component-id: BlogPost__Heading-tv75ut-2 */
.cMmljL{width:100%;font-family:"Roboto","Helvetica Neue","Helvetica",sans-serif;font-size:34px;margin-bottom:10px;line-height:1.2em;} @media (prefers-color-scheme:dark){.cMmljL{color:#fff;}}
/* sc-component-id: BlogPost__DateContainer-tv75ut-3 */
.iVJEJp{font-family:"Merriweather",times,serif;font-style:italic;font-size:13px;color:#999;}
/* sc-component-id: MarkdownContent__Container-gk8834-0 */
.llzgZ p,.llzgZ li{margin:0;padding:0;font-family:"Merriweather",times,serif;font-size:18px;line-height:29px;color:#333;padding-bottom:15px;margin-top:15px;} @media all and (max-width:600px){.llzgZ p,.llzgZ li{width:90%;margin:15px auto 0 auto;}} @media (prefers-color-scheme:dark){.llzgZ p,.llzgZ li{color:#fff;}} .llzgZ blockquote{background-color:#faf9f7;border-left:4px solid #e5e4e1;padding:20px;font-style:italic;font-synthesis:weight;font-weight:300;} @media (prefers-color-scheme:dark){.llzgZ blockquote{background-color:#2b2c2f;}} .llzgZ blockquote p{margin:0;padding:0;color:#555;} @media (prefers-color-scheme:dark){.llzgZ blockquote p{color:#fff;}} .llzgZ a{color:#1A3F4B;-webkit-transition:0.2s ease-in-out;-moz-transition:0.2s ease-in-out;-o-transition:0.2s ease-in-out;-webkit-transition:0.2s ease-in-out;transition:0.2s ease-in-out;} @media (prefers-color-scheme:dark){.llzgZ a{color:#60b5d1;}} .llzgZ a:hover{color:#47656E;} @media (prefers-color-scheme:dark){.llzgZ a:hover{color:#6bcfef;}} .llzgZ code{font-family:monospace;font-size:16px;padding:3px 5px;margin:0px 2px;} @media (prefers-color-scheme:dark){.llzgZ code{color:#fff;}} .llzgZ code:not(.vscode-highlight-code){font-family:monospace;font-size:16px;background-color:#faf9f7;border:1px solid #e5e4e1;padding:3px 5px;margin:0px 2px;color:#555;} @media (prefers-color-scheme:dark){.llzgZ code:not(.vscode-highlight-code){color:#fff;background-color:#3f3f3f;}} .llzgZ code:first-child{margin-left:0;} .llzgZ pre{display:block;margin:0;padding:0;margin-top:10px;border:1px solid #e5e4e1;border-radius:2px;} @media all and (max-width:600px){.llzgZ pre{width:100%;margin:10px auto 0 auto;border-left:none;border-right:none;border-radius:0;overflow-x:scroll;}} .llzgZ pre > code{display:block;margin:0;padding:10px;font-family:monospace;font-size:14px;line-height:17px;white-space:pre-wrap;} @media all and (max-width:600px){.llzgZ pre > code{font-size:15px;white-space:pre;padding:15px 5% 15px 5%;width:100%;}} .llzgZ pre + p{margin-top:30px;} .llzgZ ol{margin-left:30px;} @media all and (max-width:600px){.llzgZ ol{width:90%;margin:0 auto 0 30px;}} @media (prefers-color-scheme:dark){.llzgZ ol{color:#fff;}} .llzgZ ol li{list-style-type:decimal;} .llzgZ ul li{list-style-type:square;margin-left:40px;} @media all and (max-width:600px){.llzgZ ul li{width:90%;margin:0 auto;}} @media (prefers-color-scheme:dark){.llzgZ ul li{color:#fff;}} .llzgZ h1,.llzgZ h2,.llzgZ h3,.llzgZ h4,.llzgZ h5,.llzgZ h6{width:100%;font-family:"Roboto","Helvetica Neue","Helvetica",sans-serif;margin-bottom:10px;margin-top:40px;} @media all and (max-width:600px){.llzgZ h1,.llzgZ h2,.llzgZ h3,.llzgZ h4,.llzgZ h5,.llzgZ h6{width:90%;margin:40px auto 10px auto;}} @media (prefers-color-scheme:dark){.llzgZ h1,.llzgZ h2,.llzgZ h3,.llzgZ h4,.llzgZ h5,.llzgZ h6{color:#fff;}} .llzgZ h1{font-size:28px;} .llzgZ h2{font-size:24px;} .llzgZ h3{font-size:20px;} .llzgZ em{font-style:italic;} .llzgZ strong{font-weight:bold;}
/* sc-component-id: EndButtons__Container-sc-1rt8k5q-0 */
.eNfbJZ{width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:horizontal;-ms-flex-direction:horizontal;flex-direction:horizontal;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-top:40px;}
/* sc-component-id: EndButtons__ButtonStyle-sc-1rt8k5q-1 */
.itlfwG{background-color:rgba(128,165,177,1);-webkit-transition:0.2s ease-in-out;-moz-transition:0.2s ease-in-out;-o-transition:0.2s ease-in-out;-webkit-transition:0.2s ease-in-out;transition:0.2s ease-in-out;width:100px;padding:10px 20px;text-align:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:vertical;-ms-flex-direction:vertical;flex-direction:vertical;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;border-radius:4px;margin-right:20px;} .itlfwG:hover{background-color:rgba(151,195,210,1);}.jzMaZh{background-color:rgba(128,165,177,1);-webkit-transition:0.2s ease-in-out;-moz-transition:0.2s ease-in-out;-o-transition:0.2s ease-in-out;-webkit-transition:0.2s ease-in-out;transition:0.2s ease-in-out;width:100px;padding:10px 20px;text-align:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:vertical;-ms-flex-direction:vertical;flex-direction:vertical;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;border-radius:4px;} .jzMaZh:hover{background-color:rgba(151,195,210,1);}
/* sc-component-id: Disqus__Wrapper-sc-15q2k8t-0 */
.dfIsSY{margin-top:80px;}
/* sc-component-id: BlogPageLayout__Container-sc-1pnb15k-0 */
@media (prefers-color-scheme:dark){.kZJxiO{background-color:#23282f;}}
/* sc-component-id: BlogPageLayout__NonContent-sc-1pnb15k-1 */
@media all and (max-width:600px){.bDzSYv{padding-right:5%;padding-left:5%;}}
/* sc-component-id: BlogPageLayout__PostContainerOuter-sc-1pnb15k-4 */
.jtmfVw{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;padding:0;} @media all and (max-width:1200px){.jtmfVw{padding:0;}}
/* sc-component-id: BlogPageLayout__PostContainerInner-sc-1pnb15k-5 */
.gablWf{display:block;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:100%;}
/* sc-component-id: BlogPageLayout__MyTag-sc-1pnb15k-8 */
.fecpOA{position:relative;} @media all and (min-width:600px){.fecpOA{margin-left:-50px;padding-left:50px;}}</style><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link rel="alternate" type="application/rss+xml" title="Noah Gilmore&#x27;s Development Blog: iOS" href="/blog/ios.xml"/><link rel="alternate" type="application/rss+xml" title="Noah Gilmore&#x27;s Development Blog: Web" href="/blog/web.xml"/><link rel="alternate" type="application/rss+xml" title="Noah Gilmore&#x27;s Development Blog" href="/blog/rss.xml"/><link as="script" rel="preload" href="/webpack-runtime-95a3a5701a40a55f5cc9.js"/><link as="script" rel="preload" href="/app-02c65be0a637524b9e44.js"/><link as="script" rel="preload" href="/commons-64c3958e35f85e532944.js"/><link as="script" rel="preload" href="/component---src-pages-blog-nesting-property-wrappers-mdx-889dadc41c73688faeac.js"/><link as="fetch" rel="preload" href="/page-data/blog/nesting-property-wrappers/page-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><div class="BlogPageLayout__Container-sc-1pnb15k-0 kZJxiO"><nav class="Nav__StyledNav-sc-17txzo8-0 dPRTlW"><div class="Nav__Title-sc-17txzo8-1 ihgmJg"><a href="/blog" class="default__A-phsh4y-5 Nav__StyledA-sc-17txzo8-4 kFcWnY">NOAH GILMORE</a></div><ul class="default__UL-phsh4y-2 Nav__NavLinks-sc-17txzo8-2 jjWRSm"><li class="default__LI-phsh4y-3 Nav__NavLink-sc-17txzo8-3 dasclg"><a aria-label="Blog Home" href="/blog" class="default__A-phsh4y-5 Nav__StyledA-sc-17txzo8-4 kFcWnY"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" color="rgba(128, 165, 177, 1)" size="24" style="color:rgba(128, 165, 177, 1)" height="24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M258.5 104.1c-1.5-1.2-3.5-1.2-5 0l-156 124.8c-.9.8-1.5 1.9-1.5 3.1v230c0 1.1.9 2 2 2h108c1.1 0 2-.9 2-2V322c0-1.1.9-2 2-2h92c1.1 0 2 .9 2 2v140c0 1.1.9 2 2 2h108c1.1 0 2-.9 2-2V232c0-1.2-.6-2.4-1.5-3.1l-156-124.8z"></path><path d="M458.7 204.2l-189-151.4C265.9 49.7 261 48 256 48s-9.9 1.7-13.7 4.8L160 119.7V77.5c0-1.1-.9-2-2-2H98c-1.1 0-2 .9-2 2v92.2l-42.7 35.1c-3.1 2.5-5.1 6.2-5.3 10.2-.2 4 1.3 7.9 4.1 10.7 2.6 2.6 6.1 4.1 9.9 4.1 3.2 0 6.3-1.1 8.8-3.1l183.9-148c.5-.4.9-.4 1.3-.4s.8.1 1.3.4l183.9 147.4c2.5 2 5.6 3.1 8.8 3.1 3.7 0 7.2-1.4 9.9-4.1 2.9-2.8 4.4-6.7 4.2-10.7-.3-4-2.2-7.7-5.4-10.2z"></path></svg></a></li><li class="default__LI-phsh4y-3 Nav__NavLink-sc-17txzo8-3 dasclg"><a aria-label="Twitter" href="https://twitter.com/noahsark769" class="default__A-phsh4y-5 Nav__StyledA-sc-17txzo8-4 kFcWnY"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" color="rgba(128, 165, 177, 1)" size="24" style="color:rgba(128, 165, 177, 1)" height="24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg></a></li><li class="default__LI-phsh4y-3 Nav__NavLink-sc-17txzo8-3 dasclg"><a aria-label="App Store" href="https://apps.apple.com/us/app/cifilter-io/id1457458557" class="default__A-phsh4y-5 Nav__StyledA-sc-17txzo8-4 kFcWnY"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" color="rgba(128, 165, 177, 1)" size="24" style="color:rgba(128, 165, 177, 1)" height="24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M256 48C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48zm-78.9 296.9c-2.7 4.6-7.5 7.1-12.5 7.1-2.5 0-5-.6-7.3-2-6.9-4-9.2-12.8-5.2-19.7l14.2-23.6c1.5-2.5 4.1-4 7-4h2.1c10.3 0 17.5 6.2 19.6 12.2l-17.9 30zm120.2-46.4l-93 .1h-61.8c-8.2 0-14.8-6.8-14.4-15 .3-7.8 7.1-13.7 14.9-13.7h44.8l53.1-90.4-17.2-29.3c-3.9-6.7-2.2-15.5 4.4-19.7 7-4.5 16.2-2.2 20.3 4.8l9.2 15.7h.1l9.2-15.7c4.1-7 13.4-9.3 20.3-4.8 6.6 4.2 8.3 13 4.4 19.7l-17.2 29.3-16.7 28.5-36.3 61.9v.1h53.5c6.7 0 15.1 3.6 18.5 9.4l.3.6c3 5.1 4.7 8.6 4.7 13.7-.1 2.8-1.1 4.8-1.1 4.8zm72.2.1h-25.2v.1l18.4 31.3c4 6.8 2.1 15.8-4.8 20-2.3 1.4-4.9 2.1-7.5 2.1-5 0-9.8-2.6-12.5-7.1l-27.2-46.3-16.9-28.8-21.8-37.3c-6.4-10.9-6.7-24.5-.6-35.3 4.3-7.6 7.6-9.6 7.6-9.6l48.5 82.1h41.7c7.8 0 14.5 6 14.9 13.7.3 8.3-6.3 15.1-14.6 15.1z"></path></svg></a></li></ul></nav><div class="BlogPost__BlogPostContainer-tv75ut-0 hAFKjM"><div class="BlogPageLayout__PostContainerOuter-sc-1pnb15k-4 jtmfVw"><div class="BlogPageLayout__PostContainerInner-sc-1pnb15k-5 gablWf"><div class="BlogPageLayout__NonContent-sc-1pnb15k-1 bDzSYv"><div><div class="BlogPost__TitleContainer-tv75ut-1 iQPMaQ"><h1 class="BlogPost__Heading-tv75ut-2 cMmljL">Nested Property Wrappers in Swift</h1><p class="BlogPost__DateContainer-tv75ut-3 iVJEJp">May 11, 2020</p></div></div></div><div class="MarkdownContent__Container-gk8834-0 llzgZ"><div class="CaptionedImage__Wrap-owr0zk-0 hrBqpY"><div max="400" class="CaptionedImage__Container-owr0zk-1 iKttdc"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden"><div style="width:100%;padding-bottom:96.37462235649546%"></div><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsSAAALEgHS3X78AAACYklEQVQ4y5WU61KjQBCFfYxNmIEZGC4DgXAJxhCTrFq7tbrWvv/bnD1DYipqNPqjCyh6vuk+fbkSQiDLMiRxDCElwqxEmM6gIgNdZFBJhCSawKOfkAKSPr7vH59v7coBbZ4jTRJIP0BkKyT1DeJqgXi5RNy0yAuD1MRIeUlAn49gR+AYoQM6R2+KkNDZ9h/s9QPSdoOsf0BTzDFPM+hAfw0YM2UpfUYgEeU1ivUjQTskzUDoLbrZHIuigPIvAD3PQ86UHdQ5jkA7R3H7F9mCwHZN4BbLeYtVWfL/FyK01iJN0z1QHiK8fULabRjhirYegUNVEahOCvOtCJ+o4f2YbtZtRw0raqjeaOjeT7/faeizNVyEs80z0v4n4nrFSHfUsEaXWWbgqixOWkd+XmUXoU5ytssa7eIad/cPmDUd4p523cK0NSzlsXF0gMjzGh6BQXC8XWuF2BiI6Q+IgB0Q6r0J+WGTnwHyoI72za0TBCpAu6GWTFdxcoLCwi9z2MjCqOhdxc9GGOiQI8dDZQfbLNHfP2L16xm2bTFjyrunPyiLCr640DZCuNs4fopAvgcmhYotQqadNwtEJoEJQ7TzGsZJIcRHKbsqJ2wJQUdqF4QICZXCO5iAN52MT+c/mU7Pwl5V2fB2rTwkxoPn7TeLi/jFPB70hHzVzOcm5lVjO5BU3ChKs8IaJtKIaIlR3DYRjZFreXn0HHAcPepnuwF126AqC/Tsu+3dgKFPsG0rDHXBHpQHrS8sBwfUOsDqpqGV6DuLsh/Q7X7zf4jJZHpYsl9YsA7mRu9F6NMIxoNvDn+W8n85nBjy31BvLgAAAABJRU5ErkJggg==" alt="Screenshot of code showing 6 nested property wrappers" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/f9e6ec0a35a9f389e4120a81c7c27191/59d48/propertywrappers-1.png 150w,
/static/f9e6ec0a35a9f389e4120a81c7c27191/c6a2b/propertywrappers-1.png 300w,
/static/f9e6ec0a35a9f389e4120a81c7c27191/78d2a/propertywrappers-1.png 600w,
/static/f9e6ec0a35a9f389e4120a81c7c27191/e056e/propertywrappers-1.png 662w" sizes="(max-width: 600px) 100vw, 600px" /><img loading="lazy" sizes="(max-width: 600px) 100vw, 600px" srcset="/static/f9e6ec0a35a9f389e4120a81c7c27191/59d48/propertywrappers-1.png 150w,
/static/f9e6ec0a35a9f389e4120a81c7c27191/c6a2b/propertywrappers-1.png 300w,
/static/f9e6ec0a35a9f389e4120a81c7c27191/78d2a/propertywrappers-1.png 600w,
/static/f9e6ec0a35a9f389e4120a81c7c27191/e056e/propertywrappers-1.png 662w" src="/static/f9e6ec0a35a9f389e4120a81c7c27191/78d2a/propertywrappers-1.png" alt="Screenshot of code showing 6 nested property wrappers" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><div class="CaptionedImage__Caption-owr0zk-2 bmzpLX">Pop quiz: what does this print?</div></div></div><p>You can nest <a href="https://www.swiftbysundell.com/articles/property-wrappers-in-swift/">property wrapers</a> in Swift, but it&#x27;s difficult. NSHipster has a <a href="https://nshipster.com/propertywrapper/">great article</a> about all things property wrappers, and the summary of trying to compose them (which others have echoed) is that it&#x27;s hard and prone to compiler errors.</p><p>But, at least as of Swift 5.2, nesting property wrappers (having a property wrapper of a property wrapper, or equivalently, having a property with <em>two</em> property wrappers) is possible if you try hard enough! In this post I&#x27;ll go over a method I&#x27;ve found to effectively structure property wrappers for composition. <a href="#is-this-too-much">Skip</a> down the page if you want an opinion on whether you <em>should actually</em> do this.</p><h1 id="property-wrappers" class="BlogPageLayout__MyTag-sc-1pnb15k-8 fecpOA">Property Wrappers</h1><p>Property wrappers are one of the newest features of the ever <a href="https://github.com/apple/swift-evolution">evolving</a> Swift language, and they&#x27;re not without controversy. You&#x27;ll probably see them mostly in SwiftUI, where they figure prominently - <code>@State</code>, <code>@Binding</code>, <code>@ObservedObject</code>, etc.</p><p>If you&#x27;re not familiar with property wrappers, I&#x27;d check out any of the following before reading further:</p><ul><li><a href="https://www.hackingwithswift.com/quick-start/swiftui/understanding-property-wrappers-in-swift-and-swiftui">Hacking With Swift</a></li><li><a href="https://www.swiftbysundell.com/articles/property-wrappers-in-swift/">Swift By Sundell</a></li><li><a href="https://nshipster.com/propertywrapper/">NSHipster</a></li><li><a href="https://docs.swift.org/swift-book/LanguageGuide/Properties.html">Swift Documentation on Properties</a></li><li><a href="https://www.vadimbulavin.com/swift-5-property-wrappers/">The Complete Guide to Property Wrappers in Swift 5</a></li></ul><p>Let&#x27;s consider a self-contained example - a property wrapper which wraps a string, and always appends a suffix.</p><pre class="dark-default-dark vscode-highlight" data-language="swift"><code class="vscode-highlight-code"><span class="vscode-highlight-line"><span class="mtk15">import</span><span class="mtk1"> </span><span class="mtk10">Foundation</span></span>
<span class="vscode-highlight-line"><span class="mtk1"></span></span>
<span class="vscode-highlight-line"><span class="mtk4">@propertyWrapper</span></span>
<span class="vscode-highlight-line"><span class="mtk4">struct</span><span class="mtk1"> </span><span class="mtk10">Appending</span><span class="mtk1"> {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">private</span><span class="mtk1">(</span><span class="mtk4">set</span><span class="mtk1">) </span><span class="mtk4">var</span><span class="mtk1"> value: </span><span class="mtk10">String</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">let</span><span class="mtk1"> toAppend: </span><span class="mtk10">String</span></span>
<span class="vscode-highlight-line"><span class="mtk1"></span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">var</span><span class="mtk1"> wrappedValue: </span><span class="mtk10">String</span><span class="mtk1"> {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        </span><span class="mtk4">get</span><span class="mtk1"> { value }</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        </span><span class="mtk4">set</span><span class="mtk1"> { value = newValue + </span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk12">toAppend</span><span class="mtk1"> }</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    }</span></span>
<span class="vscode-highlight-line"><span class="mtk1"></span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">init</span><span class="mtk1">(</span><span class="mtk11">wrappedValue</span><span class="mtk1">: </span><span class="mtk10">String</span><span class="mtk1">, </span><span class="mtk11">_</span><span class="mtk1"> </span><span class="mtk12">toAppend</span><span class="mtk1">: </span><span class="mtk10">String</span><span class="mtk1">) {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        </span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk12">value</span><span class="mtk1"> = wrappedValue</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        </span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk12">toAppend</span><span class="mtk1"> = toAppend</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    }</span></span>
<span class="vscode-highlight-line"><span class="mtk1">}</span></span>
<span class="vscode-highlight-line"><span class="mtk1"></span></span>
<span class="vscode-highlight-line"><span class="mtk4">struct</span><span class="mtk1"> </span><span class="mtk10">Test</span><span class="mtk1"> {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">@Appending</span><span class="mtk1">(</span><span class="mtk8">&quot;!&quot;</span><span class="mtk1">) </span><span class="mtk4">var</span><span class="mtk1"> name: </span><span class="mtk10">String</span><span class="mtk1"> = </span><span class="mtk8">&quot;&quot;</span></span>
<span class="vscode-highlight-line"><span class="mtk1"></span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">init</span><span class="mtk1">(</span><span class="mtk11">_</span><span class="mtk1"> </span><span class="mtk12">name</span><span class="mtk1">: </span><span class="mtk10">String</span><span class="mtk1">) {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        </span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk12">name</span><span class="mtk1"> = name</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    }</span></span>
<span class="vscode-highlight-line"><span class="mtk1">}</span></span>
<span class="vscode-highlight-line"><span class="mtk1"></span></span>
<span class="vscode-highlight-line"><span class="mtk4">var</span><span class="mtk1"> a = </span><span class="mtk11">Test</span><span class="mtk1">(</span><span class="mtk8">&quot;Noah&quot;</span><span class="mtk1">)</span></span>
<span class="vscode-highlight-line"><span class="mtk11">print</span><span class="mtk1">(a.</span><span class="mtk12">name</span><span class="mtk1">) </span><span class="mtk3">// Prints &quot;Noah!&quot;</span></span></code></pre><p>This wrapper takes in a wrapped value (the <code>= &quot;&quot;</code>) and an additional string to append (the <code>&quot;!&quot;</code>), and vends its wrapped value as the result of appending the string to the internal storage. This works well enough, but suppose we try to nest it:</p><pre class="dark-default-dark vscode-highlight" data-language="swift"><code class="vscode-highlight-code"><span class="vscode-highlight-line"><span class="mtk4">struct</span><span class="mtk1"> </span><span class="mtk10">Test</span><span class="mtk1"> {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">@Appending</span><span class="mtk1">(</span><span class="mtk8">&quot;!&quot;</span><span class="mtk1">)</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">@Appending</span><span class="mtk1">(</span><span class="mtk8">&quot;?&quot;</span><span class="mtk1">)</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">var</span><span class="mtk1"> name: </span><span class="mtk10">String</span><span class="mtk1"> = </span><span class="mtk8">&quot;&quot;</span></span>
<span class="vscode-highlight-line"><span class="mtk1"></span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">init</span><span class="mtk1">(</span><span class="mtk11">_</span><span class="mtk1"> </span><span class="mtk12">name</span><span class="mtk1">: </span><span class="mtk10">String</span><span class="mtk1">) {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        </span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk12">name</span><span class="mtk1"> = name</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    }</span></span>
<span class="vscode-highlight-line"><span class="mtk1">}</span></span></code></pre><p>This actually fails to compile with the following error:</p><pre class="dark-default-dark vscode-highlight" data-language="swift"><code class="vscode-highlight-code"><span class="vscode-highlight-line"><span class="mtk1">AppendingSimple.</span><span class="mtk12">swift</span><span class="mtk1">:</span><span class="mtk7">20</span><span class="mtk1">:</span><span class="mtk7">22</span><span class="mtk1">: error: cannot convert value of type &#x27;Appending&#x27; to expected argument type &#x27;</span><span class="mtk10">String</span><span class="mtk1">&#x27;</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">@Appending</span><span class="mtk1">(</span><span class="mtk8">&quot;!&quot;</span><span class="mtk1">) </span><span class="mtk4">@Appending</span><span class="mtk1">(</span><span class="mtk8">&quot;?&quot;</span><span class="mtk1">) </span><span class="mtk4">var</span><span class="mtk1"> name: </span><span class="mtk10">String</span><span class="mtk1"> = </span><span class="mtk8">&quot;&quot;</span></span>
<span class="vscode-highlight-line"><span class="mtk1">                     ^</span></span>
<span class="vscode-highlight-line"><span class="mtk1">AppendingSimple.</span><span class="mtk12">swift</span><span class="mtk1">:</span><span class="mtk7">20</span><span class="mtk1">:</span><span class="mtk7">6</span><span class="mtk1">: error: value of type &#x27;</span><span class="mtk10">String</span><span class="mtk1">&#x27; has no member &#x27;wrappedValue&#x27;</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">@Appending</span><span class="mtk1">(</span><span class="mtk8">&quot;!&quot;</span><span class="mtk1">) </span><span class="mtk4">@Appending</span><span class="mtk1">(</span><span class="mtk8">&quot;?&quot;</span><span class="mtk1">) </span><span class="mtk4">var</span><span class="mtk1"> name: </span><span class="mtk10">String</span><span class="mtk1"> = </span><span class="mtk8">&quot;&quot;</span></span>
<span class="vscode-highlight-line"><span class="mtk1">     ^~~~~~~~~~~~~~</span></span></code></pre><p>Which...makes sense! Appending only wraps Strings, so trying to wrap an <code>Appending</code> with another <code>Appending</code> doesn&#x27;t work.</p><h1 id="nesting" class="BlogPageLayout__MyTag-sc-1pnb15k-8 fecpOA">Nesting</h1><p>The <a href="https://github.com/apple/swift-evolution/blob/master/proposals/0258-property-wrappers.md#composition-of-property-wrappers">Swift Evolution Proposal</a> details how composition of property wrappers works - the <code>wrappedValue</code> access goes two levels deep.</p><p>For example, if we declare a nested wrapped property like this:</p><pre class="dark-default-dark vscode-highlight" data-language="swift"><code class="vscode-highlight-code"><span class="vscode-highlight-line"><span class="mtk4">@DelayedMutable</span><span class="mtk1"> </span><span class="mtk4">@Copying</span><span class="mtk1"> </span><span class="mtk4">var</span><span class="mtk1"> path: UIBezierPath</span></span></code></pre><p>That&#x27;s equivalent to having a regular property like this:</p><pre class="dark-default-dark vscode-highlight" data-language="swift"><code class="vscode-highlight-code"><span class="vscode-highlight-line"><span class="mtk4">private</span><span class="mtk1"> </span><span class="mtk4">var</span><span class="mtk1"> _path: DelayedMutable&lt;Copying&lt;UIBezierPath&gt;&gt; = .</span><span class="mtk4">init</span><span class="mtk1">()</span></span>
<span class="vscode-highlight-line"><span class="mtk4">var</span><span class="mtk1"> path: UIBezierPath {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">  </span><span class="mtk4">get</span><span class="mtk1"> { </span><span class="mtk15">return</span><span class="mtk1"> _path.</span><span class="mtk12">wrappedValue</span><span class="mtk1">.</span><span class="mtk12">wrappedValue</span><span class="mtk1"> }</span></span>
<span class="vscode-highlight-line"><span class="mtk1">  </span><span class="mtk4">set</span><span class="mtk1"> { _path.</span><span class="mtk12">wrappedValue</span><span class="mtk1">.</span><span class="mtk12">wrappedValue</span><span class="mtk1"> = newValue }</span></span>
<span class="vscode-highlight-line"><span class="mtk1">} </span></span></code></pre><p>Now, consider our example:</p><pre class="dark-default-dark vscode-highlight" data-language="swift"><code class="vscode-highlight-code"><span class="vscode-highlight-line"><span class="mtk4">@Appending</span><span class="mtk1">(</span><span class="mtk8">&quot;!&quot;</span><span class="mtk1">) </span><span class="mtk4">@Appending</span><span class="mtk1">(</span><span class="mtk8">&quot;?&quot;</span><span class="mtk1">) </span><span class="mtk4">var</span><span class="mtk1"> name: </span><span class="mtk10">String</span><span class="mtk1"> = </span><span class="mtk8">&quot;&quot;</span></span></code></pre><p>The <code>wrappedValue</code> of the outer property wrapper isn&#x27;t <code>String</code>, it&#x27;s actually <code>Appending</code>, and therein lies the problem. If we want one level of wrapping, <code>Appending</code> needs to take a <code>String</code>, but for two levels of wrapping it needs to take another <code>Appending</code>.</p><p>This might seem like a <a href="https://en.wikipedia.org/wiki/Catch-22_(logic)">Catch-22</a>, but we can actually use <em>protocolization</em> to solve this issue. Instead of <code>Appending</code> operating on <code>String</code>s, we can make it operate on &quot;anything that is appendable&quot; by using a protocol.</p><pre class="dark-default-dark vscode-highlight" data-language="swift"><code class="vscode-highlight-code"><span class="vscode-highlight-line"><span class="mtk4">protocol</span><span class="mtk1"> </span><span class="mtk10">Appendable</span><span class="mtk1"> {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">func</span><span class="mtk1"> </span><span class="mtk11">appending</span><span class="mtk1">(</span><span class="mtk11">string</span><span class="mtk1">: </span><span class="mtk10">String</span><span class="mtk1">) -&gt; </span><span class="mtk4">Self</span></span>
<span class="vscode-highlight-line"><span class="mtk1">}</span></span>
<span class="vscode-highlight-line"><span class="mtk1"></span></span>
<span class="vscode-highlight-line"><span class="mtk4">extension</span><span class="mtk1"> </span><span class="mtk10">String</span><span class="mtk1">: Appendable {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">func</span><span class="mtk1"> </span><span class="mtk11">appending</span><span class="mtk1">(</span><span class="mtk11">string</span><span class="mtk1">: </span><span class="mtk10">String</span><span class="mtk1">) -&gt; </span><span class="mtk10">String</span><span class="mtk1"> {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        </span><span class="mtk15">return</span><span class="mtk1"> </span><span class="mtk4">self</span><span class="mtk1"> + string</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    }</span></span>
<span class="vscode-highlight-line"><span class="mtk1">}</span></span>
<span class="vscode-highlight-line"><span class="mtk1"></span></span>
<span class="vscode-highlight-line"><span class="mtk4">@propertyWrapper</span></span>
<span class="vscode-highlight-line"><span class="mtk4">struct</span><span class="mtk1"> </span><span class="mtk10">Appending</span><span class="mtk1">&lt;</span><span class="mtk4">T</span><span class="mtk1">: </span><span class="mtk10">Appendable</span><span class="mtk1">&gt; {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">private</span><span class="mtk1">(</span><span class="mtk4">set</span><span class="mtk1">) </span><span class="mtk4">var</span><span class="mtk1"> value: T</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">let</span><span class="mtk1"> toAppend: </span><span class="mtk10">String</span></span>
<span class="vscode-highlight-line"><span class="mtk1"></span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">var</span><span class="mtk1"> wrappedValue: T {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        </span><span class="mtk4">get</span><span class="mtk1"> { value }</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        </span><span class="mtk4">set</span><span class="mtk1"> { value = newValue.</span><span class="mtk11">appending</span><span class="mtk1">(</span><span class="mtk11">string</span><span class="mtk1">: toAppend) }</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    }</span></span>
<span class="vscode-highlight-line"><span class="mtk1"></span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">init</span><span class="mtk1">(</span><span class="mtk11">wrappedValue</span><span class="mtk1">: T, </span><span class="mtk11">_</span><span class="mtk1"> </span><span class="mtk12">toAppend</span><span class="mtk1">: </span><span class="mtk10">String</span><span class="mtk1">) {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        </span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk12">value</span><span class="mtk1"> = wrappedValue</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        </span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk12">toAppend</span><span class="mtk1"> = toAppend</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    }</span></span>
<span class="vscode-highlight-line"><span class="mtk1">}</span></span></code></pre><p>Now for the kicker: we can make an <code>Appending</code>, itself, be <code>Appendable</code> too!</p><pre class="dark-default-dark vscode-highlight" data-language="swift"><code class="vscode-highlight-code"><span class="vscode-highlight-line"><span class="mtk4">extension</span><span class="mtk1"> </span><span class="mtk10">Appending</span><span class="mtk1">: Appendable {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">func</span><span class="mtk1"> </span><span class="mtk11">appending</span><span class="mtk1">(</span><span class="mtk11">string</span><span class="mtk1">: </span><span class="mtk10">String</span><span class="mtk1">) -&gt; Appending&lt;T&gt; {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        </span><span class="mtk15">return</span><span class="mtk1"> </span><span class="mtk11">Appending</span><span class="mtk1">(</span></span>
<span class="vscode-highlight-line"><span class="mtk1">            </span><span class="mtk11">wrappedValue</span><span class="mtk1">: </span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk12">wrappedValue</span><span class="mtk1">.</span><span class="mtk11">appending</span><span class="mtk1">(</span></span>
<span class="vscode-highlight-line"><span class="mtk1">                </span><span class="mtk11">string</span><span class="mtk1">: string</span></span>
<span class="vscode-highlight-line"><span class="mtk1">            ),</span></span>
<span class="vscode-highlight-line"><span class="mtk1">            </span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk12">toAppend</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        )</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    }</span></span>
<span class="vscode-highlight-line"><span class="mtk1">}</span></span></code></pre><p>The <code>appending</code> method in <code>Appending</code> takes the wrapped value, appends the string, and creates a new <code>Appending</code>. The recursive nature means the strings are appended in inner-to-outer order, and it works!</p><pre class="dark-default-dark vscode-highlight" data-language="swift"><code class="vscode-highlight-code"><span class="vscode-highlight-line"><span class="mtk4">struct</span><span class="mtk1"> </span><span class="mtk10">Test</span><span class="mtk1"> {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">@Appending</span><span class="mtk1">(</span><span class="mtk8">&quot;!&quot;</span><span class="mtk1">)</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">@Appending</span><span class="mtk1">(</span><span class="mtk8">&quot;?&quot;</span><span class="mtk1">)</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">var</span><span class="mtk1"> name: </span><span class="mtk10">String</span><span class="mtk1"> = </span><span class="mtk8">&quot;&quot;</span></span>
<span class="vscode-highlight-line"><span class="mtk1"></span></span>
<span class="vscode-highlight-line"><span class="mtk1">    </span><span class="mtk4">init</span><span class="mtk1">(</span><span class="mtk11">_</span><span class="mtk1"> </span><span class="mtk12">name</span><span class="mtk1">: </span><span class="mtk10">String</span><span class="mtk1">) {</span></span>
<span class="vscode-highlight-line"><span class="mtk1">        </span><span class="mtk4">self</span><span class="mtk1">.</span><span class="mtk12">name</span><span class="mtk1"> = name</span></span>
<span class="vscode-highlight-line"><span class="mtk1">    }</span></span>
<span class="vscode-highlight-line"><span class="mtk1">}</span></span>
<span class="vscode-highlight-line"><span class="mtk1"></span></span>
<span class="vscode-highlight-line"><span class="mtk4">var</span><span class="mtk1"> a = </span><span class="mtk11">Test</span><span class="mtk1">(</span><span class="mtk8">&quot;Noah&quot;</span><span class="mtk1">)</span></span>
<span class="vscode-highlight-line"><span class="mtk11">print</span><span class="mtk1">(a.</span><span class="mtk12">name</span><span class="mtk1">) </span><span class="mtk3">// Prints &quot;Noah?!&quot;</span></span></code></pre><h1 id="is-this-too-much" class="BlogPageLayout__MyTag-sc-1pnb15k-8 fecpOA">Is this too much?</h1><p>Well...probably. Though nesting property wrappers like this works, it&#x27;s pretty confusing and you could achieve the same result with code that is much easier to read and understand.</p><p>In general, the main use case I&#x27;ve seen for property wrappers in application code is when you want to have properties on your objects driven or observed by an outside, unrelated system. <a href="/blog/userdefaults-editor-swiftui">Driving properties with UserDefaults</a> is one use case, and hooking into SwiftUI to invalidate layout with <code>@State</code> is another.</p><p>In most cases, I think that one level of wrapping with configurable behavior is better than two levels of wrapping. If you need to nest property wrappers, consider whether you can make your existing wrapper exhibit the same behavior by making it configurable. For example:</p><pre class="dark-default-dark vscode-highlight" data-language="swift"><code class="vscode-highlight-code"><span class="vscode-highlight-line"><span class="mtk3">// This:</span></span>
<span class="vscode-highlight-line"><span class="mtk4">@Appending</span><span class="mtk1">(</span><span class="mtk8">&quot;!&quot;</span><span class="mtk1">) </span><span class="mtk4">@Appending</span><span class="mtk1">(</span><span class="mtk8">&quot;?&quot;</span><span class="mtk1">) </span><span class="mtk4">var</span><span class="mtk1"> name = </span><span class="mtk8">&quot;Noah&quot;</span></span>
<span class="vscode-highlight-line"><span class="mtk1"></span></span>
<span class="vscode-highlight-line"><span class="mtk3">// Could be simpler by combining the parameters:</span></span>
<span class="vscode-highlight-line"><span class="mtk4">@Appending</span><span class="mtk1">(</span><span class="mtk8">&quot;?!&quot;</span><span class="mtk1">) </span><span class="mtk4">var</span><span class="mtk1"> name = </span><span class="mtk8">&quot;Noah&quot;</span></span></code></pre><pre class="dark-default-dark vscode-highlight" data-language="swift"><code class="vscode-highlight-code"><span class="vscode-highlight-line"><span class="mtk3">// This:</span></span>
<span class="vscode-highlight-line"><span class="mtk4">@Doubled</span><span class="mtk1"> </span><span class="mtk4">@Tripled</span><span class="mtk1"> </span><span class="mtk4">var</span><span class="mtk1"> value: </span><span class="mtk10">Int</span></span>
<span class="vscode-highlight-line"><span class="mtk1"></span></span>
<span class="vscode-highlight-line"><span class="mtk3">// Could be phrased with the multiple as a parameter:</span></span>
<span class="vscode-highlight-line"><span class="mtk4">@Multiplied</span><span class="mtk1">(multiplier: </span><span class="mtk7">6</span><span class="mtk1">) </span><span class="mtk4">var</span><span class="mtk1"> value: </span><span class="mtk10">Int</span></span></code></pre><pre class="dark-default-dark vscode-highlight" data-language="swift"><code class="vscode-highlight-code"><span class="vscode-highlight-line"><span class="mtk3">// This:</span></span>
<span class="vscode-highlight-line"><span class="mtk4">@Lowercased</span><span class="mtk1"> </span><span class="mtk4">@Trimmed</span><span class="mtk1"> </span><span class="mtk4">var</span><span class="mtk1"> slug: </span><span class="mtk10">String</span></span>
<span class="vscode-highlight-line"><span class="mtk1"></span></span>
<span class="vscode-highlight-line"><span class="mtk3">// Could be combined with an OptionSet parameter </span></span>
<span class="vscode-highlight-line"><span class="mtk4">@StringTransform</span><span class="mtk1">([.</span><span class="mtk12">lowercasing</span><span class="mtk1">, .</span><span class="mtk12">trimming</span><span class="mtk1">])</span></span>
<span class="vscode-highlight-line"><span class="mtk4">var</span><span class="mtk1"> slug: </span><span class="mtk10">String</span></span></code></pre><p>However, I think there are two cases where you might need to use this nesting strategy:</p><ol><li>You want to double-wrap a property wrapper you don&#x27;t control</li><li>You&#x27;re a library author and you want to make sure your library&#x27;s wrappers can be double-wrapped (around themselves, or around another wrapper)</li></ol><p>It&#x27;s worth noting as well that property wrappers are notorious for sometimes causing crashes in the Swift compiler:</p><div class="Tweet__Wrapper-sc-13ea3j0-0 emBdTA"><div class="Tweet__InnerWrapper-sc-13ea3j0-1 fgyWQq"><div></div></div></div><p>So, take that as an additional caveat when you&#x27;re considering nested wrappers.</p><h1 id="conclusion" class="BlogPageLayout__MyTag-sc-1pnb15k-8 fecpOA">Conclusion</h1><p>In general, think carefully about when to use nested property wrappers - but if you want them, protocolization could be the answer! The generics system in Swift can be complicated, but it&#x27;s really powerful, especially combined with the other, newer features of the language. With great power comes great responsibility.</p><div class="Tweet__Wrapper-sc-13ea3j0-0 emBdTA"><div class="Tweet__InnerWrapper-sc-13ea3j0-1 fgyWQq"><div></div></div></div><blockquote><p>If you&#x27;re interested in the full source code for this example, it&#x27;s available <a href="https://gist.github.com/noahsark769/ddee2e7d8f4fc9347ba1d9a66fbac058">on Github</a>.</p></blockquote><style class="vscode-highlight-styles">
  
  .dark-default-dark {
background-color: #1E1E1E;
color: #D4D4D4;
}

.dark-default-dark .mtk1 { color: #D4D4D4; }
.dark-default-dark .mtk2 { color: #1E1E1E; }
.dark-default-dark .mtk3 { color: #6A9955; }
.dark-default-dark .mtk4 { color: #569CD6; }
.dark-default-dark .mtk5 { color: #D16969; }
.dark-default-dark .mtk6 { color: #D7BA7D; }
.dark-default-dark .mtk7 { color: #B5CEA8; }
.dark-default-dark .mtk8 { color: #CE9178; }
.dark-default-dark .mtk9 { color: #646695; }
.dark-default-dark .mtk10 { color: #4EC9B0; }
.dark-default-dark .mtk11 { color: #DCDCAA; }
.dark-default-dark .mtk12 { color: #9CDCFE; }
.dark-default-dark .mtk13 { color: #000080; }
.dark-default-dark .mtk14 { color: #F44747; }
.dark-default-dark .mtk15 { color: #C586C0; }
.dark-default-dark .mtk16 { color: #6796E6; }
.dark-default-dark .mtk17 { color: #808080; }
.dark-default-dark .mtki { font-style: italic; }
.dark-default-dark .mtkb { font-weight: bold; }
.dark-default-dark .mtku { text-decoration: underline; text-underline-position: under; }
</style></div><div class="BlogPageLayout__NonContent-sc-1pnb15k-1 bDzSYv"><div class="EndButtons__Container-sc-1rt8k5q-0 eNfbJZ"><a href="https://twitter.com/intent/tweet?text=Post%20by%20%40noahsark769%3A%20Nested%20Property%20Wrappers%20in%20Swift%20https%3A%2F%2Fnoahgilmore.com%2Fblog%2Fnesting-property-wrappers%2F" target="_blank" aria-label="Twitter" class="default__A-phsh4y-5 fPVIZy"><div class="EndButtons__ButtonStyle-sc-1rt8k5q-1 itlfwG"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" size="24" color="white" style="color:white" height="24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg></div></a><a href="/blog" aria-label="Blog homepage" class="default__A-phsh4y-5 fPVIZy"><div class="EndButtons__ButtonStyle-sc-1rt8k5q-1 jzMaZh"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" size="24" color="white" style="color:white" height="24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M258.5 104.1c-1.5-1.2-3.5-1.2-5 0l-156 124.8c-.9.8-1.5 1.9-1.5 3.1v230c0 1.1.9 2 2 2h108c1.1 0 2-.9 2-2V322c0-1.1.9-2 2-2h92c1.1 0 2 .9 2 2v140c0 1.1.9 2 2 2h108c1.1 0 2-.9 2-2V232c0-1.2-.6-2.4-1.5-3.1l-156-124.8z"></path><path d="M458.7 204.2l-189-151.4C265.9 49.7 261 48 256 48s-9.9 1.7-13.7 4.8L160 119.7V77.5c0-1.1-.9-2-2-2H98c-1.1 0-2 .9-2 2v92.2l-42.7 35.1c-3.1 2.5-5.1 6.2-5.3 10.2-.2 4 1.3 7.9 4.1 10.7 2.6 2.6 6.1 4.1 9.9 4.1 3.2 0 6.3-1.1 8.8-3.1l183.9-148c.5-.4.9-.4 1.3-.4s.8.1 1.3.4l183.9 147.4c2.5 2 5.6 3.1 8.8 3.1 3.7 0 7.2-1.4 9.9-4.1 2.9-2.8 4.4-6.7 4.2-10.7-.3-4-2.2-7.7-5.4-10.2z"></path></svg></div></a></div><div class="Disqus__Wrapper-sc-15q2k8t-0 dfIsSY"><div id="disqus_thread"></div></div></div></div></div></div></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/nesting-property-wrappers/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-02c65be0a637524b9e44.js"],"component---src-templates-mdx-blog-posts-template-jsx":["/component---src-templates-mdx-blog-posts-template-jsx-7b8a502f0a3a2be5f867.js"],"component---src-pages-404-jsx":["/component---src-pages-404-jsx-4a15296be80b713f3a9d.js"],"component---src-pages-blog-index-jsx":["/component---src-pages-blog-index-jsx-6bc01db0b7d8ba591aa4.js"],"component---src-pages-examples-ios-copy-to-clipboard-index-jsx":["/component---src-pages-examples-ios-copy-to-clipboard-index-jsx-ce737becc733a186ef2e.js"],"component---src-pages-index-jsx":["/component---src-pages-index-jsx-844e8e433448b5029ec7.js"],"component---src-pages-blog-advertising-mdx":["/component---src-pages-blog-advertising-mdx-6041348659d9ad4498a7.js"],"component---src-pages-blog-amplitude-macos-mdx":["/component---src-pages-blog-amplitude-macos-mdx-6bb9459a62344934ce8a.js"],"component---src-pages-blog-automatic-preview-updating-paused-mdx":["/component---src-pages-blog-automatic-preview-updating-paused-mdx-d1615e4f90af4eb46d49.js"],"component---src-pages-blog-catalina-importerror-no-module-named-zlib-mdx":["/component---src-pages-blog-catalina-importerror-no-module-named-zlib-mdx-a532dcf39d7fef818c33.js"],"component---src-pages-blog-cfbundleversion-invalid-mdx":["/component---src-pages-blog-cfbundleversion-invalid-mdx-c3571ac20ee0da7d4032.js"],"component---src-pages-blog-cifilter-colorwheel-mdx":["/component---src-pages-blog-cifilter-colorwheel-mdx-1264d2ff668442a56743.js"],"component---src-pages-blog-cifilterio-mdx":["/component---src-pages-blog-cifilterio-mdx-09ef1f8ab365e2c0ffed.js"],"component---src-pages-blog-civector-codable-mdx":["/component---src-pages-blog-civector-codable-mdx-a604974277ebf64c5a4c.js"],"component---src-pages-blog-color-compatibility-pod-mdx":["/component---src-pages-blog-color-compatibility-pod-mdx-e3f50d294cedd5ff87e6.js"],"component---src-pages-blog-coreanimation-metal-mdx":["/component---src-pages-blog-coreanimation-metal-mdx-71ec5a53613965d04cb7.js"],"component---src-pages-blog-dark-mode-uicolor-compatibility-mdx":["/component---src-pages-blog-dark-mode-uicolor-compatibility-mdx-b42baaee5524ab362631.js"],"component---src-pages-blog-data-over-the-app-store-mdx":["/component---src-pages-blog-data-over-the-app-store-mdx-c0ca5251de352655e4d1.js"],"component---src-pages-blog-didprocessediting-crash-mdx":["/component---src-pages-blog-didprocessediting-crash-mdx-56d5ea29af9b22dfb185.js"],"component---src-pages-blog-docker-commands-mdx":["/component---src-pages-blog-docker-commands-mdx-7a10f712c96ce51a9390.js"],"component---src-pages-blog-easy-gatsby-image-components-mdx":["/component---src-pages-blog-easy-gatsby-image-components-mdx-6bb08b248064874ab7bb.js"],"component---src-pages-blog-gatsby-mdx-frontmatter-mdx":["/component---src-pages-blog-gatsby-mdx-frontmatter-mdx-e7f2795b9aec8d5427aa.js"],"component---src-pages-blog-gatsby-tailwind-mdx":["/component---src-pages-blog-gatsby-tailwind-mdx-7e5a010b7572b6fe0d61.js"],"component---src-pages-blog-gpu-capture-flickering-mdx":["/component---src-pages-blog-gpu-capture-flickering-mdx-2fc5a60d32baf22b1ec7.js"],"component---src-pages-blog-install-nokogiri-macos-mojave-mdx":["/component---src-pages-blog-install-nokogiri-macos-mojave-mdx-ac0be3cc0cfaaa31c1cb.js"],"component---src-pages-blog-installing-sharp-github-actions-mdx":["/component---src-pages-blog-installing-sharp-github-actions-mdx-cf5b2e1f9534a3cf52d9.js"],"component---src-pages-blog-my-bucket-list-mdx":["/component---src-pages-blog-my-bucket-list-mdx-03fa7b709932b453003a.js"],"component---src-pages-blog-nesting-property-wrappers-mdx":["/component---src-pages-blog-nesting-property-wrappers-mdx-889dadc41c73688faeac.js"],"component---src-pages-blog-nsobject-equatable-mdx":["/component---src-pages-blog-nsobject-equatable-mdx-4de465e83130b4311a35.js"],"component---src-pages-blog-nstextview-shift-tab-mdx":["/component---src-pages-blog-nstextview-shift-tab-mdx-b2e6f02fcd2a6e4ea1df.js"],"component---src-pages-blog-popover-uinavigationcontroller-preferredcontentsize-mdx":["/component---src-pages-blog-popover-uinavigationcontroller-preferredcontentsize-mdx-db8fdcc313df4336f6a6.js"],"component---src-pages-blog-pyparsing-trees-mdx":["/component---src-pages-blog-pyparsing-trees-mdx-9c3ddd5a1014988f9d49.js"],"component---src-pages-blog-refactoring-private-to-public-mdx":["/component---src-pages-blog-refactoring-private-to-public-mdx-b8df43e3cf2faa93db94.js"],"component---src-pages-blog-rxswift-multiple-subscribers-mdx":["/component---src-pages-blog-rxswift-multiple-subscribers-mdx-5f4ca07e36fa39d6444e.js"],"component---src-pages-blog-swift-dependency-injection-mdx":["/component---src-pages-blog-swift-dependency-injection-mdx-2e57e9be60d6f271c5f0.js"],"component---src-pages-blog-swift-pointer-uint-mdx":["/component---src-pages-blog-swift-pointer-uint-mdx-c18d0e83174716fb1eed.js"],"component---src-pages-blog-swiftui-equatable-crash-mdx":["/component---src-pages-blog-swiftui-equatable-crash-mdx-474fea210789c868bb42.js"],"component---src-pages-blog-swiftui-relativedatetimeformatter-mdx":["/component---src-pages-blog-swiftui-relativedatetimeformatter-mdx-33e7767ab720daa8c62f.js"],"component---src-pages-blog-swiftui-self-sizing-cells-mdx":["/component---src-pages-blog-swiftui-self-sizing-cells-mdx-b481c9adb012065fc0f2.js"],"component---src-pages-blog-swiftui-two-columns-equal-width-mdx":["/component---src-pages-blog-swiftui-two-columns-equal-width-mdx-6cb1af62f6db46bf86dd.js"],"component---src-pages-blog-tables-are-hard-mdx":["/component---src-pages-blog-tables-are-hard-mdx-b3ad43528200e7728b1c.js"],"component---src-pages-blog-taking-down-sfsymbols-mdx":["/component---src-pages-blog-taking-down-sfsymbols-mdx-c6cad0b3b6c482049e78.js"],"component---src-pages-blog-tuple-shuffling-mdx":["/component---src-pages-blog-tuple-shuffling-mdx-d49fc14d24858f46a8ea.js"],"component---src-pages-blog-uibutton-padding-mdx":["/component---src-pages-blog-uibutton-padding-mdx-18a684c417694d769390.js"],"component---src-pages-blog-uiwindowscene-black-screen-mdx":["/component---src-pages-blog-uiwindowscene-black-screen-mdx-e058cfc430c5607f275b.js"],"component---src-pages-blog-userdefaults-editor-swiftui-mdx":["/component---src-pages-blog-userdefaults-editor-swiftui-mdx-297e0e36bdf2cccd4567.js"],"component---src-pages-blog-userdefaults-set-nil-mdx":["/component---src-pages-blog-userdefaults-set-nil-mdx-cddfd73a063807c32b8b.js"]};/*]]>*/</script><script src="/component---src-pages-blog-nesting-property-wrappers-mdx-889dadc41c73688faeac.js" async=""></script><script src="/commons-64c3958e35f85e532944.js" async=""></script><script src="/app-02c65be0a637524b9e44.js" async=""></script><script src="/webpack-runtime-95a3a5701a40a55f5cc9.js" async=""></script></body></html>